(()=>{"use strict";var e,t,a,o={58979:(e,t,a)=>{a.d(t,{useKeyDownEffect:()=>i});a(67294),a(41792);var o=a(69845),r=a(65583),n=a(90180);function l(e,t,a,l,i){const{keys:s}=(0,o.useContext)(r.default),c=(0,o.useBatchingCallback)(l,i||[]);(0,o.useEffect)((()=>{const o=(0,n.getNodeFromRefOrNode)(e);if(!o)return;if(o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE)throw new Error("only an element or a document node can be used");const r=(0,n.resolveKeySpec)(s,t);if(1===r.key.length&&""===r.key[0])return;const l=(0,n.getOrCreateMousetrap)(o),i=(0,n.createKeyHandler)(o,r,c);return l.bind(r.key,i,a),()=>{l.unbind(r.key,a)}}),[c,s])}function i(e,t,a,o){l(e,t,"keydown",a,o)}},90180:(e,t,a)=>{a.d(t,{createKeyHandler:()=>u,getNodeFromRefOrNode:()=>c,getOrCreateMousetrap:()=>s,prettifyShortcut:()=>f,resolveKeySpec:()=>d});a(41792);var o=a(42441),r=a.n(o);const n="__WEB_STORIES_MT__",l=["submit","button","checkbox","radio","image","file","range","reset","hidden"],i=["submit","button","checkbox","radio","image","file","reset"];function s(e){return e[n]||(e[n]=new(r())(e))}function c(e){return e&&"current"in e?e.current:e}function d(e,t){const a="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:o,shift:r=!1,repeat:n=!0,clickable:l=!0,editable:i=!1,dialog:s=!1,allowDefault:c=!1}=a,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}((new Array).concat(o).map((t=>e[t]||t)).flat(),r);return{key:d,shift:r,clickable:l,repeat:n,editable:i,dialog:s,allowDefault:c}}function u(e,{repeat:t,editable:a,clickable:o,dialog:r,allowDefault:n=!1},s){return c=>{const{repeat:d,target:u}=c;if((t||!d)&&(a||!function({tagName:e,isContentEditable:t,type:a,...o}){if("readOnly"in o&&!0===o.readOnly)return!1;if(t||"TEXTAREA"===e)return!0;if("INPUT"===e)return!l.includes(a);return!1}(u))&&(o||!function({tagName:e,type:t}){if(["BUTTON","A"].includes(e))return!0;if("INPUT"===e)return i.includes(t);return!1}(u))&&(r||!function(e,t){if(1!==e.nodeType)return!1;const a=e.closest('dialog,[role="dialog"]');return a&&t!==a&&t.contains(a)}(u,e)))return s(c),n}}function p(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function m(e){const t=p();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function f(e){const t=p()?"":"+";return e.toLowerCase().replace("alt",m("alt")).replace("ctrl",m("ctrl")).replace("mod",m("mod")).replace("cmd",m("cmd")).replace("shift",m("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}},28395:(e,t,a)=>{a.d(t,{Placement:()=>r,PopupContainer:()=>l,RTL_PLACEMENT:()=>n});var o=a(12788);let r=function(e){return e.Top="top",e.TopStart="top-start",e.TopEnd="top-end",e.Bottom="bottom",e.BottomStart="bottom-start",e.BottomEnd="bottom-end",e.Right="right",e.RightStart="right-start",e.RightEnd="right-end",e.Left="left",e.LeftStart="left-start",e.LeftEnd="left-end",e}({});const n={[r.Top]:r.Top,[r.TopStart]:r.TopStart,[r.TopEnd]:r.TopEnd,[r.Bottom]:r.Bottom,[r.BottomEnd]:r.BottomEnd,[r.BottomStart]:r.BottomStart,[r.Right]:r.Left,[r.RightStart]:r.LeftStart,[r.RightEnd]:r.LeftEnd,[r.Left]:r.Right,[r.LeftStart]:r.RightStart,[r.LeftEnd]:r.RightEnd},l=o.default.div.withConfig({displayName:"constants__PopupContainer",componentId:"sc-1f3rwe8-0"})(["/*! @noflip */ "," /*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(({$offset:{x:e,y:t,width:a},fillWidth:o,transforms:r="",zIndex:n,maxWidth:l})=>{const i={};return o&&(l?i.minWidth=`${a}px`:i.width=`${a}px`),l&&!i.width&&(i.maxWidth=`${l}px`),{transform:`translate(${e}px, ${t}px) ${r}`,...i,zIndex:n}}),(({noOverFlow:e})=>e?"":"overflow-y: auto;"),(({topOffset:e=0})=>`calc(100vh - ${e}px)`))},1782:(e,t,a)=>{a.d(t,{DEFAULT_ARIA_CLEAR_LABEL:()=>l,DEFAULT_ARIA_INPUT_LABEL:()=>i,DEFAULT_PLACEHOLDER:()=>n,DEFAULT_POPUP_FILL_WIDTH:()=>r,Z_INDEX:()=>s});var o=a(36823);const r=276,n=(0,o.__)("Search","web-stories"),l=(0,o.__)("Clear Search","web-stories"),i=(0,o.__)("Search","web-stories"),s={CLEAR_BUTTON:5}},67391:(e,t,a)=>{a.d(t,{fullSizeAbsolute:()=>r});var o=a(12788);const r=(0,o.css)(["position:absolute;top:0;right:0;bottom:0;left:0;"]);(0,o.css)(["position:relative;top:0;left:0;height:100%;width:100%;"])},69845:(e,t,a)=>{a.d(t,{Fragment:()=>n.Fragment,StrictMode:()=>n.StrictMode,cloneElement:()=>n.cloneElement,createContext:()=>r.createContext,createElement:()=>n.createElement,createPortal:()=>l.createPortal,createRef:()=>n.createRef,forwardRef:()=>n.forwardRef,identity:()=>r.identity,memo:()=>n.memo,render:()=>l.render,useBatchingCallback:()=>i.default,useCallback:()=>n.useCallback,useCombinedRefs:()=>s.default,useContext:()=>r.useContext,useContextReact:()=>n.useContext,useContextSelector:()=>c.default,useDebouncedCallback:()=>o.useDebouncedCallback,useEffect:()=>n.useEffect,useFocusOut:()=>d.default,useLayoutEffect:()=>n.useLayoutEffect,useMemo:()=>n.useMemo,usePrevious:()=>u.default,useReducer:()=>n.useReducer,useRef:()=>n.useRef,useResizeEffect:()=>p.default,useState:()=>n.useState});var o=a(24697),r=(a(49349),a(35389)),n=a(67294),l=a(73935),i=a(12439),s=a(81967),c=a(14714),d=a(94547),u=a(2780),p=a(13039);a(97762);a(52583)},36382:(e,t,a)=>{a.d(t,{disableTracking:()=>l,enableTracking:()=>r.default,getTimeTracker:()=>m.default,initializeTracking:()=>o.default,trackClick:()=>s.default,trackError:()=>c.default,trackEvent:()=>d.default,trackScreenView:()=>p});var o=a(49388),r=a(57714),n=a(60946);const l=function(){n.config.trackingEnabled=!1};var i=a(49379),s=a(36864),c=a(68729),d=a(5532);var u=a(87438);const p=async function(e){if(!await(0,i.default)())return Promise.resolve();const t={screen_name:e};return(0,u.default)("screen_view",t)};var m=a(26962)},53461:(e,t,a)=>{var o={};a.r(o),a.d(o,{createStoryFromTemplate:()=>hi,duplicateStory:()=>_i,fetchStories:()=>fi,getAuthors:()=>yi,getProducts:()=>wi,getTaxonomies:()=>Ei,getTaxonomyTerms:()=>Si,trashStory:()=>bi,updateStory:()=>gi});var r=a(67294);a.p=window.webStories.publicPath;var n=a(36823);for(const e of window?.webStories?.localeData||[])(0,n.setLocaleData)(e);var l=a(35575),i=a(56394),s=a(68114),c=a(5488),d=a(40132),u=a(97222),p=a(61265),m=a(12788),f=a(14194),b=a(87948),g=a(69845);const h=(0,g.createContext)({isRTL:!1,userId:0,locale:{},newStoryURL:"",cdnURL:"",version:"",capabilities:{},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0},containerId:""});const _=function ConfigProvider({config:e,children:t}){return r.createElement(h.Provider,{value:e},t)};const y=function(e=g.identity){return(0,g.useContextSelector)(h,e)};a(67602),a(30005);var E=a(36382),S=a(38999);const w="creating_story_from_template",v="create_story_from_template_success",T="create_story_from_template_failure",C="loading_stories",I="fetch_stories_success",k="fetch_stories_failure",L="update_story",A="update_story_failure",x="trash_story",O="trash_story_failure",D="duplicate_story",N="duplicate_story_failure",P={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};var R,B;a(53476),a(31107),a(15716),a(33442),a(61964),a(69878),a(52915),a(97895),a(22275);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},M.apply(this,arguments)}const SvgCompass=({title:e,titleId:t,...a})=>r.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,R||(R=r.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19"})),B||(B=r.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263z"}))),U=(0,r.memo)(SvgCompass);var F,z;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},G.apply(this,arguments)}const SvgHomeWithHeart=({title:e,titleId:t,...a})=>r.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,F||(F=r.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.5 2.5 0 0 0-.782.748 2.5 2.5 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.48 2.48 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484"})),z||(z=r.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9"}))),H=(0,r.memo)(SvgHomeWithHeart);var j;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},V.apply(this,arguments)}const SvgMenu=({title:e,titleId:t,...a})=>r.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,j||(j=r.createElement("path",{fill:"currentColor",d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}))),q=(0,r.memo)(SvgMenu);var W;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},$.apply(this,arguments)}const SvgMoreVertical=({title:e,titleId:t,...a})=>r.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 4 16","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,W||(W=r.createElement("path",{fill:"currentColor",d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),K=(0,r.memo)(SvgMoreVertical);var X=a(83057);const Y="open-in-editor-action",J="rename-action",Z="duplicate-action",Q="delete-story-action",ee="copy-story-link",te="open-story-link",ae=[{label:(0,n.__)("Open in editor","web-stories"),value:Y,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Open in new tab","web-stories"),value:te,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Copy Story URL","web-stories"),value:ee,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Rename","web-stories"),value:J,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Duplicate","web-stories"),value:Z,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Delete Story","web-stories"),value:Q,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasDeleteAction)}],oe={ASC:"asc",DESC:"desc"},re={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},ne={orderby:re,order:oe},le={[re.NAME]:oe.ASC,[re.DATE_CREATED]:oe.DESC,[re.LAST_MODIFIED]:oe.DESC,[re.CREATED_BY]:oe.ASC},ie=[{label:(0,n.__)("Name","web-stories"),value:re.NAME},{label:(0,n.__)("Date Created","web-stories"),value:re.DATE_CREATED},{label:(0,n.__)("Last Modified","web-stories"),value:re.LAST_MODIFIED},{label:(0,n.__)("Created By","web-stories"),value:re.CREATED_BY}],se={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},ce={ALL:Object.values(se).join(","),PUBLISHED_AND_FUTURE:[se.PUBLISH,se.FUTURE].join(","),...se},de={[ce.PUBLISH]:(0,n.__)("Published","web-stories"),[ce.PENDING]:(0,n.__)("Pending","web-stories"),[ce.FUTURE]:(0,n.__)("Scheduled","web-stories"),[ce.DRAFT]:(0,n.__)("Draft","web-stories"),[ce.PRIVATE]:(0,n.__)("Private","web-stories")},ue=[{label:(0,n.__)("All Stories","web-stories"),value:ce.ALL,status:"all"},{label:(0,n.__)("Drafts","web-stories"),value:ce.DRAFT,status:ce.DRAFT},{label:(0,n.__)("Pending","web-stories"),value:ce.PENDING,status:ce.PENDING},{label:(0,n.__)("Published","web-stories"),value:ce.PUBLISH,status:ce.PUBLISH},{label:(0,n.__)("Scheduled","web-stories"),value:ce.FUTURE,status:ce.FUTURE},{label:(0,n.__)("Private","web-stories"),value:ce.PRIVATE,status:ce.PRIVATE}],pe={[ce.ALL]:e=>(0,X.default)(/* translators: %d: number of stories in view */ /* translators: %d: number of stories in view */
(0,n._n)("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",e,"web-stories"),String(e)),[ce.DRAFT]:e=>(0,X.default)(/* translators: %d: number of draft stories in view */ /* translators: %d: number of draft stories in view */
(0,n._n)("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",e,"web-stories"),String(e)),[ce.PUBLISH]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",e,"web-stories"),String(e)),[ce.FUTURE]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",e,"web-stories"),String(e)),[ce.PENDING]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",e,"web-stories"),String(e)),[ce.PRIVATE]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",e,"web-stories"),String(e))},me={filters:{status:ce.ALL},sort:{orderby:re.LAST_MODIFIED,order:le[re.LAST_MODIFIED]}},fe="diy_crafts",be="movies_tv",ge="beauty_style",he="fitness_wellbeing",_e="food",ye="travel",Ee="music",Se="sports",we=((0,n._x)("DIY & Crafts","template vertical","web-stories"),(0,n._x)("Movies & TV","template vertical","web-stories"),(0,n._x)("Beauty & Style","template vertical","web-stories"),(0,n._x)("Fitness & Wellbeing","template vertical","web-stories"),(0,n._x)("Food","template vertical","web-stories"),(0,n._x)("Travel","template vertical","web-stories"),(0,n._x)("Music","template vertical","web-stories"),(0,n._x)("Sports","template vertical","web-stories"),"white"),ve="black",Te="gray",Ce="brown",Ie="red",ke="orange",Le="yellow",Ae="green",xe="blue",Oe="pink",De="purple",Ne=((0,n._x)("White","color","web-stories"),(0,n._x)("Black","color","web-stories"),(0,n._x)("Gray","color","web-stories"),(0,n._x)("Brown","color","web-stories"),(0,n._x)("Red","color","web-stories"),(0,n._x)("Orange","color","web-stories"),(0,n._x)("Yellow","color","web-stories"),(0,n._x)("Green","color","web-stories"),(0,n._x)("Blue","color","web-stories"),(0,n._x)("Pink","color","web-stories"),(0,n._x)("Purple","color","web-stories"),{ALL:"template"}),Pe={[Ne.ALL]:e=>(0,X.default)(/* translators: %d: number of templates in view */ /* translators: %d: number of templates in view */
(0,n._n)("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",e,"web-stories"),String(e))},Re={POPULAR:"popular",RECENT:"recent"},Be={orderby:Re,order:{ASC:"asc",DESC:"desc"}},Me={filters:{status:Ne.ALL},sort:{orderby:Re.POPULAR}},Ue=[{label:(0,n.__)("Popular","web-stories"),value:Re.POPULAR},{label:(0,n.__)("Recent","web-stories"),value:Re.RECENT}],Fe={template:(0,n.__)("See details","web-stories")},ze={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"},Ge=[".jpg",".jpeg",".png",".gif"],He=288,je=1098,Ve={TABLET:"tablet",DESKTOP:"desktop",THUMBNAIL:"thumbnail"},qe={[Ve.TABLET]:200,[Ve.DESKTOP]:232,[Ve.THUMBNAIL]:33},We=24,$e=32,Ke=52,Xe=5,Ye={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Je={[Ye.DASHBOARD]:(0,n.__)("Dashboard","web-stories"),[Ye.TEMPLATES_GALLERY]:(0,n.__)("Explore Templates","web-stories"),[`${Ye.TEMPLATES_GALLERY}/${Ye.TEMPLATE_DETAIL}`]:(0,n.__)("Template Details","web-stories"),DEFAULT:(0,n.__)("Dashboard","web-stories")},Ze=[{value:Ye.DASHBOARD,label:Je[Ye.DASHBOARD],Icon:H},{value:Ye.TEMPLATES_GALLERY,label:Je[Ye.TEMPLATES_GALLERY],Icon:U}],Qe={GRID:"grid",LIST:"list"},et={[Qe.GRID]:(0,n.__)("Switch to List View","web-stories"),[Qe.LIST]:(0,n.__)("Switch to Grid View","web-stories")},tt="DASHBOARD",at="TEMPLATES_GALLERY",ot={[tt]:{...pe},[at]:{...Pe}},rt=24,nt=300,lt=853,it=640;const st=function(e,t){switch(t.type){case C:case w:return{...e,isLoading:t.payload};case T:case k:case A:case O:case N:return{...e,error:{...t.payload,id:Date.now()}};case v:return{...e,error:{}};case L:return{...e,error:{},stories:{...e.stories,[t.payload.id]:t.payload}};case x:{const a=t.payload.storyStatus===ce.DRAFT?ce.DRAFT:ce.PUBLISH;return{...e,error:{},storiesOrderById:e.storiesOrderById.filter((e=>e!==t.payload.id)),totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all-1,[a]:e.totalStoriesByStatus[a]-1},stories:Object.keys(e.stories).reduce(((a,o)=>(parseInt(o)!==t.payload.id&&(a[o]=e.stories[o]),a)),{})}}case D:return{...e,error:{},storiesOrderById:[t.payload.id,...e.storiesOrderById],totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all+1,[t.payload.status]:e.totalStoriesByStatus[t.payload.status]+1},stories:{...e.stories,[t.payload.id]:t.payload}};case I:{const{fetchedStoryIds:a,totalStoriesByStatus:o,totalPages:r,page:n,stories:l}=t.payload,{storiesOrderById:i,stories:s}=e,c=1===n?a:[...i,...a],d=[...new Set(c)];return{...e,error:{},storiesOrderById:d,stories:{...s,...l},totalPages:r||1,totalStoriesByStatus:o,allPagesFetched:n>=r}}default:return e}},ct={LOAD_STORIES:{MESSAGE:(0,n.__)("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:(0,n.__)("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:(0,n.__)("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:(0,n.__)("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:(0,n.__)("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:(0,n.__)("Cannot connect to data source","web-stories"),MESSAGE:(0,n.__)("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:(0,n.__)("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:(0,n.__)("Could not load the template","web-stories")}},dt=`${S.SESSION_STORAGE_PREFIX.LOCAL_AUTOSAVE_PREFIX}_auto-draft`,ut=()=>{const e=(0,g.useRef)(!0),t=(0,g.useMemo)((()=>new Map),[]),[a,o]=(0,g.useReducer)(st,P),{apiCallbacks:r}=y(),n=(0,g.useRef)(!1);(0,g.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]);const l=(0,g.useCallback)((async a=>{o({type:C,payload:!0});const l=(0,E.getTimeTracker)("load_stories");try{const{stories:l,fetchedStoryIds:i,totalPages:s,totalStoriesByStatus:c}=await r.fetchStories(a);if(!n.current)return;e.current&&t.forEach((e=>{e(c)})),e.current=!1,o({type:I,payload:{stories:l,totalPages:s,totalStoriesByStatus:c,fetchedStoryIds:i,page:a.page}})}catch(e){o({type:k,payload:{message:ct.LOAD_STORIES.MESSAGE,code:e.code}})}finally{o({type:C,payload:!1}),l()}}),[r,t]),i=(0,g.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_update_story");try{const t=await r.updateStory(e);o({type:L,payload:t})}catch(e){o({type:A,payload:{message:ct.UPDATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),s=(0,g.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_trash_story");try{await r.trashStory(e.id),o({type:x,payload:{id:e.id,storyStatus:e.status}})}catch(e){o({type:O,payload:{message:ct.DELETE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),c=(0,g.useCallback)((async e=>{o({type:w,payload:!0});try{const t=await r.createStoryFromTemplate(e);S.sessionStore.deleteItemByKey(dt),o({type:v}),window.location=t.editLink}catch(e){o({type:T,payload:{message:ct.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:e.code}})}finally{o({type:w,payload:!1})}}),[r]);return{stories:a,api:{duplicateStory:(0,g.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_duplicate_story");try{const t=await r.duplicateStory(e);o({type:D,payload:t})}catch(e){o({type:N,payload:{message:ct.DUPLICATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),fetchStories:l,createStoryFromTemplate:c,trashStory:s,updateStory:i,addInitialFetchListener:(0,g.useCallback)((e=>{const a=Symbol();return t.set(a,e),()=>{t.delete(a)}}),[t])}}};a(70560),a(41792);var pt=a(17445),mt=a(38627),ft=a(40877),bt=(a(86290),a(51085)),gt=a(7694),ht=a(55965),_t=a(30776),yt=a(59452);const Et=function(e){if(!e)return"";const t=(0,mt.default)(e);if((0,bt.default)(t)){const{locale:e}=(0,_t.default)();return(0,gt.default)(t,{includeSeconds:!1,addSuffix:!0,locale:e})}return(0,ht.default)(t)?(0,n.__)("yesterday","web-stories"):(0,yt.default)(e)};const St=function(e){return(0,mt.default)(e,{timeZone:"+0000"})};const wt="loading_templates",vt="fetch_templates_success",Tt="fetch_templates_failure",Ct="placeholder",It={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null},kt=(e,t)=>e.reduce(((e,a)=>a[t]?(e[a[t]],e[a[t]]=a,e):e),{});const Lt=function(e,t){switch(t.type){case wt:return{...e,isLoading:t.payload};case Tt:return{...e,error:{...t.payload,id:Date.now()}};case vt:{const a=t.payload.templates.map((({id:e})=>e)),o=1===t.payload.page?a:[...e.templatesOrderById,...a],r=[...new Set(o)];return{...e,error:{},templatesOrderById:r,templates:{...e.templates,...kt(t.payload.templates,"id")},isLoading:!1,totalPages:t.payload.totalPages,totalTemplates:t.payload.totalTemplates,allPagesFetched:t.payload.page>=t.payload.totalPages,templatesByTag:t.payload.templatesByTag}}case Ct:return It;default:return e}};const At=()=>{const[e,t]=(0,g.useReducer)(Lt,It),{cdnURL:o}=y(),r=(0,g.useCallback)((async()=>{t({type:wt,payload:!0});const e={},{getAllTemplates:r}=await Promise.all([a.e(649),a.e(4991)]).then(a.bind(a,82602)),n=(await r({cdnURL:o})).map((t=>{const a=function(e,t=!1){const{id:a,slug:o,modified:r,creationDate:n}=e;return a&&o?{...e,id:a,slug:o,creationDate:(0,mt.default)(n,(0,_t.default)()),status:"template",modified:St(r),isLocal:t}:null}(t);return a.tags.forEach((t=>{e[t]?e[t].push(a.id):e[t]=[a.id]})),a})).sort(((e,t)=>(0,pt.default)(e.creationDate,t.creationDate)));t({type:vt,payload:{page:1,templates:n,totalPages:1,totalTemplates:n.length,templatesByTag:e}})}),[o]),n=(0,g.useCallback)((t=>e.templates[t]?Promise.resolve(e.templates[t]):Promise.reject(new Error)),[e]);return{templates:e,api:{fetchExternalTemplates:r,fetchExternalTemplateById:n}}};const xt=function(){const{apiCallbacks:{getAuthors:e}}=y();return{api:{getAuthors:e}}};const Ot=function(){const{apiCallbacks:{getTaxonomies:e,getTaxonomyTerms:t}}=y();return{api:{getTaxonomies:e,getTaxonomyTerms:t}}},Dt=(0,g.createContext)({state:{},actions:{}});function ApiProvider({children:e}){const{api:t}=xt(),{api:a}=Ot(),{templates:o,api:n}=At(),{stories:l,api:i}=ut(),s={state:{stories:l,templates:o},actions:{storyApi:i,templateApi:n,usersApi:t,taxonomyApi:a}};return r.createElement(Dt.Provider,{value:s},e)}var Nt=a(97959),Pt=a(45697),Rt=a.n(Pt),Bt=a(58228),Mt=a(5574);const Ut=(0,m.css)(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`1px solid ${e.colors.border.defaultNormal}`)),Ft=m.default.div.withConfig({displayName:"cardGallery__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),zt=m.default.div.withConfig({displayName:"cardGallery__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Ut);zt.propTypes={$isThreeRows:Rt().bool};const Gt=m.default.div.withConfig({displayName:"cardGallery__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),Ht=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Plain}).withConfig({displayName:"cardGallery__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],(({$isSelected:e,theme:t})=>e&&(0,m.css)(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],t.borders.radius.medium,t.colors.interactiveBg.active)),Ut);function jt(e){return(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,n.__)("Poster of template page %s","web-stories"),e)}Ht.propTypes={$isSelected:Rt().bool};const Vt=function CardGallery({galleryPosters:e,isRTL:t,galleryLabel:a}){const[o,l]=(0,g.useState)(0),[i,s]=(0,g.useState)(),c=(0,g.useRef)(),d=(0,g.useRef)(),u=(0,g.useRef)({}),p=(0,g.useCallback)((e=>{l(e),s(e)}),[]),m=(0,g.useCallback)((e=>{s(e)}),[]);(0,g.useEffect)((()=>{e&&(l(0),s())}),[e]),(0,Nt.default)({containerRef:c,gridRef:d,itemRefs:u,isRTL:t,currentItemId:i,items:e});const f=(0,g.useMemo)((()=>e.map(((e,t)=>{const a=`gallery_item_${t}`,l=t+1,s=i?i===t:o===t;return r.createElement("div",{key:a,ref:e=>{u.current[t]=e},onFocus:()=>m(t)},r.createElement(Ht,{$isSelected:o===t,tabIndex:s?0:-1,onClick:()=>p(t),"aria-label":o===t?(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,n.__)("Page %s (current page)","web-stories"),l):(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,n.__)("Page %s","web-stories"),l)},r.createElement("picture",null,r.createElement("source",{srcSet:e.webp,type:"image/webp"}),r.createElement("source",{srcSet:e.png,type:"image/png"}),r.createElement("img",{src:e.png,decoding:"async",alt:jt(l),width:it,height:lt}))))}))),[e,o,i,m,p]);return r.createElement(Ft,{ref:c},r.createElement(Gt,{ref:d,role:"group","aria-label":a,"data-testid":"mini-cards-container"},f),r.createElement(zt,null,e[o]&&r.createElement("picture",null,r.createElement("source",{srcSet:e[o].webp,type:"image/webp"}),r.createElement("source",{srcSet:e[o].png,type:"image/png"}),r.createElement("img",{src:e[o].png,decoding:"async",alt:(0,X.default)(/* translators: %s: active preview page number */ /* translators: %s: active preview page number */
(0,n.__)("Active Page Preview - Page %s","web-stories"),o+1),width:it,height:lt}))))};var qt=a(41708);const Wt=Rt().oneOf([...Object.values(ce),...Object.values(Ne)]),$t=Rt().shape({id:Rt().number.isRequired,status:Wt,title:Rt().string.isRequired,modified:Rt().oneOfType([Rt().object,Rt().string]),author:Rt().object,capabilities:Rt().shape({hasDeleteAction:Rt().bool,hasEditAction:Rt().bool})}),Kt=Rt().shape({id:Rt().number.isRequired,status:Wt,title:Rt().string.isRequired,pages:Rt().array,modified:Rt().object,colors:Rt().arrayOf(Rt().shape({label:Rt().string.isRequired,color:Rt().string.isRequired})),description:Rt().string,tags:Rt().arrayOf(Rt().string),createdBy:Rt().string,postersByPage:Rt().arrayOf(Rt().shape({webp:Rt().string,png:Rt().string,type:Rt().string}))}),Xt=(Rt().arrayOf($t),Rt().arrayOf(Kt).isRequired,Rt().shape({duplicateStory:Rt().func,trashStory:Rt().func,updateStory:Rt().func}),Rt().shape({createStoryFromTemplate:Rt().func,handleDetailsToggle:Rt().func,switchToTemplateByOffset:Rt().func}),Rt().shape({all:Rt().number,draft:Rt().number,publish:Rt().number}),Rt().shape({width:Rt().number,height:Rt().number})),Yt=(Rt().shape({handleMenuToggle:Rt().func.isRequired,contextMenuId:Rt().number.isRequired,menuItems:Rt().arrayOf(Rt().shape({label:Rt().string,value:Rt().oneOfType([Rt().string,Rt().bool]),url:Rt().string,isEnabled:Rt().func,action:Rt().func}))}),Rt().shape({handleOnRenameStory:Rt().func,id:Rt().number,handleCancelRename:Rt().func}),m.default.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],We,$e,(({columnWidth:e})=>`\n    repeat(auto-fill, ${e}px)`),(({columnHeight:e})=>`minmax(${e}px, auto)`),(({theme:e})=>(0,m.css)(["&:focus-visible{",";}"],qt.focusCSS(e.colors.border.focus)))));Yt.propTypes={columnHeight:Rt().number,columnWidth:Rt().number};const Jt=(0,g.forwardRef)((function CardGrid({ariaLabel:e,children:t,pageSize:a},o){return r.createElement(Yt,{ref:o,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":e,columnWidth:a.width,columnHeight:a.height},t)}));var Zt=a(46710),Qt=a(67745),ea=a(18275),ta=a(8921),aa=a(16330);function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},oa.apply(this,arguments)}const ra=(0,m.default)(ea.Link).withConfig({displayName:"link__StyledLink",componentId:"sc-7h28r8-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],aa.menuItemStyles,(({theme:e})=>e.colors.fg.primary),(({theme:e})=>e.colors.interactiveBg.secondaryHover),(({theme:e})=>e.colors.interactiveBg.secondaryPress));const na=function Link({id:e,onBlur:t,onClick:a,onFocus:o,openNewTab:n,...l}){const{focusedId:i,onDismiss:s,onMenuItemBlur:c,onMenuItemFocus:d}=(0,ta.default)((({state:e,actions:t})=>({focusedId:e.focusedId,onDismiss:t.onDismiss,onMenuItemBlur:t.onMenuItemBlur,onMenuItemFocus:t.onMenuItemFocus}))),u=(0,g.useMemo)(Qt.default,[]),p=e||u,m=n?{target:"_blank",rel:"noreferrer"}:{};return r.createElement(ra,oa({id:p,tabIndex:i===p?0:-1,role:"menuitem",onBlur:e=>{c(),t?.(e)},onClick:e=>{a?.(e),s(e.nativeEvent)},onFocus:e=>{d(p),o?.(e)}},m,l))};var la=a(48652),ia=a(22728);const sa=m.default.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(({menuOpen:e,isVisible:t})=>e||t?1:0),(({theme:e,$isInverted:t})=>t?e.colors.inverted.fg.primary:e.colors.interactiveFg.brandNormal),(({theme:e})=>e.borders.radius.small),(({theme:e,$isInverted:t})=>qt.focusableOutlineCSS(!1,!!t&&e.colors.standard.black)));sa.propTypes={menuOpen:Rt().bool};const ca=m.default.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(({verticalAlign:e="flex-start"})=>e),(({$menuStyleOverrides:e})=>e));function StoryMenu({contextMenuId:e,onMoreButtonSelected:t,storyId:a,verticalAlign:o,menuItems:l,itemActive:i,tabIndex:s,menuStyleOverrides:c,menuLabel:d,isInverted:u}){const p=e===a,m=(0,g.useCallback)((e=>t(e,-1)),[t]);return r.createElement(ca,{verticalAlign:o,"data-testid":`story-context-menu-${a}`,$menuStyleOverrides:c},r.createElement(sa,{"data-testid":`story-context-button-${a}`,tabIndex:s,menuOpen:p,isVisible:i,"aria-label":d||(0,n.__)("More Options","web-stories"),onClick:e=>t(e,p?-1:a),className:"context-menu-button",$isInverted:u},r.createElement(K,null)),r.createElement(Zt.default,{animate:!0,isOpen:p,onDismiss:m},l.map((({label:e,separator:t,...a})=>{const o=a.href?na:la.default;return r.createElement(g.Fragment,{key:e},"top"===t&&r.createElement(ia.default,null),r.createElement(o,a,e),"bottom"===t&&r.createElement(ia.default,null))}))))}ca.propTypes={verticalAlign:Rt().oneOf(["center","flex-start","flex-end"])};const da=m.default.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],(({$posterHeight:e})=>`${e}px auto`),sa,sa,sa,sa);da.propTypes={$posterHeight:Rt().number};const ua=da;var pa=a(80448);Rt().shape({label:Rt().string.isRequired,color:Rt().string.isRequired});const ma=m.default.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),fa=m.default.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],(({theme:e,$backgroundColor:t,color:a,size:o,spacing:r})=>`\n    width: ${o}px;\n    height: ${o}px;\n    border-radius: 50%;\n    margin-bottom: 0;\n    background-color: rgb(${t});\n    ${(e=>({"#fff":`border: solid 1px ${e}`,"#ffffff":`border: solid 1px ${e}`,white:`border: solid 1px ${e}`,"#fef9f1":`border: solid 1px ${e}`,"#fff8f2":`border: solid 1px ${e}`,"#f9f9f9":`border: solid 1px ${e}`,"#fcfcfc":`border: solid 1px ${e}`}))(e.colors.border.defaultNormal)[a]||""};\n\n    & + & {\n      margin-left: ${r||10}px;\n    }\n  `));const ba=function ColorList({colors:e,size:t,spacing:a,...o}){return r.createElement(ma,o,e.map((({label:e,color:o})=>{const{r:n,g:l,b:i}=(0,pa.default)(o).color,s=`${n}, ${l}, ${i}`;return r.createElement(fa,{key:o,size:t,spacing:a,color:o,$backgroundColor:s,title:e,ariaLabel:e,"data-testid":"detail-template-color"})})))},ga=m.default.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Ke);var ha=a(39304);function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_a.apply(this,arguments)}const ya=({onClose:e,onSecondary:t,onPrimary:a,primaryText:o,secondaryText:n,primaryRest:l,secondaryRest:s,actions:c,children:d,...u})=>{const p=(0,g.useMemo)((()=>o&&r.createElement(Bt.Button,_a({type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,onClick:()=>a?.()},l),o)),[o,l,a]),f=(0,g.useMemo)((()=>n&&r.createElement(Bt.Button,_a({type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,onClick:()=>t?.()||e()},s),n)),[n,s,t,e]);return r.createElement(m.ThemeProvider,{theme:i.theme},r.createElement(ha.default,_a({onClose:e},u,{actions:c||r.createElement(r.Fragment,null,f,p)}),d))};var Ea=a(31338),Sa=a(6992);const wa=(0,m.default)(Bt.Button).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],(({theme:e})=>qt.focusCSS(e.colors.border.focus))),va=m.default.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(Ea.visuallyHidden),Ta=m.default.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],(({isDragging:e,theme:t})=>e?t.colors.border.focus:t.colors.border.defaultNormal)),Ca=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],(({theme:e})=>e.colors.fg.tertiary)),Ia=m.default.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],(({theme:e})=>e.colors.standard.white),(({isLoading:e})=>e?.6:0),(({isLoading:e})=>e?"100":"0"));function ka(e){e.preventDefault(),e.stopPropagation()}const La=({id:e,label:t,onSubmit:a,isLoading:o,isMultiple:l,ariaLabel:i,instructionalText:s=(0,n.__)("You can also drag your file here","web-stories"),acceptableFormats:c=Ge})=>{const d=(0,g.useRef)(null),u=(0,g.useRef)(null),[p,m]=(0,g.useState)(!1),f=(0,g.useCallback)((e=>{a(Object.values(e))}),[a]),b=(0,g.useCallback)((e=>{ka(e),f(e.target.files),u.current.value=null}),[f]),h=(0,g.useCallback)((e=>{ka(e);const t=e.dataTransfer.files;t&&f(t),m(!1)}),[f]),_=(0,g.useCallback)((e=>{ka(e),m((e=>!e)),p&&e.dataTransfer.clearData()}),[p]);return(0,g.useEffect)((()=>{if(!u?.current)return()=>{};const e=u.current;return e.addEventListener("change",b),()=>{e.removeEventListener("change",b)}}),[b]),r.createElement(Ta,{ref:d,isDragging:p,onDrop:h,onDragEnter:_,onDragLeave:_,onDragOver:ka,"data-testid":"file-upload-drop-area"},r.createElement(Ia,{isLoading:o},r.createElement("p",null,(0,n.__)("Loading…","web-stories"))),r.createElement(Ca,null,s),r.createElement(wa,{forwardedAs:"label",htmlFor:e,"aria-label":i,type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small},t,r.createElement(va,{ref:u,type:"file",id:e,"data-testid":"upload-file-input",accept:c.join(","),multiple:l,disabled:o,"aria-live":"polite","aria-busy":o})))};var Aa=a(99270);const xa=(0,m.default)(Aa.default).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],(({$isInverted:e,theme:t})=>e&&(0,m.css)(["input{color:",";}"],t.colors.inverted.fg.primary))),Oa=({noAutoFocus:e,error:t,id:a,isInverted:o,label:n,onEditCancel:l,onEditComplete:i,placeholder:s,value:c})=>{const d=(0,g.useRef)(null),[u,p]=(0,g.useState)(c);(0,g.useEffect)((()=>{p(c)}),[c]),(0,g.useFocusOut)(d,(()=>{l()}),[l]),(0,g.useEffect)((()=>{!e&&d.current&&d.current.querySelector("input")?.focus()}),[e]);const m=(0,g.useCallback)((({target:e})=>{p(e.value)}),[p]),f=(0,g.useCallback)((({nativeEvent:e})=>{13===e.keyCode?i(u):27===e.keyCode&&l()}),[u,i,l]);return r.createElement("div",{ref:d},r.createElement(xa,{"aria-label":n,id:`${a}`,"data-testid":"inline-input-form",value:u,onKeyDown:f,onChange:m,placeholder:s,hasError:Boolean(t),hint:t,$isInverted:o}))},Da=(0,g.createContext)(null),Na=({children:e})=>{const t=(0,g.useRef)(),a=(0,g.useRef)(null);(0,g.useEffect)((()=>{t.current=document?.getElementById("web-stories-dashboard")?.querySelector(["button","a"])}),[]);const o=(0,g.useCallback)((()=>{document.documentElement?.scrollTo?.({top:0,behavior:"smooth"}),t.current?.focus()}),[]),n=(0,g.useMemo)((()=>({state:{scrollFrameRef:a},actions:{scrollToTop:o}})),[o]);return r.createElement(Da.Provider,{value:n},e)},Pa=()=>{const e=(0,g.useContext)(Da);if(!e)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return e},Ra=m.default.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),Ba=({children:e})=>{const{state:{scrollFrameRef:t}}=Pa();return r.createElement(Ra,{ref:t},e)},Ma=m.default.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Xe),Ua={Provider:Na,Scrollable:Ba,Fixed:({children:e})=>r.createElement(Ma,null,e)};var Fa=a(85703);const za=m.default.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],je,je),Ga=m.default.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],(({fullWidth:e})=>e?"100%":"calc(100% - 288px)"),(({fullWidth:e})=>e?"0":"288px"),je),Ha=m.default.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],(({topOffset:e})=>`${e}px`),He,(({theme:e})=>e.colors.bg.primary),Xe,Fa.BEZIER.outCubic,je,(({isOpen:e})=>e?1:0),(({isOpen:e})=>e?"visible":"hidden"),(({isOpen:e})=>e?"none":"-100%")),ja=m.default.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var Va,qa,Wa,$a;function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ka.apply(this,arguments)}const SvgLogoWithTypeCircleColor=({title:e,titleId:t,...a})=>r.createElement("svg",Ka({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 212 64","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,Va||(Va=r.createElement("circle",{cx:32,cy:32,r:32,fill:"url(#a)",transform:"rotate(-180 32 32)"})),qa||(qa=r.createElement("g",{fill:"#fff",filter:"url(#b)"},r.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4z"}))),Wa||(Wa=r.createElement("path",{fill:"#000",d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26zm24.747.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.82-1.561-.82-3.559 0-1.867.769-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.53 5.53 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.434.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.161 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m15.423 11.904q-1.561 0-2.739-.716-1.178-.717-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103q.537-.921 1.715-1.638t2.739-.717q1.793 0 3.2.896 1.408.897 2.227 2.458.82 1.561.82 3.584 0 2.022-.82 3.584-.819 1.56-2.227 2.457t-3.2.896m-.23-1.97a4 4 0 0 0 2.099-.59q.999-.615 1.587-1.74.615-1.126.615-2.637 0-1.536-.615-2.637-.588-1.126-1.587-1.715a3.86 3.86 0 0 0-2.099-.615q-1.126 0-2.125.615-.973.588-1.587 1.715-.615 1.101-.615 2.637c0 1.536.205 1.911.615 2.662q.614 1.101 1.587 1.715a4.1 4.1 0 0 0 2.125.59m19.73 1.97a6.6 6.6 0 0 1-2.637-.563 6.64 6.64 0 0 1-2.304-1.664q-.998-1.101-1.459-2.739l2.074-.845q.435 1.587 1.587 2.663t2.79 1.075q1.024 0 1.869-.359a3.3 3.3 0 0 0 1.382-1.1q.538-.718.538-1.741 0-1.358-1.024-2.15-.998-.82-2.97-1.511l-1.152-.41a14 14 0 0 1-2.048-.972 5.2 5.2 0 0 1-1.689-1.536q-.666-.974-.666-2.432 0-1.332.717-2.432.717-1.101 1.971-1.767t2.893-.665q1.715 0 2.867.64 1.178.614 1.843 1.484.691.845.922 1.562l-2.022.87q-.154-.537-.589-1.1-.435-.59-1.178-.973-.716-.41-1.817-.41-.897 0-1.69.359-.768.358-1.254.998-.462.614-.461 1.434 0 1.151.921 1.817.923.666 2.484 1.203l1.203.41q.82.282 1.664.691.87.41 1.613 1.05t1.203 1.587q.46.922.461 2.227 0 1.409-.564 2.432a4.75 4.75 0 0 1-1.433 1.639 6 6 0 0 1-1.971.921q-1.05.307-2.074.307m13.187-.204q-1.638 0-2.636-.948-.999-.972-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117q0 1.025.41 1.587.435.563 1.408.563.435 0 .793-.128.359-.127.64-.307v2.125q-.332.153-.742.23-.384.103-1.05.103m9.799.204q-1.971 0-3.482-.921a6.66 6.66 0 0 1-2.381-2.483q-.844-1.587-.844-3.533t.844-3.507a6.6 6.6 0 0 1 2.381-2.51q1.51-.92 3.482-.92c1.972 0 2.474.315 3.481.946a6.4 6.4 0 0 1 2.356 2.51q.87 1.56.87 3.48 0 1.946-.87 3.534a6.47 6.47 0 0 1-2.356 2.483q-1.51.921-3.481.921m0-1.97a4.34 4.34 0 0 0 2.201-.59 4.46 4.46 0 0 0 1.69-1.69q.64-1.125.64-2.687t-.64-2.663q-.64-1.125-1.69-1.715a4.34 4.34 0 0 0-2.201-.589q-1.178 0-2.227.59-1.05.588-1.69 1.714-.64 1.101-.64 2.663 0 1.56.64 2.688.64 1.1 1.69 1.69a4.5 4.5 0 0 0 2.227.588m8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4 4 0 0 1 1.562-.333q.588 0 .921.077.333.051.615.179v2.355q-.82-.41-1.844-.41-.946 0-1.74.538a4 4 0 0 0-1.28 1.434 4.24 4.24 0 0 0-.461 1.97V40.4zm10.88-15.462q-.64 0-1.101-.46a1.5 1.5 0 0 1-.461-1.101q0-.665.461-1.101.46-.46 1.101-.46.665 0 1.101.46.46.435.46 1.1 0 .641-.46 1.102a1.45 1.45 0 0 1-1.101.46M182.046 40.4V27.344h2.176V40.4zm11.256.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.819-1.561-.819-3.559 0-1.867.768-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.52 5.52 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.433.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.16 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m13.475 11.904q-2.202.001-3.584-1.024-1.383-1.05-1.92-2.483l1.945-.87q.513 1.177 1.459 1.817a3.75 3.75 0 0 0 2.1.64q1.151 0 2.048-.486.921-.486.921-1.434 0-.87-.768-1.356-.742-.487-2.099-.82l-1.587-.41q-.922-.255-1.741-.716c-.819-.461-.99-.7-1.331-1.178q-.487-.741-.487-1.792 0-1.178.692-2.022.69-.845 1.817-1.28a6.3 6.3 0 0 1 2.407-.46q1.664 0 3.02.742 1.383.717 1.946 2.073l-1.894.87q-.487-.972-1.306-1.356c-.819-.384-1.143-.384-1.792-.384q-1.025 0-1.869.486-.819.46-.819 1.28t.64 1.229q.665.41 1.613.666l1.894.486q3.866.999 3.866 3.789 0 1.228-.691 2.125-.692.896-1.869 1.382t-2.611.486"})),$a||($a=r.createElement("defs",null,r.createElement("linearGradient",{id:"a",x1:13.255,x2:35.289,y1:6.599,y2:62.791,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#79B3FF"}),r.createElement("stop",{offset:1,stopColor:"#CBACFF"})),r.createElement("filter",{id:"b",width:46.08,height:46.08,x:8.96,y:10.24,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),r.createElement("feOffset",{dy:1.28}),r.createElement("feGaussianBlur",{stdDeviation:1.92}),r.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),r.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))),Xa=(0,r.memo)(SvgLogoWithTypeCircleColor);var Ya=a(72165),Ja=a(55648);const Za=(0,g.createContext)({state:{activeRoute:"",currentPath:"",queryParams:{},availableRoutes:[],defaultRoute:""},actions:{push:()=>{},replace:()=>{},setAvailableRoutes:()=>[]}});const Qa=function RouterProvider({children:e,...t}){const a=(0,g.useRef)(t.history||(0,Ja.createHashHistory)()),[o,n]=(0,g.useState)(a.current.location.pathname),[l,i]=(0,g.useState)([]),s=Ye.DASHBOARD,c=(0,g.useMemo)((()=>(({availableRoutes:e,currentPath:t,defaultRoute:a})=>{const o=e.filter((e=>t.startsWith(e)));return o.length<=1?a:t})({availableRoutes:l,currentPath:o,defaultRoute:s})),[l,o,s]),d=e=>{const t=new URLSearchParams(e);return Object.fromEntries(t)},[u,p]=(0,g.useState)(d(a.current.location.search));(0,g.useEffect)((()=>a.current.listen((({location:e})=>{p(d(e.search)),n(e.pathname)}))),[]);const m=(0,g.useMemo)((()=>({state:{activeRoute:c,currentPath:o,queryParams:u,availableRoutes:l,defaultRoute:s},actions:{push:e=>a.current.push(e),replace:e=>a.current.replace(e),setAvailableRoutes:i}})),[c,l,o,s,u]);return r.createElement(Za.Provider,{value:m},e)};const eo=function(e=g.identity){return(0,g.useContextSelector)(Za,e)};function to(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")?e:e.startsWith("/")?`#${e}`:""===e?"#/":`${window.location.hash}/${e}`}const ao=function Route({component:e,path:t,exact:a=!1,isDefault:o=!1}){const{availableRoutes:r,currentPath:n,defaultRoute:l}=eo((({state:e})=>e)),i=function({currentPath:e,path:t,availableRoutes:a,defaultRoute:o,isDefault:r=!1,exact:n=!1}){const l=new RegExp(`^${t}`).exec(e);if(!l&&!r)return null;const i=l?.[0];if(r){const t=a.filter((t=>e.startsWith(t))).length<=1;if(t)return o}return n&&e!==i?null:i}({currentPath:n,availableRoutes:r,defaultRoute:l,path:t,exact:a,isDefault:o});return i?e:null},oo=(0,g.createContext)({actions:{},state:{}});function ro(e=g.identity){return(0,g.useContextSelector)(oo,e)}function NavProvider({children:e}){const[t,a]=(0,g.useState)(!1),o=(0,g.useCallback)((()=>{a(!t)}),[t]),n=(0,g.useMemo)((()=>({actions:{toggleSideBar:o},state:{sideBarVisible:t}})),[t,o]);return r.createElement(oo.Provider,{value:n},e)}var no=a(49527);const lo=m.default.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),io=(0,m.default)(no.Headline).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),so=m.default.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),co=m.default.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),uo=(0,m.css)(["span{color:",";}svg path{stroke:",";}"],(({theme:e})=>e.colors.interactiveFg.brandPress),(({theme:e})=>e.colors.interactiveFg.brandPress)),po=(0,m.default)(ea.Link).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})((({active:e,theme:t,isIconLink:a})=>(0,m.css)([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],a&&(0,m.css)(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),t.colors.fg.secondary,e&&uo,uo))),mo=(0,m.default)(Sa.Text.Span).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),fo=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})((({theme:e})=>(0,m.css)(["color:",";"],e.colors.fg.secondary)));function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},bo.apply(this,arguments)}const go=m.default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);const ho=function LeftRail(){const e=eo((({state:e})=>e.activeRoute)),{newStoryURL:t,version:a,leftRailSecondaryNavigation:o,canViewDefaultTemplates:l,styleConstants:{topOffset:i}}=y(),s=(0,g.useRef)(null),c=(0,g.useRef)(null),{state:{sideBarVisible:d},actions:{toggleSideBar:u}}=ro(),p=(0,g.useCallback)((({target:e})=>{e!==s.current&&e!==c.current&&u()}),[u,s,c]),m=(0,g.useCallback)((()=>{d&&u()}),[u,d]);(0,g.useFocusOut)(s,m,[d]),(0,g.useLayoutEffect)((()=>{d&&s.current&&s.current.focus()}),[d]);const f=(0,g.useCallback)((()=>{(0,E.trackEvent)("create_new_story")}),[]),b=(0,g.useCallback)(((e,t)=>{(0,E.trackClick)(e,t.trackingEvent)}),[]);return r.createElement(Ha,{onClickCapture:p,ref:s,isOpen:d,topOffset:i,role:"navigation","aria-label":(0,n.__)("Main dashboard navigation","web-stories")},r.createElement("div",{ref:c},r.createElement(io,{forwardedAs:"h2"},r.createElement(Xa,{title:(0,n.__)("Web Stories Dashboard","web-stories")})),r.createElement(lo,null,r.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Quaternary,size:Mt.ButtonSize.Small,href:t,onClick:f},(0,n.__)("Create New Story","web-stories"))),r.createElement(lo,null,r.createElement(so,null,Ze.map((({Icon:t,...a})=>a.value===Ye.TEMPLATES_GALLERY&&!l?null:r.createElement(co,{key:a.value},r.createElement(po,bo({active:e===a.value,href:to(a.value),size:Ya.TextSize.Small,isBold:!0,isIconLink:Boolean(t),"aria-label":e===a.value?(0,X.default)(/* translators: %s: the current page, for example "Dashboard". */ /* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),a.label):a.label},a.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>b(e,a)}),r.createElement(go,null,t&&r.createElement(t,{width:"22px"})),r.createElement(mo,{size:Ya.TextSize.Small,isBold:!0},a.label)))))))),r.createElement(lo,null,o&&r.createElement(so,null,o.map((t=>r.createElement(co,{key:t.value},r.createElement(po,bo({active:e===t.value,href:to(t.value),size:Ya.TextSize.Small,"aria-label":e===t.value?(0,X.default)(/* translators: %s: the current page, for example "Dashboard". */ /* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),t.label):t.label},t.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>b(e,t)}),r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small,isBold:!0},t.label)))))),r.createElement(fo,{size:Ya.TextSize.XSmall},(0,X.default)(/* translators: 1: Current Year, 2: App Version */ /* translators: 1: Current Year, 2: App Version */
(0,n.__)("© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),a))))},_o=(0,m.default)(q).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],(({theme:e})=>e.colors.interactiveFg.brandNormal)),yo=m.default.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],(({theme:e})=>e.borders.radius.small),qt.focusableOutlineCSS,(({showOnlyOnSmallViewport:e})=>e&&(0,m.css)(["display:none;@media screen and (max-width:","px){display:inline-block;}"],je)));const Eo=function NavMenuButton({showOnlyOnSmallViewport:e}){const{actions:t}=ro();return r.createElement(yo,{onClick:t.toggleSideBar,showOnlyOnSmallViewport:e,"aria-label":(0,n.__)("Toggle main navigation","web-stories")},r.createElement(_o,{"aria-hidden":!0}))};var So=a(99832);const wo=(0,m.default)(Bt.Button).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})((({$isVisible:e,theme:t})=>(0,m.css)(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],t.colors.opacity.white64,e?"auto":"none",Number(e)))),vo=(0,m.default)(So.default).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),To=()=>{const[e,t]=(0,g.useState)(!1),{actions:{scrollToTop:a}}=Pa(),o=(0,g.useDebouncedCallback)((()=>t(window.scrollY>0)),100);return(0,g.useEffect)((()=>(window.addEventListener("scroll",o,{passive:!0}),function(){window.removeEventListener("scroll",o,{passive:!0})})),[o]),r.createElement(wo,{disabled:!e,"aria-label":(0,n.__)("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:e,onClick:a,variant:Mt.ButtonVariant.Circle},r.createElement(vo,{"aria-hidden":!0}))};var Co=a(38668);const Io=m.default.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],Co.expandTextPreset((({paragraph:e},{Small:t})=>e[t]))),ko=m.default.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Lo=m.default.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],(({theme:e})=>e.colors.bg.secondary)),Ao=(0,m.default)(Lo).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],(({theme:e})=>e.colors.bg.secondary),(({topOffset:e})=>`${e}px`),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small)),xo=m.default.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Oo=(0,m.default)(xo).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Do=(0,m.default)(xo).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),No=(0,m.default)(xo).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],(({theme:e})=>e.breakpoint.tabletMax)),Po=(0,m.default)(xo).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Ro=(0,m.default)(xo).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]),Bo=((0,m.default)(xo).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]),m.default.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],(({theme:e})=>e.breakpoint.tabletMax))),Mo=m.default.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,(({theme:e})=>e.colors.standard.black)),Uo=(0,m.default)(Mo).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],(({theme:e})=>e.colors.fg.secondary),(({theme:e})=>e.breakpoint.tabletMax)),Fo=((0,m.default)(Mo).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]),(0,m.default)(Mo).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]),(0,m.default)(Mo).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],qe[Ve.THUMBNAIL]));var zo,Go=a(28395),Ho=a(97783);function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},jo.apply(this,arguments)}function Tooltip({placement:e=Go.Placement.Bottom,...t}){const{isRTL:a}=y(),o=a?Go.RTL_PLACEMENT[e]:e;return r.createElement(Ho.default,jo({placement:o},t))}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Vo.apply(this,arguments)}const SvgTable=({title:e,titleId:t,...a})=>r.createElement("svg",Vo({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,zo||(zo=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 9A1.5 1.5 0 0 0 8 10.5v11A1.5 1.5 0 0 0 9.5 23h13a1.5 1.5 0 0 0 1.5-1.5v-11A1.5 1.5 0 0 0 22.5 9h-13m3 1h-3a.5.5 0 0 0-.5.5V13h3.5zM9 14v4h3.5v-4zm0 5v2.5a.5.5 0 0 0 .5.5h3v-3zm4.5 3h9a.5.5 0 0 0 .5-.5V19h-9.5zm9.5-4v-4h-9.5v4zm0-5v-2.5a.5.5 0 0 0-.5-.5h-9v3z",clipRule:"evenodd"}))),qo=(0,r.memo)(SvgTable);var Wo=a(98477);const $o=m.default.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Ko=m.default.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],(({theme:e})=>e.borders.radius.small),qt.focusableOutlineCSS,(({theme:e})=>e.colors.interactiveFg.hover),(({theme:e})=>e.colors.interactiveFg.active));function ViewStyleBar({onPress:e,layoutStyle:t}){return r.createElement($o,null,r.createElement(Tooltip,{title:et[t],placement:Go.Placement.BottomEnd,hasTail:!0},r.createElement(Ko,{"aria-label":et[t],onClick:e},t===Qe.GRID&&r.createElement(qo,{height:"32px",width:"32px","data-testid":"list-icon"}),t===Qe.LIST&&r.createElement(Wo.default,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Xo=(0,m.createGlobalStyle)(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),Yo=e=>""===e?(0,n.__)("Untitled","web-stories"):e,Jo=(0,m.createGlobalStyle)(["*:focus{outline:none !important;}"]),Zo=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],Qo=()=>{const[e,t]=(0,g.useState)(!1),a=a=>{!e&&Zo.includes(a.key)&&t(!0)},o=()=>{e&&t(!1)};return(0,g.useEffect)((()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",o),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",o)}))),(0,g.useEffect)((()=>{document.body.classList.toggle("useskeyboard",e)}),[e]),e?null:r.createElement(Jo,null)};function er({isActiveSearch:e,currentFilter:t,totalResults:a,view:o}){return(0,g.useMemo)((()=>{const r=a??0,l=ot[o]?.[t]||"",i="function"==typeof l?l(r):l;return e?(0,X.default)(/* translators: %s: number of results. */ /* translators: %s: number of results. */
(0,n._n)("%s result","%s results",r,"web-stories"),(0,X.default)("<strong>%s</strong>",r)):i}),[e,a,o,t])}const tr=e=>Math.round(e/.6666666666666666),ar=e=>e<=je?Ve.TABLET:Ve.DESKTOP,or=(e,{bp:t,respectSetWidth:a,availableContainerSpace:o})=>{if(a){return{width:e,height:tr(e)}}t===Ve.DESKTOP&&(o-=He);const r=Math.floor(o/e),n=e+(o-(e*r+We*(r-1)+2*Ke))/r;return{width:n,height:tr(n)}},rr=e=>window.innerWidth<je?je:e;function nr(e={}){const{thumbnailMode:t=!1,isGrid:a}=e,{containerId:o}=y(),r=(0,g.useRef)(document.getElementById(o)),[n,l]=(0,g.useState)(window.innerWidth),[i,s]=(0,g.useState)(ar(n)),[c,d]=(0,g.useState)(rr(r.current?.offsetWidth||window.innerWidth)),u=(0,g.useDebouncedCallback)((e=>{l(e)}),500);return(0,g.useEffect)((()=>{s(ar(n))}),[n]),(0,g.useResizeEffect)(r,(({width:e})=>{d(rr(e)),window.innerWidth!==n&&u(window.innerWidth)}),[d,n,u]),(0,g.useMemo)((()=>({pageSize:or(qe[t?Ve.THUMBNAIL:i],{respectSetWidth:!a||t,availableContainerSpace:c,bp:i})})),[i,a,t,c])}const lr=(e,{MIN:t,MAX:a})=>Math.min(Math.max(e,t),a);Rt().shape({style:Rt().oneOf(Object.values(Qe)),toggleStyle:Rt().func,pageSize:Xt}),Rt().shape({filterId:Rt().number,toggleFilterId:Rt().func,queriedAuthors:Rt().arrayOf(Rt().shape({id:Rt().number,name:Rt().string})).isRequired,setQueriedAuthors:Rt().func}),Rt().shape({value:Rt().oneOfType([Rt().number,Rt().string]),set:Rt().func}),Rt().shape({value:Rt().oneOf(Object.values(re)),set:Rt().func,direction:Rt().oneOf(Object.values(oe)),setDirection:Rt().func}),Rt().shape({value:Rt().number,set:Rt().func,requestNextPage:Rt().func}),Rt().shape({keyword:Rt().string,setKeyword:Rt().func}),Rt().shape({current:Rt().bool});Rt().shape({style:Rt().oneOf(Object.values(Qe)),pageSize:Xt}),Rt().shape({value:Rt().oneOfType([Rt().number,Rt().string]),set:Rt().func}),Rt().shape({value:Rt().number,set:Rt().func,requestNextPage:Rt().func}),Rt().shape({keyword:Rt().string,setKeyword:Rt().func}),Rt().shape({value:Rt().oneOf(Object.values(Re)),set:Rt().func});const ir=()=>{},sr=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(f.default,"name",{value:"stylisRTLPlugin"});const cr=function Dashboard({config:e,children:t}){const a=(0,l.default)(sr(),e),o={...i.theme,colors:s.light},{isRTL:n,flags:g,styleConstants:{leftOffset:h,topOffset:y}={}}=a;return r.createElement(b.FlagsProvider,{features:g},r.createElement(m.StyleSheetManager,{stylisPlugins:n?[f.default]:[]},r.createElement(m.ThemeProvider,{theme:o},r.createElement(c.Styles,null),r.createElement(d.ModalGlobalStyle,null),r.createElement(_,{config:a},r.createElement(ApiProvider,null,r.createElement(NavProvider,null,r.createElement(Qa,null,r.createElement(u.default,null,r.createElement(p.default,{value:{isRTL:n,leftOffset:h,topOffset:y}},r.createElement(Xo,null),r.createElement(Qo,null),t)))))))))};var dr=a(13013),ur=a(80125);a(70928);const pr="UPDATE_FILTER",mr="UPDATE_SORT",fr="REGISTER_FILTERS",br=(e,{type:t,payload:a={}})=>{switch(t){case pr:{const t=["search","status"],{key:o,value:r}=a,n=e.filters.find((e=>e.key===o));if(!n)return e;if(r.filterId&&n?.filterId===r.filterId){if(t.includes(o))return e;r.filterId=null}const l=e.filters.indexOf(n),i=[...e.filters];i[l]={...n,...r};const s={};for(const e of i)e.filterId&&(s[e.key]=e.filterId);return{...e,filters:i,filtersObject:s}}case mr:{const{type:t,values:o}=a,r={},n="story"===t?ne:Be;for(const t in o)t in n&&Object.values(n[t]).includes(o[t])&&e.sortObject[t]!==o[t]&&(r[t]=o[t]);return 0===Object.entries(r).length?e:{...e,sortObject:{...e.sortObject,...r}}}case fr:{const{value:t}=a,o=e.filters.map((e=>e.key)),r=t.filter((e=>!o.includes(e.key)));return r.length?{...e,filters:[...r,...e.filters]}:e}default:return e}};function gr(e=g.identity){return(0,g.useContextSelector)(Dt,e)}const hr={};const _r=function(){const{getTaxonomies:e,getTaxonomyTerms:t}=gr((({actions:{taxonomyApi:{getTaxonomies:e,getTaxonomyTerms:t}}})=>({getTaxonomies:e,getTaxonomyTerms:t}))),a=(0,g.useCallback)((async(e,a)=>{const{restBase:o,restPath:r}=e;return(await t(r,{search:a,per_page:-1})).map((e=>({...e,restBase:o,restPath:r})))}),[t]),o=(0,g.useCallback)((async e=>{const{restBase:t}=e;return hr[t]||(hr[t]=await a(e)),hr[t]}),[a]),r=(0,g.useCallback)((async()=>(await e({hierarchical:!0,show_ui:!0})).map((e=>({key:e.restBase,restPath:e.restPath,placeholder:e.labels.allItems,ariaLabel:e.labels.filterByItem,noMatchesFoundLabel:e.labels.notFound,searchPlaceholder:e.labels.searchItems,query:t=>a(e,t),getPrimaryOptions:()=>o(e)})))),[a,o,e]);return r};let yr=null;const Er=function(){const{getAuthors:e}=gr((({actions:{usersApi:{getAuthors:e}}})=>({getAuthors:e}))),t=(0,g.useCallback)((async t=>(await e(t)).map((({id:e,name:t})=>({id:e,name:t})))),[e]),a=(0,g.useCallback)((async()=>(yr||(yr=await t()),yr)),[t]);return(0,g.useCallback)((()=>({key:"author",ariaLabel:(0,n.__)("Filter stories by author","web-stories"),placeholder:(0,n.__)("All Authors","web-stories"),searchPlaceholder:(0,n.__)("Search Authors","web-stories"),noMatchesFoundLabel:(0,n.__)("No authors found","web-stories"),query:t,getPrimaryOptions:a})),[t,a])},Sr=(0,g.createContext)({state:{},actions:{}});function StoryFiltersProvider({children:e}){const t=_r(),a=Er(),[o,n]=(0,g.useReducer)(br,{filters:[],filtersObject:{},sortObject:{}}),l=(0,g.useCallback)((e=>{n({type:mr,payload:{type:"story",values:e}})}),[]),i=(0,g.useCallback)(((e,t)=>{n({type:pr,payload:{key:e,value:t}})}),[]),s=(0,g.useCallback)((e=>{n({type:fr,payload:{value:e}})}),[]),c=(0,g.useCallback)((async()=>{const e=[...await t(),a()].filter((e=>Boolean(e)));e.length&&s(e)}),[s,a,t]),d=(0,g.useMemo)((()=>({state:o,actions:{updateFilter:i,updateSort:l,registerFilters:s}})),[o,i,l,s]);return(0,g.useEffect)((()=>{c()}),[c]),r.createElement(Sr.Provider,{value:d},e)}function wr(e=g.identity){return(0,g.useContextSelector)(Sr,e)}var vr=a(76274);const Tr=(0,m.default)(vr.default).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);const Cr=function SortDropDown({pageSortOptions:e,pageSortDefaultOption:t,currentSort:a,handleSortChange:o}){const l=(0,g.useCallback)(((e,t)=>{o({orderby:t})}),[o]);return r.createElement(Tr,{ariaLabel:(0,n.__)("Choose sort option for display","web-stories"),options:e,type:ze.DropDown,selectedValue:a?.orderby||t,onMenuItemClick:l})},Ir=350,kr=m.default.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),Lr=m.default.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),Ar=m.default.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),xr=m.default.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),Or=(0,m.default)(ur.default).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],Ir);function BodyViewOptions({handleLayoutSelect:e,resultsLabel:t,layoutStyle:a,pageSortOptions:o=[],pageSortDefaultOption:l,showGridToggle:i,showSortDropdown:s,filters:c=[],currentSort:d,handleSortChange:u}){const{updateFilter:p}=wr((({actions:{updateFilter:e}})=>({updateFilter:e})));return r.createElement(ga,null,r.createElement(xr,{id:"body-view-options-header"}),r.createElement(kr,null,r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},r.createElement(dr.default,null,t)),r.createElement(Ar,null,c?.length?c.map((e=>r.createElement(Lr,{key:e.key,title:e.placeholder},r.createElement(Or,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,n.__)("Search results","web-stories"),"aria-label":e.ariaLabel,onChange:({id:t})=>{p(e.key,{filterId:t})},getOptionsByQuery:e.query,getPrimaryOptions:e.getPrimaryOptions,selectedId:e.filterId,placeholder:e.placeholder,noMatchesFoundLabel:e.noMatchesFoundLabel,searchPlaceholder:e.searchPlaceholder,offsetOverride:!0,maxWidth:Ir,containerStyleOverrides:(0,m.css)(["flex-direction:column;"])})))):null,s&&r.createElement(Lr,null,r.createElement(Cr,{pageSortOptions:o,pageSortDefaultOption:l,currentSort:d,handleSortChange:u}))),i&&r.createElement(ViewStyleBar,{layoutStyle:a,onPress:e})))}var Dr,Nr,Pr;function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Rr.apply(this,arguments)}const SvgDesertColor=({title:e,titleId:t,...a})=>r.createElement("svg",Rr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,Dr||(Dr=r.createElement("path",{fill:"#F4F2EF",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.795-10.544a10 10 0 0 0 2.524-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675q.654.323 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a10 10 0 0 1-2.818-.186"})),Nr||(Nr=r.createElement("path",{fill:"#FBBC04",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4zM120.857 53.179a2.143 2.143 0 0 1 4.286 0v14.25h1.714V62.07a1.072 1.072 0 0 1 2.143 0V68.5a1.2 1.2 0 0 1-.048.319 1.07 1.07 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714zM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.99 3.99 0 0 1-2.828-1.171A4 4 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572z",clipRule:"evenodd"})),Pr||(Pr=r.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"}))),Br=(0,r.memo)(SvgDesertColor),Mr=m.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),Ur=(0,m.default)(Br).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);const Fr=function EmptyContentMessage({children:e}){return r.createElement(Mr,null,r.createElement(Ur,{"aria-hidden":!0,width:274,height:118}),e)};var zr=a(97831);const Gr=m.default.h1.withConfig({displayName:"display__Display",componentId:"sc-1x3xqpc-0"})([""," ",""],zr.defaultTypographyStyle,(({size:e=Ya.TextSize.Medium,theme:t})=>Co.expandPresetStyles({preset:t.typography.presets.display[e],theme:t})));var Hr=a(46315),jr=a(80852),Vr=a(59470);const qr=m.default.div.withConfig({displayName:"search__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),Wr=(0,m.default)(Sa.Text.Label).withConfig({displayName:"search__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],(({theme:e,disabled:t})=>e.colors.fg[t?"disable":"primary"])),$r=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"search__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],(({theme:e,hasError:t})=>e.colors.fg[t?"negative":"tertiary"]));var Kr=a(1782),Xr=a(38090),Yr=(a(49411),a(62488)),Jr=a(19574);function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Zr.apply(this,arguments)}const Qr=m.default.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);const en=function Search({ariaInputLabel:e=Kr.DEFAULT_ARIA_INPUT_LABEL,ariaClearLabel:t=Kr.DEFAULT_ARIA_CLEAR_LABEL,disabled:a,handleSearchValueChange:o,hasError:l,hint:i,label:s,onMenuItemClick:c,onClear:d,options:u=[],placeholder:p=Kr.DEFAULT_PLACEHOLDER,placement:m=Go.Placement.Bottom,popupFillWidth:f=Kr.DEFAULT_POPUP_FILL_WIDTH,popupZIndex:b,selectedValue:h,searchValue:_,...y}){const E=(0,g.useMemo)((()=>`list-${(0,Qt.default)()}`),[]),S=(0,g.useMemo)((()=>`select-button-${(0,Qt.default)()}`),[]),w=(0,g.useMemo)((()=>`clear-button-${(0,Qt.default)()}`),[]),v=(0,g.useRef)(null),T=(0,g.useRef)(null),{activeOption:C,getActiveOption:I,inputState:k,setInputState:L,isMenuFocused:A,setIsMenuFocused:x,isOpen:O,setIsOpen:D,groups:N}=function({handleSearchValueChange:e,selectedValue:t,searchValue:a,options:o}){const r=(0,Jr.default)("assertive"),[l,i]=(0,g.useState)(!1),s=(0,g.useDebouncedCallback)(i,100),[c,d]=(0,g.useState)(!1),u=(0,g.useDebouncedCallback)(d,300,{leading:!0});(0,g.useEffect)((()=>{l||u(!1)}),[l,u]);const p=(0,g.useMemo)((()=>(0,Yr.getGroups)(o)),[o]),m=(0,g.useCallback)((e=>p.flatMap((e=>e.options)).find((t=>String(t.value).toLowerCase()===String(e).toLowerCase()))),[p]),f=(0,g.useMemo)((()=>{const e=t?String(t.value):a;return e&&0!==p.length?m(e):null}),[t,a,p,m]),[b,h]=(0,g.useState)(a),_=(0,g.useCallback)((t=>{h(t),void 0!==t&&e?.(t)}),[e]);return(0,g.useEffect)((()=>{void 0===b&&void 0!==t?.value&&_(t?.label||"")}),[b,_,t]),(0,g.useEffect)((()=>{if(l&&b?.length){const e=o.length?(0,X.default)(/* translators: %d: number of results. */ /* translators: %d: number of results. */
(0,n._n)("%d result found.","%d results found.",o.length,"web-stories"),String(o.length)):(0,n.__)("No results found.","web-stories");r(e)}}),[b,l,o.length,r]),{activeOption:f,getActiveOption:m,groups:p,inputState:b,setInputState:_,isMenuFocused:c,setIsMenuFocused:u,isOpen:l,setIsOpen:s}}({options:u,selectedValue:h,searchValue:_,handleSearchValueChange:o}),P=(0,g.useMemo)((()=>Boolean(a||!k?.length)),[a,k]),R=(0,g.useCallback)((()=>{D(!0),x(!1)}),[D,x]),B=(0,g.useCallback)((e=>{e.preventDefault(),D(!0)}),[D]),M=(0,g.useCallback)((e=>{w&&e?.currentTarget instanceof HTMLElement&&e.currentTarget.id===w||D(!1)}),[w,D]),U=(0,g.useCallback)(((e,t)=>{D(!1);const a=I(t)||{label:String(t),value:t};L(String(a.label)),c?.(e,a)}),[I,L,D,c]),F=(0,g.useCallback)((()=>v?.current?.focus()),[]),z=(0,g.useCallback)((({target:e})=>{L(e.value),D(e.value.length>0)}),[L,D]),G=(0,g.useCallback)((()=>{L(""),d?.(),F?.()}),[F,L,d]),H=(0,g.useCallback)((()=>{D(!1),x(!1)}),[D,x]),j=(0,g.useCallback)((()=>x(!0)),[x]),V=(0,g.useCallback)((()=>{(P||0===k?.trim().length)&&(x(!1),D(!1))}),[k,x,P,D]),q=(0,g.useCallback)((e=>{const{key:t}=e;"Escape"===t?P||x(!1):"Tab"===t?V():"ArrowDown"===t?j():"Enter"===t&&k&&k.trim().length>0&&U(e.nativeEvent,String(k))}),[P,x,V,j,k,U]);return(0,g.useFocusOut)(T,V,[V]),r.createElement(qr,null,s&&r.createElement(Wr,{size:Ya.TextSize.Small,disabled:a,isBold:!0},s),r.createElement(Qr,{ref:T},r.createElement(Xr.default,Zr({"aria-label":e,hasError:l,id:S,onChange:z,onClick:B,onFocus:R,onKeyDown:q,placeholder:p,ariaClearLabel:t,clearId:w,disabled:a,handleClearInput:G,handleTabClear:H,inputValue:k||"",isOpen:O,listId:E,ref:v},y))),!P&&r.createElement(Vr.default,{anchor:v,isOpen:O,placement:m,fillWidth:f,zIndex:b,ignoreMaxOffsetY:!0},r.createElement(jr.default,Zr({activeValue:C?.value,handleReturnToParent:F,isMenuFocused:A,listId:E,menuAriaLabel:(0,X.default)(/* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */ /* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */
(0,n.__)("%s Option List Selector","web-stories"),e),onDismissMenu:M,handleMenuItemSelect:U,groups:N,parentId:S},y))),i&&r.createElement($r,{hasError:l,size:Ya.TextSize.Small},i))},tn=(0,m.default)(ga).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],(({theme:e})=>e.colors.divider.secondary)),an=(0,m.default)(Gr).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),on=m.default.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),rn=m.default.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),nn=({children:e,heading:t,searchPlaceholder:a,searchOptions:o=[],showSearch:l,handleSearchChange:i,searchValue:s,onClear:c=Hr.noop})=>r.createElement(tn,null,r.createElement(an,{as:"h2",size:Ya.TextSize.Small},r.createElement(Eo,{showOnlyOnSmallViewport:!0}),t),e&&r.createElement(on,null,e),l&&r.createElement(rn,null,r.createElement(en,{placeholder:a,searchValue:s,options:o,handleSearchValueChange:i,onClear:c,emptyText:(0,n.__)("No options available","web-stories")})));var ln,sn=a(71028),cn=a(26707),dn=a(61736),un=a(92414);function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},pn.apply(this,arguments)}const SvgArrowDown=({title:e,titleId:t,...a})=>r.createElement("svg",pn({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,ln||(ln=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 21.282 4.645-4.704a.5.5 0 0 1 .711.702l-5.5 5.571a.5.5 0 0 1-.712 0l-5.5-5.57a.5.5 0 0 1 .712-.703l4.644 4.704V9.5a.5.5 0 0 1 1 0z",clipRule:"evenodd"}))),mn=(0,r.memo)(SvgArrowDown),fn=({menuItems:e,story:t,isLocked:a})=>{const o=e.default?()=>e.default(t):ir;return e.filter((e=>void 0===e.isEnabled||e.isEnabled(t))).map((({capability:r,value:n,...l})=>{const i=(t=>e.find((e=>e?.value===t)))(n),s={onClick:i?()=>i.action(t):o};switch(n){case Y:s.href=t.bottomTargetAction,s.openNewTab=!1;break;case te:s.href=t.previewLink,s.openNewTab=!0;break;case J:case Q:s.disabled=a}return delete l?.action,{...l,...s}}))};var bn=a(37233);const gn=m.default.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(({theme:e})=>e.colors.gradient.placeholder),qe[Ve.THUMBNAIL],qe[Ve.THUMBNAIL]/(3/4),(({theme:e})=>e.borders.radius.small)),hn=m.default.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),_n=(0,m.default)(bn.default).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal),(({theme:e})=>e.colors.standard.white),(({theme:e})=>e.borders.radius.round)),yn=(0,m.default)(Bo).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],sa,sa),En=m.default.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],sa,sa,sa);function Sn(e){window.getSelection().selectAllChildren(e.target)}function wn(){window.getSelection().removeAllRanges()}const StoryListItem=({story:e,renameStory:t,userId:a,storyMenu:o,storyStatus:l})=>{const i=(0,g.useMemo)((()=>e?.locked&&a!==e?.lockUser.id),[e,a]),s=Yo(e.title),c=(0,g.useMemo)((()=>fn({menuItems:o.menuItems,story:e,isLocked:i})),[o,e,i]),d=(0,g.useMemo)((()=>c.length?r.createElement(StoryMenu,{menuLabel:(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),s),onMoreButtonSelected:(e,t)=>o.handleMenuToggle(t),contextMenuId:o.contextMenuId,storyId:e.id,menuItems:c,verticalAlign:"center"}):null),[c,s,o,e]);return r.createElement(yn,{"data-testid":`story-list-item-${e.id}`},r.createElement(Fo,null,r.createElement(Tooltip,{title:i&&e?.lockUser.name?(0,X.default)(/* translators: %s: user name */ /* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),e?.lockUser.name):""},r.createElement(hn,null,r.createElement(gn,e.featuredMediaUrl?{src:e.featuredMediaUrl,alt:(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),s),as:"img",decoding:"async"}:null),i&&r.createElement(_n,null)))),r.createElement(Mo,null,r.createElement(En,null,t.id===e.id?r.createElement(Oa,{onEditComplete:a=>t.handleOnRenameStory(e,a),onEditCancel:t.handleCancelRename,value:e.title,id:e.id,label:(0,n.__)("Rename story","web-stories")}):r.createElement(r.Fragment,null,r.createElement(no.Headline,{tabIndex:0,onFocus:Sn,onBlur:wn,size:Ya.TextSize.XXXSmall,as:"h3","aria-label":i?(0,X.default)(/* translators: 1: story title. 2: user currently editing the story. */ /* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("%1$s (locked by %2$s)","web-stories"),s,e?.lockUser.name):s},s),d))),r.createElement(Mo,null,r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},e.author?.name||"—")),r.createElement(Mo,null,r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},Et(e.createdGmt))),r.createElement(Mo,null,r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},Et(e.modifiedGmt))),l!==ce.DRAFT&&r.createElement(Uo,null,r.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},de[e?.status])))};var vn=a(75097);const{focusableOutlineCSS:Tn}=vn,Cn=m.default.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),In=m.default.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(({theme:e})=>e.colors.fg.primary),(({active:e})=>e?"visible":"hidden"),(({asc:e})=>e&&(0,m.css)(["transform:rotate(180deg);"]))),kn=m.default.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),Ln=(0,m.default)(In).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],(({active:e})=>!e&&"display: none;"),(({theme:e})=>e.breakpoint.mobile)),An=(0,m.default)(Sa.Text.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(({theme:e})=>e.colors.blue[70]),(({theme:e})=>Tn(e.colors.border.focus,e.colors.bg.secondary))),xn={[oe.DESC]:oe.ASC,[oe.ASC]:oe.DESC};function StoryListView({hideStoryList:e,renameStory:t,stories:a,storyMenu:o}){const{userId:l,styleConstants:{topOffset:i}}=y(),{filters:s,sortObject:c,updateSort:d}=wr((({state:{filters:e,sortObject:t},actions:{updateSort:a}})=>({filters:e,sortObject:t,updateSort:a}))),[u,p]=(0,g.useMemo)((()=>[c?.orderby,c?.order]),[c]),m=(0,g.useMemo)((()=>s.filter((({key:e})=>"status"===e)).filterId),[s]),f=(0,g.useCallback)((e=>{d(e!==u?{orderby:e,order:le[e]}:{order:xn[p]})}),[d,u,p]),b=(0,g.useCallback)((({key:e},t)=>{"Enter"===e&&f(t)}),[f]),h=(0,g.useMemo)((()=>!e&&a.map((e=>r.createElement(StoryListItem,{key:`story-${e.id}`,story:e,userId:l,renameStory:t,storyStatus:m,storyMenu:o})))),[e,t,a,m,o,l]);return r.createElement(Cn,{"data-testid":"story-list-view"},r.createElement(Io,{"aria-label":(0,n.__)("List view of created stories","web-stories")},r.createElement(Ao,{topOffset:i},r.createElement(Bo,null,r.createElement(Oo,{onClick:()=>f(re.NAME),onKeyDown:e=>b(e,re.NAME)},r.createElement(An,{"aria-label":(0,n.__)("Title, select to sort table by story title","web-stories"),size:Ya.TextSize.Small,isBold:!0},(0,n.__)("Title","web-stories"))),r.createElement(Ro,{onClick:()=>f(re.NAME),onKeyDown:e=>b(e,re.NAME)},r.createElement(An,{"aria-hidden":!0,active:u===re.NAME,size:Ya.TextSize.Small,isBold:!0},(0,n.__)("Title","web-stories")),r.createElement(In,{active:u===re.NAME,asc:p===oe.ASC},r.createElement(mn,null))),r.createElement(Po,null,r.createElement(An,{"aria-label":(0,n.__)("Author, select to sort table by story author","web-stories"),onClick:()=>f(re.CREATED_BY),onKeyDown:e=>b(e,re.CREATED_BY),active:u===re.CREATED_BY,size:Ya.TextSize.Small,isBold:!0},(0,n.__)("Author","web-stories")),r.createElement(Ln,{"aria-hidden":!0,active:u===re.CREATED_BY,asc:p===oe.ASC},u===re.CREATED_BY?r.createElement(mn,null):r.createElement(kn,null))),r.createElement(Do,null,r.createElement(An,{"aria-label":(0,n.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>f(re.DATE_CREATED),onKeyDown:e=>b(e,re.DATE_CREATED),active:u===re.DATE_CREATED,size:Ya.TextSize.Small,isBold:!0},(0,n.__)("Date Created","web-stories")),r.createElement(Ln,{"aria-hidden":!0,active:u===re.DATE_CREATED,asc:p===oe.ASC},r.createElement(mn,null))),r.createElement(Do,null,r.createElement(An,{"aria-label":(0,n.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>f(re.LAST_MODIFIED),onKeyDown:e=>b(e,re.LAST_MODIFIED),active:u===re.LAST_MODIFIED,size:Ya.TextSize.Small,isBold:!0},(0,n.__)("Last Modified","web-stories")),r.createElement(Ln,{"aria-hidden":!0,active:u===re.LAST_MODIFIED,asc:p===oe.ASC},r.createElement(mn,null))),m!==ce.DRAFT&&r.createElement(No,null,r.createElement(Sa.Text.Span,{isBold:!0,size:Ya.TextSize.Small},(0,n.__)("Publish State","web-stories"))))),r.createElement(ko,null,h)))}var On=a(19269);const Dn=m.default.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.posterOverlay)),Nn=m.default.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.opacity.black3)),Pn=m.default.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Rn=m.default.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.placeholder)),Bn=(0,m.default)(ua).withConfig({displayName:"storyGridItem__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],(({$posterHeight:e})=>`${e}px auto`));Bn.propTypes={$posterHeight:Rt().number};const Mn=m.default.div.withConfig({displayName:"storyGridItem__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Un=m.default.a.withConfig({displayName:"storyGridItem__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`4px solid ${e.colors.interactiveBg.active}`)),Fn=m.default.div.withConfig({displayName:"storyGridItem__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),zn=m.default.div.withConfig({displayName:"storyGridItem__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Gn=(0,m.default)(zn).withConfig({displayName:"storyGridItem__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),Hn=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),jn=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),Vn=(0,m.default)(no.Headline).attrs({as:"h3",size:Ya.TextSize.XSmall}).withConfig({displayName:"storyGridItem__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],(({theme:e})=>e.colors.inverted.fg.primary)),qn=(0,m.default)(Sa.Text.Span).attrs({size:Ya.TextSize.XSmall}).withConfig({displayName:"storyGridItem__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],(({theme:e})=>e.colors.inverted.fg.primary)),Wn=m.default.img.withConfig({displayName:"storyGridItem__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],(({theme:e})=>`2px solid ${e.colors.interactiveBg.brandNormal}`),(({theme:e})=>e.borders.radius.small)),$n=(0,m.default)(bn.default).withConfig({displayName:"storyGridItem__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],(({theme:e})=>e.colors.inverted.fg.primary)),Kn=({author:e,contextMenu:t,displayDate:a,editMode:o,formattedTitle:l,id:i,isLocked:s,lockUser:c={},onEditComplete:d,onEditCancel:u,status:p,title:m})=>{const f=(0,g.useMemo)((()=>{if(!a)return null;switch(p){case ce.PUBLISH:return(0,X.default)(/* translators: %s: published date */ /* translators: %s: published date */
(0,n.__)("Published %s","web-stories"),a);case ce.FUTURE:return(0,X.default)(/* translators: %s: future publish date */ /* translators: %s: future publish date */
(0,n.__)("Scheduled %s","web-stories"),a);default:return(0,X.default)(/* translators: %s: last modified date */ /* translators: %s: last modified date */
(0,n.__)("Modified %s","web-stories"),a)}}),[p,a]),{name:b,avatar:h}=c,_=s&&h&&r.createElement(Gn,null,r.createElement(Tooltip,{position:Go.Placement.BottomStart,title:b&&(0,X.default)(/* translators: %s: user name */ /* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),b)},r.createElement(Wn,{src:h,alt:b,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return r.createElement(Fn,null,_,o?r.createElement(Oa,{onEditComplete:d,onEditCancel:u,value:m,id:i,label:(0,n.__)("Rename story","web-stories"),isInverted:!0}):r.createElement(zn,null,s&&r.createElement($n,null),r.createElement(Vn,null,l)),r.createElement(Hn,null,r.createElement(jn,null,p===ce.DRAFT&&r.createElement(qn,{isBold:!0},(0,n.__)("Draft","web-stories")),p===ce.PENDING&&r.createElement(qn,{isBold:!0},(0,n.__)("Pending","web-stories")),e?.name&&r.createElement(qn,null,e?.name),r.createElement(qn,{className:"dashboard-grid-item-date"},f)),r.createElement(jn,null,t)))};function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Xn.apply(this,arguments)}const Yn=(0,g.forwardRef)((({onFocus:e,isActive:t,pageSize:a,renameStory:o,story:l,storyMenu:i},s)=>{const{userId:c}=y(),d=t?0:-1,u=o?{editMode:o?.id===l?.id,onEditComplete:e=>o?.handleOnRenameStory(l,e),onEditCancel:o?.handleCancelRename}:{},p=(0,g.useMemo)((()=>l?.locked&&c!==l?.lockUser.id),[l,c]),f=(0,g.useMemo)((()=>fn({menuItems:i.menuItems,story:l,isLocked:p})),[i,l,p]),b=Et(l?.status===ce.DRAFT?l?.modifiedGmt:l?.createdGmt),h=Yo(l.title),_=(0,g.useMemo)((()=>f.length?r.createElement(StoryMenu,{menuLabel:p?(0,X.default)(/* translators: 1: story title. 2: user currently editing the story. */ /* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("Context menu for %1$s (locked by %2$s)","web-stories"),h,l?.lockUser.name):(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),h),itemActive:t,tabIndex:d,onMoreButtonSelected:i.handleMenuToggle,contextMenuId:i.contextMenuId,storyId:l.id,isInverted:!0,menuItems:f,menuStyleOverrides:(0,m.css)(["margin:0 0 0 auto;"])}):null),[p,h,l?.lockUser?.name,l.id,t,d,i,f]);return r.createElement(Bn,{"data-testid":`story-grid-item-${l.id}`,onFocus:e,$posterHeight:a.height,ref:s,"aria-label":(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,n.__)("Details about %s","web-stories"),h)},r.createElement(Pn,null,r.createElement(Mn,null,r.createElement(Rn,Xn({},l.featuredMediaUrl?{alt:(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),h),as:"img",src:l.featuredMediaUrl,decoding:"async"}:null,{width:it,height:lt})),r.createElement(Dn,null),r.createElement(Nn,null,l?.capabilities?.hasEditAction&&r.createElement(Un,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:d,href:l.editStoryLink},r.createElement(On.VisuallyHidden,null,(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,n.__)("Open %s in Editor","web-stories"),h))),r.createElement(Kn,Xn({author:l.author,contextMenu:_,displayDate:b,formattedTitle:h,id:l.id,isLocked:p,lockUser:l?.lockUser,status:l?.status,title:l.title},u))))))}));Yn.displayName="StoryGridItem";const Jn=Yn,Zn=(0,m.default)(Jt).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Ke),Qn=({stories:e,pageSize:t,storyMenu:a,renameStory:o,returnStoryFocusId:l})=>{const{isRTL:i}=y(),s=(0,g.useRef)(),c=(0,g.useRef)(),d=(0,g.useRef)({}),[u,p]=(0,g.useState)(),m=(0,g.useRef)(),f=(0,g.useMemo)((()=>e.map((({id:e})=>e))),[e]);(0,Nt.default)({containerRef:s,gridRef:c,itemRefs:d,isRTL:i,currentItemId:u,items:e}),(0,g.useEffect)((()=>{if(!u&&l?.value&&!m.current){const e=l?.value;p(e);const t=d.current?.[e]?.querySelectorAll(["button","a"])?.[0];t?.focus()}}),[u,l]),(0,g.useEffect)((()=>{u&&(m.current=u)}),[u]);const b=(0,g.useCallback)(((e,t)=>{if(a.handleMenuToggle(t),t<0&&9===e?.keyCode){const t=!e?.shiftKey?f[f.indexOf(u)+1]:u;l.set(t),m.current=null,p(null)}}),[u,f,l,a]),h=(0,g.useCallback)((()=>{m.current=null,p(null),l.set(null)}),[l]);(0,g.useFocusOut)(s,(()=>p(null)),[]);const _=(0,g.useMemo)((()=>{const e=[Q,J,Z],t=a.menuItems.map((t=>{const a={...t};return e.includes(t?.value)&&(a.action=e=>{h(),t.action(e)}),a}));return{...a,handleMenuToggle:b,menuItems:t}}),[b,a,h]),E=(0,g.useMemo)((()=>e.map((e=>r.createElement(Jn,{onFocus:()=>p(e.id),isActive:u===e.id,ref:t=>{d.current[e.id]=t},key:e.id,pageSize:t,renameStory:o,story:e,storyMenu:_})))),[u,_,t,o,e]);return r.createElement("div",{ref:s},r.createElement(Zn,{pageSize:t,ref:c,role:"list",ariaLabel:(0,n.__)("Viewing stories","web-stories")},E))},el="DELETE_STORY";const tl=function StoriesView({loading:e,storyActions:t,stories:a,view:o}){const[l,i]=(0,g.useState)(-1),[s,c]=(0,g.useState)(-1),[d,u]=(0,g.useState)(""),[p,m]=(0,g.useState)(null),[f,b]=(0,g.useState)({}),[h,_]=(0,g.useState)(null),{showSnackbar:y}=(0,sn.useSnackbar)(),S=d===el&&p,w=(0,g.useMemo)((()=>a.map((({id:e})=>e))),[a]);(0,g.useEffect)((()=>{if(f.id&&!h){const e=w.indexOf(f.id),t=e>0?-1:1,a=f.isDeleted?t:0,o=w[e+a];o&&_(o)}}),[f,h,w]),(0,g.useEffect)((()=>{d||m(null)}),[d,m]),(0,g.useEffect)((()=>{d&&(b({}),_(null))}),[d]);const v=(0,g.useCallback)(((e,a)=>{c(-1),(0,E.trackEvent)("rename_story"),t.updateStory({...e,title:{raw:a}})}),[t]),T=(0,g.useCallback)((()=>{(0,E.trackEvent)("delete_story"),t.trashStory(p),b({id:p.id,isDeleted:!0}),u("")}),[t,p]),C=(0,g.useCallback)((()=>{i(-1),(0,E.trackEvent)("open_in_editor")}),[]),I=(0,g.useCallback)((e=>{i(-1),c(e.id)}),[]),k=(0,g.useCallback)((e=>{i(-1),(0,E.trackEvent)("duplicate_story"),t.duplicateStory(e),b({id:e.id})}),[t]),L=(0,g.useCallback)((e=>{i(-1),m(e),u(el)}),[]),A=(0,g.useCallback)((e=>{i(-1),window.navigator.clipboard.writeText(e.link),y({message:(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,n.__)("%s has been copied to your clipboard.","web-stories"),Yo(e.title)),dismissible:!0}),b({id:e.id})}),[y]),x=ae.map((e=>{switch(e?.value){case ee:e.action=A;break;case Q:e.action=L;break;case Z:e.action=k;break;case te:e.action=C;break;case J:e.action=I;break;default:e.action=()=>i(-1)}return e})),O=(0,g.useMemo)((()=>({handleMenuToggle:i,contextMenuId:l,menuItems:x})),[l,x,i]),D=(0,g.useMemo)((()=>({id:s,handleOnRenameStory:v,handleCancelRename:()=>c(-1)})),[v,c,s]),N=(0,g.useMemo)((()=>o.style===Qe.LIST?r.createElement(StoryListView,{hideStoryList:e?.isLoading&&!e?.showStoriesWhileLoading.current,pageSize:o.pageSize,renameStory:D,stories:a,storyMenu:O}):!e?.isLoading||e?.isLoading&&e?.showStoriesWhileLoading.current?r.createElement(Qn,{isLoading:e?.isLoading,pageSize:o.pageSize,renameStory:D,storyMenu:O,stories:a,returnStoryFocusId:{value:h,set:_}}):null),[e,D,h,a,O,o]);return r.createElement(r.Fragment,null,N,e?.isLoading&&!e?.showStoriesWhileLoading.current&&r.createElement(ja,null,r.createElement(un.default,null)),S&&r.createElement(ya,{isOpen:!0,contentLabel:(0,n.__)("Dialog to confirm deleting a story","web-stories"),title:(0,n.__)("Delete Story","web-stories"),onClose:()=>{b({id:p.id}),u("")},secondaryText:(0,n.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,n.__)('Cancel deleting story "%s"',"web-stories"),Yo(p.title))},primaryText:(0,n.__)("Delete","web-stories"),onPrimary:T,primaryRest:{"aria-label":(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,n.__)('Confirm deleting story "%s"',"web-stories"),Yo(p.title))}},r.createElement(Sa.Text.Paragraph,{size:Ya.TextSize.Small},(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,n.__)('Are you sure you want to delete "%s"?',"web-stories"),Yo(p.title)))))};function NoAvailableContent({filtersObject:e}){const{search:t}=e;return t?(0,X.default)(/* translators: %s: search term. */ /* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),t):0!==Object.keys(e).length?(0,n.__)("Sorry, we couldn't find any results","web-stories"):(0,n.__)("Start telling Stories.","web-stories")}NoAvailableContent.propTypes={filtersObject:Rt().object};const al=function({allPagesFetched:e,canViewDefaultTemplates:t,filtersObject:a={},loading:o,page:l,stories:i,storyActions:s,view:c}){return r.createElement(Ua.Scrollable,null,r.createElement(ga,null,i.length>0?r.createElement(r.Fragment,null,r.createElement(tl,{storyActions:s,stories:i,view:c,loading:o}),r.createElement(dn.default,{canLoadMore:!e,isLoading:o?.isLoading,allDataLoadedMessage:(0,n.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more stories","web-stories"),onLoadMore:l.requestNextPage})):!o?.isLoading&&r.createElement(Fr,null,r.createElement(no.Headline,{size:Ya.TextSize.Small,as:"h3"},r.createElement(NoAvailableContent,{filtersObject:a})),0===Object.keys(a).length&&t&&r.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Medium,href:to(Ye.TEMPLATES_GALLERY)},(0,n.__)("Explore Templates","web-stories")))))};const ol=function(e){return e.reduce(((e,t)=>!t.title||t?.title.trim().length<=0?e:[...e,{label:t.title,value:t.title}]),[])};var rl=a(85934);const nl="VERTICAL",ll="COLOR",il="TAG",sl="TITLE";const cl=function(e){const t=Object.values(e),a=t.flatMap((e=>e.colors)).map((e=>({label:e.family,value:e.family,type:ll}))),o=t.flatMap((e=>e.tags)).map((e=>({label:e,value:e,type:il}))),r=t.map((e=>e.vertical)).map((e=>({label:e,value:e,type:nl}))),n=t.map((e=>({label:e.title,value:e.title,type:sl})));return[...(0,rl.default)(o,"label"),...(0,rl.default)(a,"label"),...(0,rl.default)(r,"label"),...(0,rl.default)(n,"label")]};a(28244);const dl=function(e){return t=>!e||e.some((e=>{switch(e?.type){case il:return t.tags.map((e=>e.toLowerCase())).includes(e.value.toLowerCase());case ll:return t.colors.map((e=>e.label.toLowerCase())).includes(e.value.toLowerCase());case nl:return t.vertical.toLowerCase().includes(e.value.toLowerCase());case sl:return t.title.toLowerCase().includes(e.value.toLowerCase());default:return!0}}))};var ul=a(50212);const pl=(0,m.default)(ul.default).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(({theme:e,isActive:t})=>t?e.colors.gray[20]:e.colors.fg.tertiary));const ml=function StoryStatusToggle({initialPageReady:e,totalStoriesByStatus:t,currentStatus:a}){const{updateFilter:o,registerFilters:l}=wr((({actions:{updateFilter:e,registerFilters:t}})=>({updateFilter:e,registerFilters:t}))),i=(0,g.useCallback)((e=>{o("status",{filterId:e})}),[o]);(0,g.useEffect)((()=>{l([{key:"status",filterId:me.filters.status}])}),[l]);const s=(0,g.useMemo)((()=>Object.keys(t).reduce(((e,a)=>e+t[a]),0)),[t]),c=(0,g.useMemo)((()=>ue.filter((({status:e})=>Boolean(e in t)&&t[e]>0||e===a)).map((({label:e,status:o,value:r})=>{const l=t[o],i=Boolean(!l);return{ariaLabel:(0,X.default)(/* translators: %s is story status */ /* translators: %s is story status */
(0,n.__)("Filter stories by %s","web-stories"),e),disabled:i,isActive:a===r,value:r,label:e,count:l}}))),[t,a]);return!e||!s||t&&0===Object.keys(t).length?null:r.createElement(r.Fragment,null,c.map((({ariaLabel:e,disabled:t,isActive:a,value:o,label:n,count:l})=>r.createElement(pl,{key:o,onClick:()=>i(o),isActive:a,disabled:t,"aria-label":e},n,r.createElement("span",null,l)))))};const fl=(0,g.memo)((function({initialPageReady:e,stories:t,totalStoriesByStatus:a,view:o}){const l=(0,g.useMemo)((()=>ol(t)),[t]),{filters:i,sortObject:s,updateFilter:c,updateSort:d,registerFilters:u}=wr((({state:{filters:e,sortObject:t},actions:{updateFilter:a,updateSort:o,registerFilters:r}})=>({filters:e,updateFilter:a,sortObject:t,updateSort:o,registerFilters:r}))),[p,m,f]=(0,g.useMemo)((()=>{const e=i.find((({key:e})=>"status"===e)),t=i.find((({key:e})=>"search"===e));return[i.filter((({key:e})=>!["status","search"].includes(e))),e?.filterId,t?.filterId]}),[i]),b=(0,g.useMemo)((()=>(m?.split(",")||[]).reduce(((e,t)=>e+(a[t]||0)),0)),[m,a]),h=er({currentFilter:m,isActiveSearch:Boolean(f),totalResults:b,view:tt}),_=(0,g.useDebouncedCallback)((async e=>{await(0,E.trackEvent)("search",{search_type:"dashboard",search_term:e}),c("search",{filterId:e})}),nt);(0,g.useEffect)((()=>{u([{key:"search"}])}),[u]);const y=(0,g.useCallback)((()=>c("search",{filterId:null})),[c]);return r.createElement(r.Fragment,null,r.createElement(nn,{heading:(0,n.__)("Dashboard","web-stories"),searchPlaceholder:(0,n.__)("Search Stories","web-stories"),searchOptions:l,handleSearchChange:_,showSearch:e,searchValue:f,onClear:y},r.createElement(ml,{initialPageReady:e,totalStoriesByStatus:a,currentStatus:m})),r.createElement(BodyViewOptions,{showGridToggle:!0,filters:p,showSortDropdown:!0,resultsLabel:h,layoutStyle:o.style,handleLayoutSelect:o.toggleStyle,pageSortOptions:ie,pageSortDefaultOption:re.LAST_MODIFIED,handleSortChange:d,currentSort:s}))}));function MyStoriesView(){const{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:n,isLoading:l,stories:i,storiesOrderById:s,totalPages:c,totalStoriesByStatus:d}=gr((({actions:{storyApi:{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o}},state:{stories:{allPagesFetched:r,isLoading:n,stories:l,storiesOrderById:i,totalPages:s,totalStoriesByStatus:c}}})=>({duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:r,isLoading:n,stories:l,storiesOrderById:i,totalPages:s,totalStoriesByStatus:c}))),{filtersObject:u,sortObject:p}=wr((({state:{filtersObject:e,sortObject:t}})=>({filtersObject:e,sortObject:t}))),{apiCallbacks:m,canViewDefaultTemplates:f}=y(),b=(0,g.useRef)(!1);(0,g.useEffect)((()=>(b.current=!0,()=>{b.current=!1})),[]);const{page:h,view:_,showStoriesWhileLoading:S,initialPageReady:w}=function({filtersObject:e=me.filters,sortObject:t=me.sort,isLoading:a=!1,totalPages:o}){const[r,n]=(0,g.useState)(Qe.GRID),[l,i]=(0,g.useState)(t),[s,c]=(0,g.useState)(e),[d,u]=(0,g.useState)(1),p=(0,g.useRef)(!1),[m,f]=(0,g.useState)(!1),{pageSize:b}=nr({thumbnailMode:r===Qe.LIST,isGrid:r===Qe.GRID}),h=(0,g.useCallback)((e=>{u(lr(e,{MIN:1,MAX:o}))}),[o]),_=(0,g.useCallback)((e=>{i(e),h(1)}),[h]),y=(0,g.useCallback)((e=>{c(e),h(1)}),[h]),S=(0,g.useCallback)((()=>{const e=r===Qe.LIST?Qe.GRID:Qe.LIST;n(e)}),[r,n]),w=(0,g.useCallback)((()=>{p.current=!0,h(d+1)}),[d,h]);return(0,g.useEffect)((()=>{s?.search?.length&&(0,E.trackEvent)("search",{search_type:"dashboard_stories",search_term:s.search,search_filter:s.status,search_author_filter:s.author,search_order:l.order,search_orderby:l.orderby,search_view:r})}),[s,l,r]),(0,g.useEffect)((()=>{a||(p.current=!1)}),[a]),(0,g.useEffect)((()=>{o&&!m&&f(!0)}),[o,m]),(0,g.useEffect)((()=>{m&&y(e)}),[y,m,e]),(0,g.useEffect)((()=>{m&&_(t)}),[_,m,t]),(0,g.useMemo)((()=>({view:{style:r,toggleStyle:S,pageSize:b},sort:{value:l.orderby,direction:l.order,set:_},filters:{value:s,set:y},page:{value:d,set:u,requestNextPage:w},initialPageReady:m,showStoriesWhileLoading:p})),[r,S,b,l,_,s,y,m,d,w])}({filtersObject:u,sortObject:p,isLoading:l,totalPages:c});(0,g.useEffect)((()=>{t({page:h.value,filters:u,sort:p})}),[t,u,p,h.value,m]);const v=(0,g.useMemo)((()=>s.map((e=>i[e]))),[i,s]);return r.createElement(Ua.Provider,null,r.createElement(fl,{initialPageReady:w,stories:v,totalStoriesByStatus:d,view:_}),r.createElement(al,{allPagesFetched:n,canViewDefaultTemplates:f,filtersObject:u,loading:{isLoading:l,showStoriesWhileLoading:S},page:h,stories:v,storyActions:{duplicateStory:e,trashStory:a,updateStory:o},view:_}),r.createElement(Ua.Fixed,null,r.createElement(To,null)))}function MyStories(){return r.createElement(StoryFiltersProvider,null,r.createElement(MyStoriesView,null))}const bl=(0,g.createContext)({state:{},actions:{}}),{filters:gl,sort:hl}=Me;function TemplateFiltersProvider({children:e}){const[t,a]=(0,g.useReducer)(br,{filters:[],filtersObject:gl,sortObject:hl}),o=(0,g.useCallback)(((e,t)=>{a({type:pr,payload:{key:e,value:t}})}),[]),n=(0,g.useCallback)((e=>{a({type:mr,payload:{type:"template",values:e}})}),[]),l=(0,g.useCallback)((e=>{a({type:fr,payload:{value:e}})}),[]),i=(0,g.useMemo)((()=>({state:t,actions:{updateSort:n,updateFilter:o,registerFilters:l}})),[t,n,o,l]);return r.createElement(bl.Provider,{value:i},e)}function _l(e=g.identity){return(0,g.useContextSelector)(bl,e)}const yl=m.default.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],Dn,Nn,Dn,Nn,(({$isSelected:e})=>e?1:0)),El=m.default.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),Sl=(0,m.default)(Rn).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme:e})=>e.borders.radius.medium)),wl="focus_template",vl=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme:e})=>e.colors.standard.white)),Tl=(0,g.forwardRef)((({onCreateStory:e,onFocus:t,height:a,id:o,isActive:l,posterSrc:i,slug:s,title:c,status:d,onSeeDetailsClick:u=Hr.noop},p)=>{const m=l?0:-1,f=(0,X.default)(/* translators: %s: Template title. */ /* translators: %s: Template title. */
(0,n.__)("First page of %s template","web-stories"),c);return r.createElement(ua,{ref:p,id:`template-grid-item-${o}`,className:"templateGridItem","data-testid":`template-grid-item-${o}`,$posterHeight:a,onFocus:t},r.createElement(Pn,null,r.createElement(yl,{$isSelected:l},r.createElement(Sl,null,r.createElement("source",{srcSet:i?.webp,type:"image/webp"}),r.createElement("source",{srcSet:i?.png,type:"image/png"}),r.createElement("img",{src:i?.png,alt:f,decoding:"async",width:it,height:lt})),r.createElement(Dn,null),r.createElement(Nn,{"data-testid":"card-action-container","data-template-slug":s},r.createElement(El,null,r.createElement(vl,{ariaLabel:(0,X.default)(/* translators: %s: template title.*/ /* translators: %s: template title.*/
(0,n.__)("Go to detail view of %s","web-stories"),c),onClick:()=>u(o,c),className:wl,tabIndex:m},Fe[d]),e&&r.createElement(Bt.Button,{size:Mt.ButtonSize.Small,type:Mt.ButtonType.Primary,onClick:e,tabIndex:m,ariaLabel:(0,X.default)(/* translators: %s: template title.*/ /* translators: %s: template title.*/
(0,n.__)("Create new story from %s","web-stories"),c)},(0,n.__)("Use template","web-stories")))))))}));Tl.displayName="TemplateGridItem";const Cl=Tl;const Il=function TemplateGridView({pageSize:e,templates:t,templateActions:a}){const{isRTL:o,apiCallbacks:l}=y(),i=(0,g.useRef)(),s=(0,g.useRef)(),c=(0,g.useRef)({}),[d,u]=(0,g.useState)(null),{handleDetailsToggle:p,createStoryFromTemplate:m}=a||{},f=Boolean(l?.createStoryFromTemplate);(0,Nt.default)({containerRef:i,gridRef:s,itemRefs:c,isRTL:o,currentItemId:d,items:t}),(0,g.useEffect)((()=>{d&&c.current?.[d]?.querySelector(`.${wl}`)?.focus()}),[d]),(0,g.useFocusOut)(i,(()=>u(null)),[]);const b=(0,g.useMemo)((()=>t.map((({id:t,slug:a,status:o,title:n,postersByPage:l})=>{const i=d===t,s=l?.[0];return r.createElement(Cl,{onCreateStory:f?()=>m(t):ir,onFocus:()=>{u(t)},onSeeDetailsClick:p,height:e.height,id:t,isActive:i,key:a,posterSrc:s,ref:e=>{c.current[t]=e},slug:a,status:o,title:n})}))),[t,d,f,p,e.height,m]);return r.createElement("div",{ref:i},r.createElement(Jt,{pageSize:e,role:"list",ref:s,ariaLabel:(0,n.__)("Viewing available templates","web-stories")},b))};const kl=function({allPagesFetched:e,isLoading:t,page:a,templates:o,view:l,totalTemplates:i,search:s,templateActions:c}){const{newStoryURL:d}=y(),u=(0,g.useMemo)((()=>t?r.createElement(ja,null,r.createElement(un.default,null)):i>0?r.createElement(r.Fragment,null,r.createElement(Il,{templates:o,pageSize:l.pageSize,templateActions:c}),r.createElement(dn.default,{canLoadMore:!e,isLoading:t,allDataLoadedMessage:(0,n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more templates","web-stories"),onLoadMore:a.requestNextPage})):r.createElement(Fr,null,r.createElement(no.Headline,{size:Ya.TextSize.Small,as:"h3"},s?(0,X.default)(/* translators: %s: search term. */ /* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),s):(0,n.__)("No templates currently available.","web-stories")),!s&&r.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Medium,href:d},(0,n.__)("Create New Story","web-stories")))),[e,t,d,a.requestNextPage,c,s,o,i,l.pageSize]);return r.createElement(Ua.Scrollable,null,r.createElement(ga,null,u))};const Ll=function({isLoading:e,totalTemplates:t,view:a,searchOptions:o=[]}){const l=(0,b.useFeature)("enableInProgressTemplateActions"),{filters:i,sortObject:s,updateFilter:c,updateSort:d,registerFilters:u}=_l((({state:{filters:e,sortObject:t},actions:{updateFilter:a,updateSort:o,registerFilters:r}})=>({filters:e,sortObject:t,updateFilter:a,updateSort:o,registerFilters:r}))),[p,m]=(0,g.useMemo)((()=>{const e=i.find((({key:e})=>"status"===e)),t=i.find((({key:e})=>"search"===e));return[e?.filterId,t?.filterId]}),[i]),f=(0,g.useDebouncedCallback)((e=>{c("search",{filterId:e})}),nt);(0,g.useEffect)((()=>{u([{key:"search"}]),u([{key:"status",filterId:Me.filters.status}])}),[u]);const h=(0,g.useCallback)((()=>c("search",{filterId:null})),[c]),_=er({totalResults:t,currentFilter:p,view:at});return r.createElement(r.Fragment,null,r.createElement(nn,{heading:(0,n.__)("Explore Templates","web-stories"),searchPlaceholder:(0,n.__)("Search Templates","web-stories"),showSearch:!0,searchOptions:o,searchValue:m,handleSearchChange:f,onClear:h}),r.createElement(BodyViewOptions,{resultsLabel:_,layoutStyle:a.style,handleLayoutSelect:a.toggleStyle,isLoading:e,pageSortOptions:Ue,pageSortDefaultOption:Re.POPULAR,currentSort:s,handleSortChange:d,showSortDropdown:l,sortDropdownAriaLabel:(0,n.__)("Choose sort option for display","web-stories")}))};var Al,xl=a(95735);function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ol.apply(this,arguments)}const SvgCrossLarge=({title:e,titleId:t,...a})=>r.createElement("svg",Ol({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,Al||(Al=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M25.146 25.854a.5.5 0 0 0 .708-.708L16.707 16l9.147-9.146a.5.5 0 0 0-.708-.708L16 15.293 6.854 6.146a.5.5 0 1 0-.708.708L15.293 16l-9.147 9.146a.5.5 0 0 0 .708.708L16 16.707z",clipRule:"evenodd"}))),Dl=(0,r.memo)(SvgCrossLarge),Nl=m.default.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),Pl=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);const Rl=function({templateTitle:e,templateId:t,templateActions:a,canCreateStory:o}){const{createStoryFromTemplate:l,handleDetailsToggle:i}=a||{};return r.createElement(Nl,null,r.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,variant:Mt.ButtonVariant.Square,size:Mt.ButtonSize.Small,"aria-label":(0,n.__)("Close","web-stories"),onClick:i},r.createElement(Dl,null)),o&&r.createElement(Pl,{onClick:()=>l(t),"aria-label":(0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,n.__)("Use %s template to create new story","web-stories"),e)},(0,n.__)("Use template","web-stories")))};var Bl,Ml=a(63094),Ul=a(2039);function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Fl.apply(this,arguments)}const SvgArrowRightLarge=({title:e,titleId:t,...a})=>r.createElement("svg",Fl({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,Bl||(Bl=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.355 6.146a.5.5 0 1 0-.707.708l8.647 8.647H6.5a.5.5 0 1 0 0 1h17.795l-8.647 8.648a.5.5 0 0 0 .707.707l9.49-9.49a.5.5 0 0 0 0-.73z",clipRule:"evenodd"}))),zl=(0,r.memo)(SvgArrowRightLarge),Gl=m.default.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Hl=m.default.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),jl=m.default.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Vl=m.default.section.attrs({"aria-label":(0,n.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),ql=m.default.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),Wl=(m.default.section.attrs({"aria-label":(0,n.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,m.default)(Gl).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),$l=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(({theme:e})=>e.colors.fg.tertiary)),Kl=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),Xl=m.default.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(({alignLeft:e})=>e?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        ")),Yl=(0,m.default)(Ml.default).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(({theme:e})=>e.colors.fg.primary)),Jl=m.default.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);const Zl=function DetailsContent({activeTemplateIndex:e,isRTL:t,filteredTemplatesLength:a,switchToTemplateByOffset:o,template:l}){const{postersByPage:i,title:s,description:c,tags:d,colors:u}=l||{},[p,m]=(0,g.useState)([]);(0,g.useEffect)((()=>{i&&m(Object.values(i).map(((e,t)=>({id:t,...e}))))}),[i]);const{NextButton:f,PrevButton:b}=(0,g.useMemo)((()=>{const l=t?e-1:e+1,i=t?e+1:e-1,s=t?!a||e===a-1:!a||0===e,c=t?!a||0===e:!a||e===a-1,d=r.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,"aria-label":(0,n.__)("View previous template","web-stories"),onClick:()=>{o(i),m([])},disabled:s},r.createElement(Ul.default,{height:32,width:32})),u=r.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,"aria-label":(0,n.__)("View next template","web-stories"),onClick:()=>{o(l),m([])},disabled:c},r.createElement(zl,{height:32,width:32}));return t?{NextButton:d,PrevButton:u}:{NextButton:u,PrevButton:d}}),[a,e,t,o]),h=l?(0,X.default)(/* translators: byline. %s: author name. */ /* translators: byline. %s: author name. */
(0,n.__)("By %s","web-stories"),l.createdBy):null;return r.createElement(Wl,null,r.createElement(Hl,null,r.createElement(Xl,{alignLeft:!0},b),r.createElement(jl,null,r.createElement(Vt,{galleryPosters:p,isRTL:t,galleryLabel:(0,n.__)("Template details by page","web-stories")}),r.createElement(ql,null,r.createElement(Vl,null,r.createElement(Gr,{size:Ya.TextSize.Small,as:"h3","data-testid":"template-details-title"},s),r.createElement($l,{size:Ya.TextSize.Medium},h),r.createElement(Kl,{size:Ya.TextSize.Medium},c),r.createElement(Jl,{role:"list","aria-label":(0,n.__)("Template tags","web-stories")},d.map((e=>r.createElement(Yl,{key:e,disabled:!0},e)))),r.createElement(Jl,null,r.createElement(ba,{colors:u,size:32,"aria-label":(0,n.__)("Template colors","web-stories")}))))),r.createElement(Xl,null,f)))};const Ql=function TemplateDetailsModal({activeTemplateIndex:e,activeTemplate:t,filteredTemplatesLength:a,isDetailsViewOpen:o,templateActions:l}){const{isRTL:s,apiCallbacks:c}=y(),d=Boolean(c?.createStoryFromTemplate),{handleDetailsToggle:u,switchToTemplateByOffset:p}=l||{};return r.createElement(xl.default,{isOpen:o,onClose:u,contentLabel:(0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,n.__)("Template Details for %s","web-stories"),t?.title),overlayStyles:{backgroundColor:`${i.theme.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${i.theme.colors.standard.white}`}},r.createElement(Rl,{templateTitle:t?.title,templateId:t?.id,templateActions:l,canCreateStory:d}),r.createElement(Zl,{activeTemplateIndex:e,isRTL:s,filteredTemplatesLength:a,switchToTemplateByOffset:p,template:t}))};function ExploreTemplatesView(){const e=(0,Jr.default)(),[t,a]=(0,g.useState)(!1),[o,l]=(0,g.useState)(null),[i,s]=(0,g.useState)(0),{templateIdParam:c,replace:d}=eo((({actions:e,state:t})=>({templateIdParam:t.queryParams.id,replace:e.replace}))),u=(0,g.useRef)(c),{allPagesFetched:p,isLoading:m,templates:f,templatesOrderById:b,totalPages:h,totalTemplates:_,createStoryFromTemplate:y,fetchExternalTemplates:S}=gr((({state:{templates:{allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:r,totalTemplates:n}},actions:{storyApi:{createStoryFromTemplate:l},templateApi:{fetchExternalTemplates:i}}})=>({allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:r,totalTemplates:n,createStoryFromTemplate:l,fetchExternalTemplates:i}))),{filters:w,sortObject:v,filtersObject:T}=_l((({state:{filters:e,sortObject:t,filtersObject:a}})=>({filters:e,sortObject:t,filtersObject:a}))),{page:C,view:I}=function({totalPages:e,sortObject:t=Me.sort,filtersObject:a=Me.filters}){const[o,r]=(0,g.useState)(t),[n,l]=(0,g.useState)(a),[i,s]=(0,g.useState)(1),{pageSize:c}=nr({isGrid:!0}),d=(0,g.useCallback)((t=>{s(lr(t,{MIN:1,MAX:e}))}),[e]),u=(0,g.useCallback)((()=>d(i+1)),[i,d]),p=(0,g.useCallback)((e=>{r(e),d(1)}),[d]),m=(0,g.useCallback)((e=>{l(e),d(1)}),[d]);return(0,g.useMemo)((()=>({view:{style:Qe.GRID,pageSize:c},sort:{value:o.orderby,direction:o.order,set:p},filters:{value:n,set:m},page:{value:i,set:s,requestNextPage:u}})),[c,o,p,i,u,n,m])}({filtersObject:T,sortObject:v,totalPages:h}),[k]=(0,g.useMemo)((()=>{const e=w.find((({key:e})=>"search"===e));return[e?.filterId]}),[w]),L=(0,g.useMemo)((()=>cl(f)),[f]),A=(0,g.useMemo)((()=>k?L.filter((e=>e.label.toLowerCase().includes(k.toLowerCase()))):L),[L,k]),x=(0,g.useMemo)((()=>b.map((e=>f[e])).filter(dl(A))),[b,f,A]),O=(0,g.useMemo)((()=>_!==x.length?x.length:_),[x,_]),D=(0,g.useMemo)((()=>(0,rl.default)(A,"label")),[A]),N=(0,g.useCallback)((e=>{const t=f[e];(0,E.trackEvent)("use_template",{name:t.title,template_id:t.id}),y(t)}),[y,f]),P=(0,g.useCallback)((e=>{const t=x.find((t=>t.id===e));l(t),s(x.findIndex((t=>t.id===e))),u.current&&(u.current=void 0),d(`?id=${t.id}&isLocal=${t.isLocal}`)}),[d,x]),R=(0,g.useCallback)(((t,o)=>{a((a=>{const r=!a;return o&&(0,E.trackScreenView)(o),r&&t&&P(t),r||(d(""),e((0,n.__)("Exit detail templates view","web-stories"))),r}))}),[d,e,P]),B=(0,g.useCallback)((t=>{const a=x[t];l(a),s(t),d(`?id=${a.id}&isLocal=${a.isLocal}`),e((0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,n.__)("Viewing %s","web-stories"),a.title))}),[x,d,e]),M=(0,g.useMemo)((()=>({createStoryFromTemplate:N,handleDetailsToggle:R,switchToTemplateByOffset:B})),[N,R,B]);return(0,g.useEffect)((()=>{S()}),[S]),(0,g.useEffect)((()=>{if(u.current&&x.length){if(!x.some((e=>e.id===parseInt(u.current))))return void d("");a(!0),P(parseInt(u.current))}}),[x,d,P]),r.createElement(Ua.Provider,null,r.createElement(Ll,{isLoading:m&&!_,totalTemplates:O,searchOptions:D,view:I}),r.createElement(kl,{isLoading:m,allPagesFetched:p,page:C,templates:x,totalTemplates:O,search:k,view:I,templateActions:M}),r.createElement(Ua.Fixed,null,r.createElement(To,null)),r.createElement(Ql,{activeTemplate:o,activeTemplateIndex:i,isDetailsViewOpen:t,templateActions:M,filteredTemplatesLength:x.length}))}function ExploreTemplates(){return r.createElement(TemplateFiltersProvider,null,r.createElement(ExploreTemplatesView,null))}const ei=function(){const{storyError:e,templateError:t}=gr((({state:{stories:{error:e},templates:{error:t}}})=>({storyError:e,templateError:t}))),{showSnackbar:a}=(0,sn.useSnackbar)(),o=(0,g.useDebouncedCallback)((e=>a({message:e,dismissible:!0})),200);(0,g.useEffect)((()=>{e?.id&&o(e.message)}),[e,o]),(0,g.useEffect)((()=>{t?.id&&o(t.message)}),[t,o])};function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ti.apply(this,arguments)}const ai=({additionalRoutes:e})=>{const{currentPath:t,templateId:a,availableRoutes:o}=eo((({state:e})=>({...e,templateId:e.queryParams.id}))),{push:l,setAvailableRoutes:i}=eo((({actions:e})=>e)),{canViewDefaultTemplates:s,leftRailSecondaryNavigation:c=[],documentTitleSuffix:d=(0,n.__)("Web Stories","web-stories")}=y(),{addInitialFetchListener:u}=gr((({actions:{storyApi:{addInitialFetchListener:e}},state:{templates:{templates:t}}})=>({currentTemplate:void 0!==a?t[a]?.title:void 0,addInitialFetchListener:e}))),p=(0,g.useRef)(t===Ye.DASHBOARD),[m,f]=(0,g.useState)(!p.current);(0,g.useEffect)((()=>u?.((e=>{e?.all<=0&&p.current&&s&&(l(Ye.TEMPLATES_GALLERY),p.current=!1),f(!0)}))),[u,l,t,s]),(0,g.useEffect)((()=>{if(o.length>0)return;const t=e?e.map((({path:e})=>e)):[];i([...Object.values(Ye),...t])}),[e,o.length,i]),(0,g.useEffect)((()=>{if(!m)return;const e=c.find((e=>e.value===t)),a=Je[t]||e?.label||Je.DEFAULT;document.title=(0,X.default)(/* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */ /* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */
(0,n.__)("%1$s ‹ %2$s","web-stories"),a,d),(0,E.trackScreenView)(a)}),[t,m,c,d]),ei();const{clearSnackbar:b,removeSnack:h,placement:_,currentSnacks:S}=(0,sn.useSnackbar)(),w=(0,g.usePrevious)(t);return(0,g.useEffect)((()=>{t!==w&&b()}),[b,t,w]),r.createElement(r.Fragment,null,r.createElement(za,null,r.createElement(ho,null),r.createElement(Ga,null,o.length>0&&r.createElement(r.Fragment,null,r.createElement(ao,{exact:!0,isDefault:!0,path:Ye.DASHBOARD,component:r.createElement(MyStories,null)}),s&&r.createElement(ao,{path:Ye.TEMPLATES_GALLERY,component:r.createElement(ExploreTemplates,null)}),e&&e.map((e=>r.createElement(ao,ti({key:e.path},e))))))),r.createElement(cn.default,{notifications:S,onRemove:h,placement:_,max:1}))};var oi=a(15705),ri=a(19167),ni=a(88272);window.wp.domReady;a(20691);var li=a(20886);const ii=window.wp.apiFetch,si=["id","title","status","date","date_gmt","modified","modified_gmt","story_poster","link","preview_link","edit_link","_links","_embedded","body","status","headers"].join(","),ci=["id","title"],di=["title","link"],ui="wp:lock,author",pi={EDIT:"wp:action-edit",DELETE:"wp:action-delete"};function mi(e){const{id:t,title:a,status:o,date:r,date_gmt:n,modified:l,modified_gmt:i,link:s,preview_link:c,edit_link:d,story_poster:u,_embedded:{author:p,"wp:lock":m}={},_links:f={}}=e;if(!t)return null;const{locked:b=!1,user:g={id:0,name:""}}=m?.[0]||{},h=p?.[0]||{id:0,name:""},_={hasEditAction:Object.prototype.hasOwnProperty.call(f,pi.EDIT),hasDeleteAction:Object.prototype.hasOwnProperty.call(f,pi.DELETE)};return{id:t,status:o,title:a.raw,created:r,createdGmt:`${n}Z`,modified:l,modifiedGmt:`${i}Z`,author:{id:h.id,name:h.name},locked:b,lockUser:{...g,avatar:g?.avatar?.[96]||null},bottomTargetAction:d,featuredMediaUrl:u?.url,editStoryLink:d,previewLink:c,link:s,capabilities:_}}function fi(e,t){const{page:a=1,perPage:o=rt,filters:r={},sort:n={}}=t,l={...{_embed:ui,context:"edit",_web_stories_envelope:!0,_fields:si,...me.filters,...me.sort},page:a,per_page:o,...r,...n};return ii({path:(0,li.default)(e.api.stories,l)}).then((({body:e,headers:t})=>{const a=t&&parseInt(t["X-WP-TotalPages"]),o=t&&JSON.parse(t["X-WP-TotalByStatus"]),r=[];return{stories:e.reduce(((e,t)=>t?(r.push(t.id),e[t.id]=mi(t),e):e),{}),fetchedStoryIds:r,totalPages:a,totalStoriesByStatus:o}}))}function bi(e,t){const a=(0,li.default)(`${e.api.stories}${t}`,{_method:"DELETE"});return ii({path:a,method:"POST"})}function gi(e,t){const a=(0,li.default)(`${e.api.stories}${t.id}/`,{_embed:ui}),o={id:t.id,author:t.author.id,title:t.title?.raw||t.title};return ii({path:a,data:o,method:"POST"}).then(mi)}const hi=(e,t)=>{const a=(0,li.default)(e.api.stories,{_fields:"edit_link"}),{pages:o,version:r,colors:n}=t,l={featuredMedia:{id:0,url:""},publisherLogo:{url:""},title:""},i={pages:o,featuredMedia:l.featuredMedia,title:l.title,status:"auto-draft",meta:{web_stories_publisher_logo:l.publisherLogo.id}},s=n.map((({color:e})=>(0,pa.default)(e))),{globalPageDuration:c=7,globalAutoAdvance:d=!0}=e;return ii({path:a,data:{...i,story_data:{pages:o,version:r,autoAdvance:d,defaultPageDuration:c,currentStoryStyles:{colors:s}}},method:"POST"}).then(ri.snakeToCamelCaseObjectKeys)};function _i(e,t){const a=(0,li.default)(e.api.stories,{_embed:ui,_fields:si});return ii({path:a,data:{original_id:t.id,status:"draft"},method:"POST"}).then(mi)}function yi(e,t){return ii({path:(0,li.default)(e.api.users,{per_page:"100",capabilities:e.editPostsCapabilityName,search:t})})}async function Ei(e,t={}){const a=await ii({path:(0,li.default)(e.api.taxonomies,{type:"web-story",context:"edit",...t})});return Object.values(a).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,ri.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function Si(e,t,a={}){return ii({url:(0,li.default)(t,a)})}function wi(e,t){return ii({path:(0,li.default)(e.api.products,{per_page:1,search:t})})}var vi=a(64239),Ti=a(98075);const Ci={SETTINGS:{UPDATED:(0,n.__)("Setting saved.","web-stories")}},Ii={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,n.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,n.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,n.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,n.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,n.__)("Unable to update settings data","web-stories")}},ki="/editor-settings",Li=[{value:ki,label:(0,n.__)("Settings","web-stories")},{value:(0,n.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),label:(0,n.__)("Support","web-stories"),isExternal:!0,trackingEvent:"click_support_page"}],Ai="none",xi="adsense",Oi="admanager",Di="mgid",Ni={DEFAULT:"default",DISABLED:"disabled",CUSTOM:"custom"},Pi="none",Ri="woocommerce",Bi="shopify",Mi="site-kit",Ui="web-stories",Fi="both",zi=(0,m.createGlobalStyle)(["body.web-story_page_stories-dashboard #wpbody{",";}.","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}body.","{#adminmenuwrap,#adminmenuback{z-index:15;}}"],vi.scrollbarCSS,Ti.OVERLAY_CLASS,32,160,Ti.OVERLAY_CLASS,36,Ti.BODY_CLASS);const Gi=function(){const{currentPath:e}=eo((({state:{currentPath:e}})=>({currentPath:e})));(0,g.useEffect)((()=>{document.querySelectorAll('#menu-posts-web-story ul.wp-submenu li a[href$="page=stories-dashboard"]')?.forEach((e=>{e.setAttribute("href",e.getAttribute("href")+"#/")}))}),[]),(0,g.useEffect)((()=>{document.querySelectorAll("#menu-posts-web-story ul.wp-submenu li")?.forEach((t=>{t.classList.remove("current"),t.querySelector("a")?.classList.remove("current"),t.querySelector("a")?.removeAttribute("aria-current"),t.querySelector(`a[href$="#${e}"]`)&&(t.classList.add("current"),t.querySelector("a")?.classList.add("current"),t.querySelector("a")?.setAttribute("aria-current","page"))}))}),[e])},Hi=(0,g.createContext)({state:{},actions:{}});const ji=function(e){return(0,g.useContextSelector)(Hi,e??g.identity)};const Vi={getItemByKey:function(e){let t=null;try{const a=localStorage.getItem(e);t=null!==a?JSON.parse(a):a}catch(e){e instanceof Error&&(0,E.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){e instanceof Error&&(0,E.trackError)("local_storage_write",e.message)}}},qi="web_stories_tracking_optin_banner_closed";function Wi(){const e=localStorage.getItem(qi);return Boolean(JSON.parse(e))}function $i(){const{showSnackbar:e}=(0,sn.useSnackbar)(),[t,a]=(0,g.useState)(Wi),[o,r]=(0,g.useState)(!1),{currentUser:n,toggleWebStoriesTrackingOptIn:l}=ji((({state:{currentUser:e},actions:{usersApi:{toggleWebStoriesTrackingOptIn:t}}})=>({currentUser:e,toggleWebStoriesTrackingOptIn:t}))),{currentPath:i}=eo((({state:{currentPath:e}})=>({currentPath:e}))),s=void 0!==n.data.meta?.webStoriesTrackingOptin,c=Boolean(n.data.meta?.webStoriesTrackingOptin);(0,g.useEffect)((()=>{c?(0,E.enableTracking)():(0,E.disableTracking)()}),[c]);const d=(0,g.useCallback)((()=>{l(),Vi.setItemByKey(qi,!0),r(!0),e({"aria-label":Ci.SETTINGS.UPDATED,message:Ci.SETTINGS.UPDATED,dismissible:!0})}),[e,l]),u=(0,g.useCallback)((()=>{a(!0),Vi.setItemByKey(qi,!0)}),[]);let p=!0;return(t||i===ki||!s||!o&&c)&&(p=!1),{bannerVisible:p,optedIn:c,disabled:n.isUpdating,closeBanner:u,toggleWebStoriesTrackingOptIn:d}}a(16054);var Ki=a(60298);const Xi=function(){const{settingsError:e,mediaError:t,settingSaved:a,publisherLogosError:o}=ji((({state:{settings:{error:e,settingSaved:t},media:{error:a},publisherLogos:{error:o,settingSaved:r}}})=>({settingsError:e,mediaError:a,settingSaved:t||r,publisherLogosError:o}))),{showSnackbar:r}=(0,sn.useSnackbar)(),n=(0,g.useDebouncedCallback)((e=>r({"aria-label":e,message:e,dismissible:!0})),200);(0,g.useEffect)((()=>{e?.id&&n(e.message)}),[e,n]),(0,g.useEffect)((()=>{a&&n(Ci.SETTINGS.UPDATED)}),[n,a]),(0,g.useEffect)((()=>{t?.id&&n(t.message)}),[t,n]),(0,g.useEffect)((()=>{o?.id&&n(o.message)}),[o,n])},Yi=m.default.div.withConfig({displayName:"editorSettings__Wrapper",componentId:"sc-1y9ilpk-0"})([""]),Ji=(0,m.default)(ga).withConfig({displayName:"editorSettings__Main",componentId:"sc-1y9ilpk-1"})(["display:flex;flex-direction:column;padding-top:36px;margin-top:20px;margin-bottom:56px;max-width:945px;"]),Zi=m.default.form.withConfig({displayName:"editorSettings__SettingForm",componentId:"sc-1y9ilpk-2"})(["display:grid;grid-template-columns:27% minmax(400px,1fr);column-gap:6.56%;padding-bottom:52px;@media ","{grid-template-columns:100%;row-gap:20px;}"],(({theme:e})=>e.breakpoint.mobile)),Qi=(0,m.default)(no.Headline).attrs({as:"h3"}).withConfig({displayName:"editorSettings__SettingHeading",componentId:"sc-1y9ilpk-3"})(["",";margin:8px 0;"],(({theme:e})=>Co.expandPresetStyles({preset:{...e.typography.presets.label[Ya.TextSize.Large]},theme:e}))),es=(0,m.default)(ea.Link).withConfig({displayName:"editorSettings__InlineLink",componentId:"sc-1y9ilpk-4"})(["display:inline-block;"]),ts=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__HelperText",componentId:"sc-1y9ilpk-5"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),as=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__ConnectionHelperText",componentId:"sc-1y9ilpk-6"})(["padding-top:12px;color:",";"],(({hasError:e,theme:t})=>e?t.colors.fg.negative:t.colors.fg.tertiary)),os=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__CenterMutedText",componentId:"sc-1y9ilpk-7"})(["color:",";text-align:center;"],(({theme:e})=>e.colors.fg.tertiary)),rs=(0,m.default)(ts).withConfig({displayName:"editorSettings__SettingSubheading",componentId:"sc-1y9ilpk-8"})(["padding:8px 0;"]),ns=(0,m.default)(ts).withConfig({displayName:"editorSettings__TextInputHelperText",componentId:"sc-1y9ilpk-9"})(["padding-top:12px;"]),ls=(0,m.default)(Sa.Text.Label).withConfig({displayName:"editorSettings__CheckboxLabel",componentId:"sc-1y9ilpk-10"})(["display:flex;justify-content:flex-start;margin-top:8px;cursor:pointer;"]),is=(0,m.default)(ts).withConfig({displayName:"editorSettings__CheckboxLabelText",componentId:"sc-1y9ilpk-11"})(["margin-left:8px;"]),ss=(0,m.default)(os).withConfig({displayName:"editorSettings__Error",componentId:"sc-1y9ilpk-12"})(["padding-bottom:10px;color:",";"],(({theme:e})=>e.colors.fg.negative)),cs=m.default.div.withConfig({displayName:"editorSettings__UploadedContainer",componentId:"sc-1y9ilpk-13"})(["display:grid;grid-template-columns:repeat(auto-fill,102px);grid-auto-rows:102px;grid-column-gap:12px;grid-row-gap:20px;padding-bottom:20px;margin-bottom:4px;border:1px solid transparent;",";"],qt.focusableOutlineCSS),ds=m.default.div.withConfig({displayName:"editorSettings__GridItemContainer",componentId:"sc-1y9ilpk-14"})(["position:relative;",";&:hover,&:focus-within{button{opacity:1 !important;}}"],(({active:e,theme:t})=>e&&(0,m.css)(["border:1px solid ",";border-radius:",";"],t.colors.border.defaultActive,t.borders.radius.small))),us=m.default.button.withConfig({displayName:"editorSettings__GridItemButton",componentId:"sc-1y9ilpk-15"})(["display:block;background-color:transparent;border:2px solid transparent;width:100%;height:100%;border-radius:4px;padding:0;",";"],qt.focusableOutlineCSS),ps=m.default.img.withConfig({displayName:"editorSettings__Logo",componentId:"sc-1y9ilpk-16"})(["object-fit:cover;width:100%;height:100%;border-radius:4px;"]),ms=m.default.div.withConfig({displayName:"editorSettings__MenuContainer",componentId:"sc-1y9ilpk-17"})(["position:absolute;top:0;width:100%;height:100%;"]),fs=(0,m.default)(Bt.Button).attrs({size:Mt.ButtonSize.Small,type:Mt.ButtonType.Secondary,variant:Mt.ButtonVariant.Circle}).withConfig({displayName:"editorSettings__LogoMenuButton",componentId:"sc-1y9ilpk-18"})(["opacity:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"],(({isActive:e,menuOpen:t})=>t||e?1:0)),bs=(0,m.default)(Bt.Button).withConfig({displayName:"editorSettings__SaveButton",componentId:"sc-1y9ilpk-19"})(["height:36px;"]),gs=(0,m.default)(Bt.Button).withConfig({displayName:"editorSettings__TestConnectionButton",componentId:"sc-1y9ilpk-20"})(["height:36px;margin-top:12px;"]),hs=m.default.div.withConfig({displayName:"editorSettings__InlineForm",componentId:"sc-1y9ilpk-21"})(["display:flex;align-items:flex-start;"]),_s=m.default.label.withConfig({displayName:"editorSettings__VisuallyHiddenLabel",componentId:"sc-1y9ilpk-22"})(Ea.visuallyHidden),ys=(0,m.default)(Aa.default).withConfig({displayName:"editorSettings__SettingsTextInput",componentId:"sc-1y9ilpk-23"})(["margin-right:8px;"]),Es=(m.default.span.withConfig({displayName:"editorSettings__VisuallyHiddenDescription",componentId:"sc-1y9ilpk-24"})(Ea.visuallyHidden),(0,m.default)(Zi).withConfig({displayName:"editorSettings__MultilineForm",componentId:"sc-1y9ilpk-25"})(["margin-bottom:28px;","{margin-top:20px;}"],hs)),Ss={SLOT_ID_LABEL:(0,n.__)("Monetization type","web-stories"),HELPER_MESSAGE_ADSENSE:(0,n.__)("Learn more about <a>how to monetize your Web Stories</a> using AdSense. Once configured, AdSense will determine where and how to insert ads into the story. Consult <help>AdSense Help</help> for any further assistance.","web-stories"),HELPER_MESSAGE_ADMANAGER:(0,n.__)("Learn how to <a>enable programmatic demand in Web Stories</a> through Ad Manager.","web-stories"),HELPER_MESSAGE_MGID:(0,n.__)("Learn how to start <a>monetizing Web Stories with MGID Native Solution</a>","web-stories"),HELPER_LINK_ADSENSE:(0,n.__)("https://support.google.com/adsense/answer/10175505","web-stories"),HELPER_LINK_ADSENSE_HELP:(0,n.__)("https://support.google.com/adsense/","web-stories"),HELPER_LINK_ADMANAGER:(0,n.__)("https://support.google.com/admanager/answer/9416436","web-stories"),HELPER_LINK_MGID:(0,n.__)("https://help.mgid.com/generate-revenue-with-amp-web-stories?utm_source=wp-plugin&utm_medium=web-stories-by-google","web-stories")},ws=[{label:(0,n._x)("None","ad network","web-stories"),value:Ai},{label:(0,n.__)("Google AdSense","web-stories"),value:xi},{label:(0,n.__)("Google Ad Manager","web-stories"),value:Oi},{label:(0,n.__)("MGID","web-stories"),value:Di}];const vs=function AdNetworkSettings({adNetwork:e,handleUpdate:t}){const[a,o]=(0,g.useState)(e);(0,g.useEffect)((()=>o(e)),[e]);const n=(0,g.useMemo)((()=>Oi===a?Ss.HELPER_MESSAGE_ADMANAGER:xi===a?Ss.HELPER_MESSAGE_ADSENSE:Di===a?Ss.HELPER_MESSAGE_MGID:null),[a]),l=(0,g.useMemo)((()=>Oi===a?Ss.HELPER_LINK_ADMANAGER:xi===a?Ss.HELPER_LINK_ADSENSE:Di===a?Ss.HELPER_LINK_MGID:null),[a]),i=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_monetization_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(vr.default,{ariaLabel:Ss.SLOT_ID_LABEL,options:ws,selectedValue:a,onMenuItemClick:(e,a)=>t(a),fillWidth:!0}),n&&r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:l,rel:"noreferrer",target:"_blank",onClick:i,size:Ya.TextSize.Small}),help:r.createElement(es,{href:Ss.HELPER_LINK_ADSENSE_HELP,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},n)))},Ts=/^\/\d+(,\d+)?(\/[\w\d_\-.*\\!<:()]{1,99}[^/])*$/;const Cs={SLOT_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,n.__)("Example: %s","web-stories"),"/123456789/a4a/amp_story_dfp_example"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google Ad Manager Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const Is=function GoogleAdManagerSettings({slotId:e,handleUpdate:t}){const[a,o]=(0,g.useState)(e),[n,l]=(0,g.useState)(""),i=a!==e&&!n,s=!i;(0,g.useEffect)((()=>{o(e)}),[e]);const c=(0,g.useCallback)((e=>{const{value:t}=e.target;o(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ts))}(t)?l(""):l(Cs.INPUT_ERROR)}),[]),d=(0,g.useCallback)((()=>{i&&t(a)}),[i,a,t]),u=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),d())}),[d]);return r.createElement(r.Fragment,null,r.createElement(hs,null,r.createElement(_s,{htmlFor:"adManagerSlotId"},Cs.SLOT_ID_LABEL),r.createElement(ys,{id:"adManagerSlotId","aria-label":Cs.SLOT_ID_LABEL,value:a,onChange:c,onKeyDown:u,placeholder:Cs.SLOT_ID_PLACEHOLDER,hasError:Boolean(n),hint:n}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:s,onClick:d},Cs.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},Cs.SLOT_ID_CONTEXT))},ks=/^(ca-)?pub-\d{16}$/;const Ls=/^\d{10}$/;const As={PUBLISHER_ID_CONTEXT:(0,X.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,n.__)("Example: %1$s or %2$s. <a>Find your AdSense Publisher ID</a>.","web-stories"),"pub-1234567891234567","ca-pub-1234567891234567"),PUBLISHER_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/105516","web-stories"),PUBLISHER_ID_PLACEHOLDER:(0,n.__)("Enter your Publisher ID","web-stories"),PUBLISHER_ID_LABEL:(0,n.__)("Google AdSense Publisher ID","web-stories"),SLOT_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,n.__)("Example: %s. Copy the slot ID from <a>your ad unit’s code</a>. The same ad unit will be used for all of your Web Stories.","web-stories"),"1234567890"),SLOT_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/9274019","web-stories"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google AdSense Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const xs=function GoogleAdSenseSettings({publisherId:e,slotId:t,handleUpdatePublisherId:a,handleUpdateSlotId:o}){const[n,l]=(0,g.useState)(e),[i,s]=(0,g.useState)(""),c=n!==e&&!i,d=!c,[u,p]=(0,g.useState)(t),[m,f]=(0,g.useState)(""),b=u!==t&&!m,h=!b;(0,g.useEffect)((()=>{l(e)}),[e]);const _=(0,g.useCallback)((e=>{const{value:t}=e.target;l(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(ks))}(t)?s(""):s(As.INPUT_ERROR)}),[]),y=(0,g.useCallback)((()=>{c&&a(n)}),[c,n,a]),S=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),y())}),[y]);(0,g.useEffect)((()=>{p(t)}),[t]);const w=(0,g.useCallback)((e=>{const{value:t}=e.target;p(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ls))}(t)?f(""):f(As.INPUT_ERROR)}),[]),v=(0,g.useCallback)((()=>{b&&o(u)}),[b,u,o]),T=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),v())}),[v]),C=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_adsense_publisher_id_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(hs,null,r.createElement(_s,{htmlFor:"adSensePublisherId"},As.PUBLISHER_ID_LABEL),r.createElement(ys,{"aria-label":As.PUBLISHER_ID_LABEL,id:"adSensePublisherId",name:"adSensePublisherId","data-testid":"adSensePublisherId",value:n,onChange:_,onKeyDown:S,placeholder:As.PUBLISHER_ID_PLACEHOLDER,hasError:Boolean(i),hint:i}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:d,onClick:y,"data-testid":"adSensePublisherIdButton"},As.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:As.PUBLISHER_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:C,size:Ya.TextSize.Small})}},As.PUBLISHER_ID_CONTEXT)),r.createElement(hs,null,r.createElement(_s,{htmlFor:"adSenseSlotId"},As.SLOT_ID_LABEL),r.createElement(ys,{id:"adSenseSlotId","aria-label":As.SLOT_ID_LABEL,name:"adSenseSlotId","data-testid":"adSenseSlotId",value:u,onChange:w,onKeyDown:T,placeholder:As.SLOT_ID_PLACEHOLDER,hasError:Boolean(m),hint:m}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:h,onClick:v,"data-testid":"adSenseSlotIdButton"},As.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:As.SLOT_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},As.SLOT_ID_CONTEXT)))},Os=/^\d{7,20}$/;const Ds={WIDGET_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,n.__)("Example: %s","web-stories"),"1234567"),WIDGET_ID_PLACEHOLDER:(0,n.__)("Enter your MGID Widget ID","web-stories"),WIDGET_ID_LABEL:(0,n.__)("Widget ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const Ns=function MgidSettings({widgetId:e,handleUpdate:t}){const[a,o]=(0,g.useState)(e),[n,l]=(0,g.useState)(""),i=a!==e&&!n,s=!i;(0,g.useEffect)((()=>{o(e)}),[e]);const c=(0,g.useCallback)((e=>{const{value:t}=e.target;o(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Os))}(t)?l(""):l(Ds.INPUT_ERROR)}),[]),d=(0,g.useCallback)((()=>{i&&t(a)}),[i,a,t]),u=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),d())}),[d]);return r.createElement(r.Fragment,null,r.createElement(hs,null,r.createElement(_s,{htmlFor:"mgidWidgetId"},Ds.WIDGET_ID_LABEL),r.createElement(ys,{id:"mgidWidgetId","aria-label":Ds.WIDGET_ID_LABEL,value:a,onChange:c,onKeyDown:u,placeholder:Ds.WIDGET_ID_PLACEHOLDER,hasError:Boolean(n),hint:n}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:s,onClick:d},Ds.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},Ds.WIDGET_ID_CONTEXT))},Ps={SECTION_HEADING:(0,n.__)("Monetization","web-stories"),HELPER_MESSAGE_NONE:(0,n.__)("Monetize your content by showing ads in your Web Stories. <a>Learn more</a>.","web-stories"),HELPER_LINK_NONE:(0,n.__)("https://amp.dev/documentation/guides-and-tutorials/develop/advertise_amp_stories/","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google AdSense for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google AdSense</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("Site Kit by Google has already enabled Google AdSense for your Web Stories, all changes to your ad configuration should occur there.","web-stories")};const Rs=function AdManagement({updateSettings:e,adNetwork:t,publisherId:a,adSenseSlotId:o,adManagerSlotId:n,mgidWidgetId:l,siteKitStatus:i}){const{adsenseActive:s,installed:c,adsenseLink:d}=i,u=(0,g.useCallback)((e=>(0,E.trackClick)(e,"monetization","dashboard",Ps.HELPER_LINK_NONE)),[]),p=(0,g.useCallback)((t=>e({adSensePublisherId:t})),[e]),m=(0,g.useCallback)((t=>e({adSenseSlotId:t})),[e]),f=(0,g.useCallback)((t=>e({adManagerSlotId:t})),[e]),b=(0,g.useCallback)((t=>e({mgidWidgetId:t})),[e]),h=(0,g.useCallback)((t=>{e({adNetwork:t}),(0,E.trackEvent)("change_ad_network",{name:t})}),[e]),_=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_site_kit_link")),[]),y=(0,g.useMemo)((()=>s?null:r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:d,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:_})}},c?Ps.SITE_KIT_INSTALLED:Ps.SITE_KIT_NOT_INSTALLED)),[s,c,d,_]);return r.createElement(Es,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Qi,null,Ps.SECTION_HEADING),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:Ps.HELPER_LINK_NONE,rel:"noreferrer",target:"_blank",onClick:u,size:Ya.TextSize.Small})}},Ps.HELPER_MESSAGE_NONE)),r.createElement(rs,{size:Ya.TextSize.Small},y)),s?r.createElement("div",null,r.createElement(ns,{size:Ya.TextSize.Small},Ps.SITE_KIT_IN_USE)):r.createElement("div",null,r.createElement(vs,{handleUpdate:h,adNetwork:t}),xi===t&&r.createElement(xs,{handleUpdatePublisherId:p,handleUpdateSlotId:m,publisherId:a,slotId:o,siteKitStatus:i}),Oi===t&&r.createElement(Is,{handleUpdate:f,slotId:n}),Di===t&&r.createElement(Ns,{handleUpdate:b,widgetId:l})))};var Bs=a(25252);Pt.shape({value:Pt.number,set:Pt.func}).isRequired,Pt.number,Pt.bool,Pt.arrayOf(Pt.shape({disabled:Pt.bool,href:Pt.string,label:Pt.string.isRequired,openNewTab:Pt.bool,onClick:Pt.func,onFocus:Pt.func})).isRequired,Pt.func.isRequired,Pt.shape({url:Pt.string,title:Pt.string,id:Pt.number,active:Pt.bool}).isRequired;const Ms=function PopoverLogoContextMenu({isActive:e,idx:t,publisherLogo:a,contextMenuId:o,onMenuItemToggle:l,items:i}){const s=o.value===a.id,c=e?0:-1,d=(0,g.useCallback)((e=>o.set(e)),[o]),u=(0,g.useCallback)((()=>d(-1)),[d]);return r.createElement(ms,null,r.createElement(fs,{tabIndex:c,isActive:e,menuOpen:s,"data-testid":`publisher-logo-context-menu-button-${t}`,"aria-label":(0,X.default)(/* translators: %s: logo title */ /* translators: %s: logo title */
(0,n.__)("Publisher logo menu for %s","web-stories"),a.title),onClick:e=>{e.preventDefault(),l(s?null:a.id),d(s?-1:a.id)},onFocus:()=>{l(s?null:a.id)}},r.createElement(Bs.default,{"aria-hidden":"true"})),r.createElement(Zt.default,{animate:!0,isOpen:s,"data-testid":`publisher-logo-context-menu-${t}`,onDismiss:u},i.map((({label:e,separator:t,...a})=>{const o=a.href?na:la.default;return r.createElement(g.Fragment,{key:e},"top"===t&&r.createElement(ia.default,null),r.createElement(o,a,e),"bottom"===t&&r.createElement(ia.default,null))}))))},Us=(0,g.forwardRef)((({contextMenuId:e,index:t,onMenuItemToggle:a,onRemoveLogo:o,onUpdateDefaultLogo:l,publisherLogo:i,setFocusedPublisherLogoId:s,showLogoContextMenu:c,isFocused:d},u)=>{const p=[{label:(0,n.__)("Set as Default","web-stories"),onClick:e=>{e.preventDefault(),l(i)},disabled:i.active},{label:(0,n.__)("Delete","web-stories"),onClick:e=>{e.preventDefault(),o(i,t)}}];return r.createElement(ds,{ref:u,role:"listitem",active:i.active,"data-testid":`publisher-logo-${t}`},r.createElement(us,{onFocus:()=>{s(i.id)},"data-testid":`uploaded-publisher-logo-${t}`,isSelected:d,tabIndex:d?0:-1,onClick:e=>{e.preventDefault(),s(i.id)},"aria-label":(0,X.default)(/* translators: %s: logo title.*/ /* translators: %s: logo title.*/
(0,n.__)("Publisher Logo %s","web-stories"),i.title)},r.createElement(ps,{src:i.url,alt:i.title})),i.active&&r.createElement(os,{size:Ya.TextSize.XSmall},(0,n.__)("Default","web-stories")),c&&r.createElement(Ms,{isActive:d,idx:t,items:p,publisherLogo:i,onMenuItemToggle:a,contextMenuId:e}))}));Us.displayName="GridItem";const Fs={SECTION_HEADING:(0,n.__)("Publisher Logo","web-stories"),UPLOAD_CONTEXT:(0,n.__)("Upload your logos here and they will become available to any stories you create.","web-stories"),CLICK_CONTEXT:(0,n.__)("Click on logo to set as default if you want that logo to be used on default logo for all your stories.","web-stories"),REMOVAL:(0,n.__)("Removing a logo from your settings won't remove it from any stories using that logo.","web-stories"),INSTRUCTIONS:(0,n.__)("Avoid vector files, such as svg or eps. Logos should be at least 96x96 pixels and a perfect square. The background should not be transparent.","web-stories"),SUBMIT:(0,n.__)("Upload logo","web-stories"),ARIA_LABEL:(0,n.__)("Click to upload a new logo","web-stories"),HELPER_UPLOAD:(0,n.__)("Drag a jpg, png, or static gif in this box. Or click “Upload logo” below.","web-stories")};const zs=function PublisherLogoSettings({canUploadFiles:e,onAddLogos:t,onRemoveLogo:a,onUpdateDefaultLogo:o,isLoading:l,publisherLogos:i,uploadError:s}){const{isRTL:c,allowedImageMimeTypes:d}=y(),u=(0,g.useRef)(),p=(0,g.useRef)(),m=(0,g.useRef)({}),[f,b]=(0,g.useState)(null),[h,_]=(0,g.useState)(null),[E,S]=(0,g.useState)(null),w=1===i.length,v=(0,g.useRef)(i.length),T=(0,g.useCallback)(((e,t)=>{S(-1),a?.(e),_(t),v.current=i.length}),[a,i.length]),C=(0,g.useCallback)((e=>{S(-1),o?.(e)}),[o]);(0,g.useEffect)((()=>{if(Boolean(h?.toString())&&i.length!==v.current){if(0===i.length)return u.current?.getElementsByTagName("input")[0].focus();const e=h>0?i[h-1]:i[0];return b(e.id),m.current[e.id].firstChild.focus(),_(null)}}),[h,i,b]),(0,Nt.default)({containerRef:u,gridRef:p,itemRefs:m,isRTL:c,currentItemId:f,items:i});const I=(0,g.useCallback)((e=>{b(e)}),[]);return(0,g.useFocusOut)(u,(()=>{b(null),S(null)}),[]),r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,Fs.SECTION_HEADING),r.createElement(rs,{size:Ya.TextSize.Small},Fs.UPLOAD_CONTEXT),r.createElement(rs,{size:Ya.TextSize.Small},Fs.CLICK_CONTEXT),r.createElement(rs,{size:Ya.TextSize.Small},Fs.REMOVAL)),r.createElement("div",{ref:u,"data-testid":"publisher-logos-container"},i.length>0&&r.createElement(cs,{tabIndex:0,ref:p,role:"list","aria-label":(0,n.__)("Viewing existing publisher logos","web-stories")},i.map(((e,t)=>r.createElement(Us,{key:e.id,ref:t=>{m.current[e.id]=t},contextMenuId:{set:S,value:E},index:t,isFocused:f===e.id,onMenuItemToggle:I,onRemoveLogo:T,onUpdateDefaultLogo:C,publisherLogo:e,setFocusedPublisherLogoId:b,showLogoContextMenu:!w})))),s&&r.createElement(ss,{role:"alert"},s),e&&r.createElement(r.Fragment,null,r.createElement(La,{onSubmit:t,id:"settings_publisher_logos",isLoading:l,label:Fs.SUBMIT,isMultiple:!0,ariaLabel:Fs.ARIA_LABEL,instructionalText:Fs.HELPER_UPLOAD,acceptableFormats:Object.values(d)}),r.createElement(rs,{size:Ya.TextSize.Small},Fs.INSTRUCTIONS))))};var Gs=a(45431),Hs=a(83308);function TelemetrySettings({selected:e,onCheckboxSelected:t,disabled:a}){const o=(0,g.useMemo)((()=>`telemetry-opt-in-${(0,Gs.default)()}`),[]);return r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,(0,n.__)("Data Sharing Opt-in","web-stories"))),r.createElement("div",null,r.createElement(ls,{htmlFor:o},r.createElement(Hs.default,{id:o,"data-testid":"telemetry-settings-checkbox",disabled:a,onChange:t,checked:Boolean(e)}),r.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},r.createElement(dr.default,{mapping:{a:r.createElement("a",{href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories"))))))}function MediaOptimizationSettings({selected:e,onCheckboxSelected:t,disabled:a}){const o=(0,g.useMemo)((()=>`media-optimization-${(0,Gs.default)()}`),[]);return r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,(0,n.__)("Video Optimization","web-stories"))),r.createElement("div",null,r.createElement(ls,{htmlFor:o},r.createElement(Hs.default,{id:o,"data-testid":"media-optimization-settings-checkbox",disabled:a,onChange:t,checked:Boolean(e)}),r.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,n.__)("Automatically optimize videos used in Web Stories. We recommend enabling this feature. Video files that are too large or have an unsupported format (like .mov) will otherwise not display properly.","web-stories")))))}function VideoCacheSettings({isEnabled:e=!1,updateSettings:t}){const a=(0,g.useMemo)((()=>`video-cache-${(0,Gs.default)()}`),[]),o=(0,g.useCallback)((()=>t({videoCache:!e})),[t,e]);return r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,(0,n.__)("Video Cache","web-stories"))),r.createElement("div",null,r.createElement(ls,{htmlFor:a},r.createElement(Hs.default,{id:a,"data-testid":"video-cache-settings-checkbox",onChange:o,checked:Boolean(e)}),r.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,n.__)("Reduce hosting costs and improve user experience by serving videos from the Google cache.","web-stories")))))}function DataRemovalSettings({isEnabled:e=!1,updateSettings:t}){const a=(0,g.useCallback)((()=>t({dataRemoval:!e})),[t,e]);return r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,(0,n.__)("Plugin Uninstall","web-stories"))),r.createElement("div",null,r.createElement(ls,{htmlFor:"data-removal-settings"},r.createElement(Hs.default,{id:"data-removal-settings","data-testid":"data-removal-settings-checkbox",onChange:a,checked:Boolean(e)}),r.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,n.__)("Remove all data including stories and saved templates when uninstalling the Web Stories plugin.","web-stories")))))}const js={LABEL:(0,n.__)("Stories Archives","web-stories"),SECTION_HEADING:(0,n.__)("Stories Archives","web-stories"),ARCHIVE_CONTENT:(0,n.__)("By default WordPress automatically creates an archive page, displaying your latest stories in your theme's layout.","web-stories"),ARCHIVE_CONTENT_2:(0,n.__)("You can customize or disable this behavior.","web-stories"),SUB_TEXT_CUSTOM:(0,n.__)("Choose a page to serve as your Web Stories archive. Use the Web Stories block to add stories to this page.","web-stories")},Vs=[{label:(0,n._x)("Default","archive type","web-stories"),value:Ni.DEFAULT},{label:(0,n.__)("Disabled","web-stories"),value:Ni.DISABLED},{label:(0,n.__)("Create your own","web-stories"),value:Ni.CUSTOM}],qs=m.default.div.withConfig({displayName:"archive__SearchWrapper",componentId:"sc-u9kj1r-0"})(["padding-top:12px;"]);function ArchiveSettings({archive:e=Ni.DEFAULT,archiveURL:t,defaultArchiveURL:a,archivePageId:o,updateSettings:l,searchPages:i,getPageById:s}){const[c,d]=(0,g.useState)(t),[u,p]=(0,g.useState)(o?{value:o}:void 0),[m,f]=(0,g.useState)([]),b=(0,g.useCallback)(((e,a)=>{d(t);const r=a===Ni.CUSTOM?o:0;p(r),l({archive:a,archivePageId:r})}),[l,o,t]),h=(0,g.useCallback)(((e,t)=>{const a=Number(t.value);a!==o&&(p(a?{value:a}:void 0),l({archivePageId:a}))}),[o,l]);(0,g.useEffect)((()=>{let t=!0;return o&&Ni.CUSTOM===e&&(async()=>{const{title:e,link:a}=await s(o);if(t&&e){const t={value:o,label:e};f((e=>[t,...e])),p(t),d(a)}})(),()=>{t=!1}}),[e,o,s]);const _=(0,g.useDebouncedCallback)((async e=>{await(0,E.trackEvent)("archive_page_search",{search_type:"dashboard",search_term:e}),f(await i(e))}),nt);return r.createElement(Zi,null,r.createElement("div",null,r.createElement(Qi,null,js.SECTION_HEADING),r.createElement(ns,{size:Ya.TextSize.Small},js.ARCHIVE_CONTENT),r.createElement(ns,{size:Ya.TextSize.Small},js.ARCHIVE_CONTENT_2)),r.createElement("div",null,r.createElement(vr.default,{ariaLabel:js.LABEL,options:Vs,selectedValue:e,onMenuItemClick:b,fillWidth:!0}),Ni.DISABLED===e&&r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{code:r.createElement("code",null)}},(0,X.default)(/* translators: %s: archive url. */ /* translators: %s: archive url. */
(0,n.__)("Turn off the default archive page at <code>%s</code>. Users will see a 404 Not Found page when trying to access the default archive page.","web-stories"),c))),Ni.CUSTOM===e&&r.createElement(ns,{size:Ya.TextSize.Small},js.SUB_TEXT_CUSTOM),Ni.CUSTOM===e&&r.createElement(qs,null,r.createElement(en,{placeholder:(0,n.__)("Select page","web-stories"),selectedValue:u,options:m,handleSearchValueChange:_,emptyText:(0,n.__)("No pages available","web-stories"),onMenuItemClick:h})),Ni.DISABLED!==e&&r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:c,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small}),code:r.createElement("code",null)}},o&&c!==a?(0,X.default)(/* translators: 1. current archive url, 2. default archive url. */ /* translators: 1. current archive url, 2. default archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>. <code>%2$s</code> will automatically redirect to this page.","web-stories"),c,a):(0,X.default)(/* translators: %s: archive url. */ /* translators: %s: archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>.","web-stories"),c)))))}var Ws=a(37169),$s=a(48068);const Ks=/^ua-\d+-\d+|g-\w+$/;const Xs=(0,m.default)(Ws.default).withConfig({displayName:"googleAnalytics__StyledNotificationBubble",componentId:"sc-svg62t-0"})(["display:inline-block;margin-left:10px;"]),Ys={CONTEXT:(0,n.__)("The story editor will append a default, configurable AMP analytics configuration to your story. If you’re interested in going beyond what the default configuration, read this <a>article</a>.","web-stories"),CONTEXT_LINK:"https://blog.amp.dev/2019/08/28/analytics-for-your-amp-stories/",SECTION_HEADING:(0,n.__)("Google Analytics","web-stories"),PLACEHOLDER:(0,n.__)("Enter your Google Analytics Measurement ID","web-stories"),ARIA_LABEL:(0,n.__)("Enter your Google Analytics Measurement ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google Analytics for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google Analytics</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("<b>Note: </b>If Site Kit is active, it will be used to set up Google Analytics by default. However, you can customize the behavior in case you need more flexibility.","web-stories"),ANALYTICS_DROPDOWN_LABEL:(0,n.__)("Analytics Type","web-stories"),ANALYTICS_DROPDOWN_PLACEHOLDER:(0,n.__)("Select Analytics Type","web-stories")},Js=[{value:Mi,label:(0,n.__)("Use Site Kit for analytics (default)","web-stories")},{value:Ui,label:(0,n.__)("Use only Web Stories for analytics","web-stories")},{value:Fi,label:(0,n.__)("Use both","web-stories")}],Zs=m.default.div.withConfig({displayName:"googleAnalytics__DropdownContainer",componentId:"sc-svg62t-1"})(["padding-top:12px;"]),Qs=m.default.div.withConfig({displayName:"googleAnalytics__WarningContainer",componentId:"sc-svg62t-2"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(({theme:e})=>e.colors.border.defaultNormal),(({theme:e})=>e.borders.radius.small)),ec=(0,m.default)($s.default).withConfig({displayName:"googleAnalytics__WarningIcon",componentId:"sc-svg62t-3"})(["width:32px;height:100%;color:",";"],(({theme:e})=>e.colors.status.warning)),tc=(0,m.default)(Sa.Text.Paragraph).attrs({size:Ya.TextSize.Small}).withConfig({displayName:"googleAnalytics__Message",componentId:"sc-svg62t-4"})(["max-width:calc(100% - 40px);"]);const ac=function GoogleAnalyticsSettings({googleAnalyticsId:e,handleUpdateAnalyticsId:t,usingLegacyAnalytics:a,handleMigrateLegacyAnalytics:o,siteKitStatus:l={},googleAnalyticsHandler:i,handleUpdateGoogleAnalyticsHandler:s}){const[c,d]=(0,g.useState)(e),[u,p]=(0,g.useState)(i),[m,f]=(0,g.useState)(""),b=c!==e&&!m,h=!b,{analyticsActive:_,installed:y,analyticsLink:S}=l;(0,g.useEffect)((()=>{d(e)}),[e]),(0,g.useEffect)((()=>{p(i)}),[i]);const w=(0,g.useCallback)((e=>{const{value:t}=e.target;d(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ks))}(t)?f(""):f(Ys.INPUT_ERROR)}),[]),v=(0,g.useCallback)((e=>{p(e),s(e)}),[s]),T=(0,g.useCallback)((()=>{b&&t(c)}),[b,c,t]),C=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),T())}),[T]),I=(0,g.useCallback)((e=>{e.preventDefault(),o(),(0,E.trackEvent)("migrate_story_auto_analytics")}),[o]),k=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_auto_analytics_link")),[]),L=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_site_kit_link")),[]),A=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_analytics_docs")),[]),x=(0,g.useMemo)((()=>_?null:r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:S,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:L})}},y?Ys.SITE_KIT_INSTALLED:Ys.SITE_KIT_NOT_INSTALLED)),[_,y,S,L]);return r.createElement(Zi,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Qi,{htmlFor:"gaTrackingID",as:"h3"},Ys.SECTION_HEADING,a&&r.createElement(Xs,{notificationCount:1,isSmall:!0})),r.createElement(rs,{size:Ya.TextSize.Small},x),a&&r.createElement(r.Fragment,null,r.createElement(rs,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:"https://wp.stories.google/docs/seo/",rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:k})}},(0,n.__)("An improved analytics configuration is now available. <a>Learn more</a>.","web-stories"))),r.createElement(rs,{size:Ya.TextSize.Small},r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,onClick:I},(0,n.__)("Migrate","web-stories"))))),r.createElement("div",null,r.createElement(hs,null,r.createElement(_s,{htmlFor:"gaTrackingId"},Ys.ARIA_LABEL),r.createElement(ys,{"aria-label":Ys.ARIA_LABEL,id:"gaTrackingId",value:c,onChange:w,onKeyDown:C,placeholder:Ys.PLACEHOLDER,hasError:Boolean(m),hint:m}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:h,onClick:T},Ys.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:Ys.CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:A})}},Ys.CONTEXT)),_&&r.createElement(r.Fragment,null,r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,null,Ys.SITE_KIT_IN_USE)),r.createElement(Zs,null,r.createElement(vr.default,{id:"analyticsType",ariaLabel:Ys.ANALYTICS_DROPDOWN_LABEL,placeholder:Ys.ANALYTICS_DROPDOWN_PLACEHOLDER,options:Js,onMenuItemClick:(e,t)=>{v(t)},selectedValue:u}))),!e||e.startsWith("UA-")?r.createElement(Qs,null,r.createElement(ec,{"aria-hidden":!0}),r.createElement(tc,null,r.createElement(dr.default,{mapping:{a:r.createElement(ea.Link,{href:(0,n.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:e=>(0,E.trackClick)(e,"click_ua_deprecation_docs")}),a2:r.createElement(ea.Link,{href:(0,n.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:e=>(0,E.trackClick)(e,"click_ga4_docs")})}},(0,n.__)("As <a>previously announced</a>, Universal Analytics will stop processing new visits starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4), our analytics product of record.","web-stories")))):null))};var oc=a(30385);function rc(e,t="https"){return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}var nc=a(96921);const lc=function ConfirmationDialog({onClose:e,onPrimary:t}){return r.createElement(m.ThemeProvider,{theme:i.theme},r.createElement(ha.default,{isOpen:!0,onClose:e,title:(0,n.__)("Delete Font","web-stories"),actions:r.createElement(r.Fragment,null,r.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,onClick:()=>e()},(0,n.__)("Cancel","web-stories")),r.createElement(Bt.Button,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,onClick:()=>t()},(0,n.__)("Delete Font","web-stories")))},r.createElement(Sa.Text.Paragraph,{size:Ya.TextSize.Small},(0,n.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories"))))};const ic=async function(e){const{load:t}=await Promise.all([a.e(4422),a.e(2794)]).then(a.bind(a,44422)),o=await t(e);return{name:o.names.fullName.en,family:o.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:o.unitsPerEm,asc:o.ascender,des:o.descender,tAsc:o.tables.os2.sTypoAscender,tDes:o.tables.os2.sTypoDescender,tLGap:o.tables.os2.sTypoLineGap,wAsc:o.tables.os2.usWinAscent,wDes:o.tables.os2.usWinDescent,xH:o.tables.os2.sxHeight,capH:o.tables.os2.sCapHeight,yMin:o.tables.head.yMin,yMax:o.tables.head.yMax,hAsc:o.tables.hhea.ascender,hDes:o.tables.hhea.descender,lGap:o.tables.hhea.lineGap}}},sc={ADD_CONTEXT:(0,n.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,n.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,n.__)("Custom Fonts","web-stories"),LABEL:(0,n.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,n.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,n.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Add Font","web-stories"),FONTS_HEADING:(0,n.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,n.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},cc=(0,m.default)(bs).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),dc=m.default.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),uc=m.default.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),pc=(0,m.default)(Sa.Text.Span).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),mc=m.default.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(({theme:e})=>`1px solid ${e.colors.divider.primary}`),(({theme:e})=>qt.focusCSS(e.colors.border.focus))),fc=(0,m.default)(Bt.Button).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(({theme:e})=>qt.focusCSS(e.colors.border.focus))),bc=m.default.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(({theme:e})=>e.colors.bg.secondary)),gc=m.default.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);align-items:center;"]),hc=(0,m.default)(Sa.Text.Paragraph).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),_c=(0,m.default)(hc).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(({theme:e})=>e.colors.fg.tertiary)),yc=m.default.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(({theme:e})=>e.colors.standard.black),(({theme:e})=>e.borders.radius.round)),Ec=[".otf",".ttf",".woff"];const Sc=function CustomFontsSettings({customFonts:e=[],addCustomFont:t,deleteCustomFont:a}){const o=(0,Jr.default)(),[l,i]=(0,g.useState)(""),[s,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(!1),[p,m]=(0,g.useState)(null),f=!s&&l,b=(0,g.useRef)(null),h=(0,g.useRef)([]),[_,y]=(0,g.useState)(0),[S,w]=(0,g.useState)(),{showSnackbar:v}=(0,sn.useSnackbar)(),T=(0,g.useCallback)((e=>{const{value:t}=e.target;i(t),0===t.length||function(e){try{return new URL(e),!0}catch{return!1}}(rc(t))?c(""):c(sc.INPUT_ERROR)}),[]),C=(0,g.useCallback)((async()=>{try{await a(p),o((0,n.__)("Font deleted","web-stories"))}catch(e){(0,E.trackError)("remove_custom_font",e?.message),v({"aria-label":Ii.REMOVE_FONT.MESSAGE,message:Ii.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{m(null),u(!1),c("")}}),[a,p,v,o]),I=(0,g.useCallback)((async()=>{if(f){const e=rc(l);try{await fetch(e,{method:"HEAD"})}catch(e){return(0,E.trackError)("add_custom_font",e?.message),void c((0,n.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let a;try{if((0,E.trackEvent)("add_custom_font",{url:e}),a=await ic(e),!a.family)return void c((0,n.__)("Something went wrong, please try again.","web-stories"))}catch(e){return(0,E.trackError)("add_custom_font",e?.message),void c((0,X.default)(/* translators: %s: list of allowed font types. */ /* translators: %s: list of allowed font types. */
(0,n.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,oc.default)(Ec)))}try{await t({...a,url:e}),i("")}catch(e){(0,E.trackError)("add_custom_font",e?.message),c((0,X.default)(/* translators: %s: font name. */ /* translators: %s: font name. */
(0,n.__)("A font with the name %s already exists.","web-stories"),a.family))}}}),[t,f,l]),k=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),I())}),[I]);(0,g.useEffect)((()=>{const e=h.current[`row-${_}`];e&&(e.focus(),w(e.id))}),[_]);const L=e=>_===e,A=(0,g.useCallback)((t=>{const{key:a}=t;"ArrowUp"===a?(t.preventDefault(),y((e=>Math.max(0,e-1)))):"ArrowDown"===a&&(t.preventDefault(),y((t=>Math.min(e.length-1,t+1))))}),[e]);return r.createElement(Zi,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Qi,{as:"h3"},sc.SECTION_HEADING),r.createElement(rs,{size:Ya.TextSize.Small},sc.ADD_CONTEXT),r.createElement(rs,{size:Ya.TextSize.Small},sc.REMOVAL)),r.createElement(dc,null,r.createElement(hs,null,r.createElement(ys,{value:l,onChange:T,onKeyDown:k,hasError:Boolean(s),hint:s,label:sc.LABEL}),r.createElement(cc,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,disabled:!f,onClick:I},sc.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},sc.INPUT_CONTEXT),e?.length>0&&r.createElement(uc,null,r.createElement(pc,null,sc.FONTS_HEADING),r.createElement(mc,{ref:b,role:"listbox",tabIndex:0,onKeyDown:A,"aria-activedescendant":S||e[0]?.id},e.map((({id:e,family:t,url:a},o)=>r.createElement(bc,{id:`font-${e}`,ref:e=>h.current[`row-${o}`]=e,key:t,role:"option",onClick:()=>{y(o)},"aria-selected":L(o)},r.createElement(gc,null,r.createElement(hc,null,t),r.createElement(yc,null),r.createElement(_c,null,a)),r.createElement(Tooltip,{hasTail:!0,title:(0,n.__)("Delete font","web-stories")},r.createElement(fc,{"aria-label":(0,X.default)(/*translators: %s: font family. */ /*translators: %s: font family. */
(0,n.__)("Delete %s","web-stories"),t),type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,onClick:()=>{m(e),u(!0)}},r.createElement(nc.default,null))))))),r.createElement(ns,{size:Ya.TextSize.Small},sc.FONTS_CONTEXT))),d&&r.createElement(lc,{onClose:()=>u(!1),onPrimary:C}))};var wc=a(40918);const vc=/[\w-]+\.myshopify\.com/i;function Tc(e=""){return Boolean(e.toLowerCase().match(vc))}const Cc=m.default.div.withConfig({displayName:"shopify__Loading",componentId:"sc-ur0gaq-0"})(["position:relative;margin-top:10px;"]),Ic=m.default.div.withConfig({displayName:"shopify__Spinner",componentId:"sc-ur0gaq-1"})(["position:absolute;top:0;"]),kc={HOST_CONTEXT:(0,X.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,n.__)("Without <code>%1$s</code> or <code>%2$s</code>. Example: %3$s. <a>Find your URL</a>.","web-stories"),"https://","www.","yourstore.myshopify.com"),HOST_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/domains","web-stories"),HOST_PLACEHOLDER:(0,n.__)("Enter your .myshopify.com domain","web-stories"),HOST_LABEL:(0,n.__)("Shopify Domain","web-stories"),ACCESS_TOKEN_CONTEXT:(0,n.__)("<a>Learn how to get one</a>.","web-stories"),ACCESS_TOKEN_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/apps/custom-apps#get-the-api-credentials-for-a-custom-app","web-stories"),ACCESS_TOKEN_PLACEHOLDER:(0,n.__)("Enter your API access token","web-stories"),ACCESS_TOKEN_LABEL:(0,n.__)("Storefront API Access Token","web-stories"),INPUT_ERROR:(0,n.__)("Invalid format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),CONNECTION_TEST_BUTTON:(0,n.__)("Test connection","web-stories"),CONNECTION_CHECKING:(0,n.__)("Testing connection…","web-stories"),CONNECTION_SUCCESS:(0,n.__)("Connection successful","web-stories"),CONNECTION_ERROR_DEFAULT:(0,n.__)("Connection failed. Please try again.","web-stories")};const Lc=function ShopifySettings({host:e,accessToken:t,handleUpdateHost:a,handleUpdateAccessToken:o}){const l=(0,Jr.default)(),[i,s]=(0,g.useState)(e),[c,d]=(0,g.useState)(""),u=i!==e&&!c,p=!u,[m,f]=(0,g.useState)(t),[b,h]=(0,g.useState)(""),_=m!==t&&!b,S=!_,{apiCallbacks:{getProducts:w}}=y(),[v,T]=(0,g.useState)(!1),[C,I]=(0,g.useState)(""),[k,L]=(0,g.useState)(!1);(0,g.useEffect)((()=>{s(e)}),[e]),(0,g.useEffect)((()=>{f(t)}),[t]);const A=(0,g.useCallback)((e=>{const{value:t}=e.target;s(t),0===t.length||Tc(t)?d(""):d(kc.INPUT_ERROR)}),[]),x=(0,g.useCallback)((e=>{const{value:t}=e.target;Tc(t)&&s(t.match(vc)[0])}),[]),O=(0,g.useCallback)((()=>{u&&a(i)}),[u,i,a]),D=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),O())}),[O]),N=(0,g.useCallback)((e=>{const{value:t}=e.target;h(""),f(t)}),[]),P=(0,g.useCallback)((()=>{_&&o(m)}),[_,m,o]),R=(0,g.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),P())}),[P]),B=(0,g.useCallback)((async()=>{L(!1),T(!0),l(kc.CONNECTION_CHECKING),(0,E.trackEvent)("test_shopping_connection");try{await w((new Date).getTime()),I(kc.CONNECTION_SUCCESS),l(kc.CONNECTION_SUCCESS)}catch(e){(0,E.trackError)("test_shopping_connection",e?.message),L(!0),I(kc.CONNECTION_ERROR_DEFAULT),l(kc.CONNECTION_ERROR_DEFAULT)}finally{T(!1)}}),[w,l]),M=i&&!c&&m&&!b&&!v,U=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_shopify_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(hs,null,r.createElement(_s,{htmlFor:"shopifyHost"},kc.HOST_LABEL),r.createElement(ys,{"aria-label":kc.HOST_LABEL,id:"shopifyHost",name:"shopifyHost","data-testid":"shopifyHost",value:i,onChange:A,onKeyDown:D,onBlur:x,placeholder:kc.HOST_PLACEHOLDER,hasError:Boolean(c),hint:c}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:p,onClick:O,"data-testid":"shopifyHostButton"},kc.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:kc.HOST_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:U,size:Ya.TextSize.Small})}},kc.HOST_CONTEXT)),r.createElement(hs,null,r.createElement(_s,{htmlFor:"shopifyAccessToken"},kc.ACCESS_TOKEN_LABEL),r.createElement(ys,{id:"shopifyAccessToken","aria-label":kc.ACCESS_TOKEN_LABEL,name:"shopifyAccessToken","data-testid":"shopifyAccessToken",value:m,onChange:N,onKeyDown:R,placeholder:kc.ACCESS_TOKEN_PLACEHOLDER,hasError:Boolean(b),hint:b}),r.createElement(bs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:S,onClick:P,"data-testid":"shopifyAccessTokenButton"},kc.SUBMIT_BUTTON)),r.createElement(ns,{size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:kc.ACCESS_TOKEN_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},kc.ACCESS_TOKEN_CONTEXT)),r.createElement(gs,{onFocus:()=>I(""),type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:!M,onClick:B},v?kc.CONNECTION_CHECKING:kc.CONNECTION_TEST_BUTTON),v&&r.createElement(Cc,null,r.createElement(Ic,null,r.createElement(wc.default,{size:24}))),C&&r.createElement(as,{"data-testid":"api-status","aria-label":(0,n.__)("API connection status","web-stories"),hasError:k,size:Ya.TextSize.Small},C))},Ac={SLOT_ID_LABEL:(0,n.__)("Shopping provider","web-stories")};const xc=function ShoppingProviderDropDown({vendors:e,shoppingProvider:t,handleUpdate:a}){const o=[];return Object.entries(e).forEach((([e,t])=>o.push({label:t,value:e}))),r.createElement(vr.default,{ariaLabel:Ac.SLOT_ID_LABEL,options:o,selectedValue:t,onMenuItemClick:(e,t)=>a(t),fillWidth:!0})},Oc={SECTION_HEADING:(0,n.__)("Shopping","web-stories"),SHOPPING_PROVIDER_HELPER_MESSAGE:(0,n.__)("Once configured you can add products from this provider.","web-stories"),HELPER_MESSAGE:(0,n.__)("Connect your store so you can easily add products to your stories.","web-stories"),WOOCOMMERCE_INSTALL:(0,n.__)("Install <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_ACTIVE:(0,n.__)("Activate <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_MANAGE:(0,n.__)("Manage products in <a>WooCommerce</a> to make them available in Web Stories.","web-stories")};const Dc=function Shopping({updateSettings:e,shoppingProvider:t,shopifyHost:a,shopifyAccessToken:o,vendors:n,woocommerce:l}){const i=(0,g.useCallback)((t=>{e({shoppingProvider:t}),(0,E.trackEvent)("change_shopping_provider",{name:t})}),[e]),s=(0,g.useCallback)((t=>e({shopifyHost:t})),[e]),c=(0,g.useCallback)((t=>e({shopifyAccessToken:t})),[e]),d=(0,g.useCallback)((e=>(0,E.trackClick)(e,"click_woocommerce_link")),[]),{canManage:u,installed:p,active:m,link:f}=l;let b;return!1===p?b=Oc.WOOCOMMERCE_INSTALL:!1===m?b=Oc.WOOCOMMERCE_ACTIVE:!0===u&&(b=Oc.WOOCOMMERCE_MANAGE),r.createElement(Es,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Qi,null,Oc.SECTION_HEADING),r.createElement(ns,{size:Ya.TextSize.Small},Oc.HELPER_MESSAGE),t===Ri&&b&&f&&r.createElement(ns,{"data-testid":"woocommerceMessage",size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(es,{href:f,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:d})}},b))),r.createElement("div",null,r.createElement(xc,{vendors:n,shoppingProvider:t,handleUpdate:i}),r.createElement(ns,{size:Ya.TextSize.Small},Oc.SHOPPING_PROVIDER_HELPER_MESSAGE),t===Bi&&r.createElement(Lc,{handleUpdateHost:s,handleUpdateAccessToken:c,host:a,accessToken:o})))};var Nc=a(33773),Pc=a(31119);const Rc={MIN:1,MAX:20},Bc={CONTEXT:(0,n.__)("All new stories will be set to this page advancement setting. Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"),SECTION_HEADING:(0,n.__)("Default Page Advancement","web-stories"),LABEL_AUTO:(0,n.__)("Auto","web-stories"),LABEL_MANUAL:(0,n.__)("Manual","web-stories"),SWITCH_LABEL:(0,n.__)("Page Advancement","web-stories"),INPUT_LABEL:(0,n.__)("Default page duration in seconds","web-stories"),INPUT_SUFFIX:(0,n.__)("Duration","web-stories"),INPUT_HELPER:(0,X.default)(/* translators: 1: minimum duration. 2: maximum duration. */ /* translators: 1: minimum duration. 2: maximum duration. */
(0,n._n)("Duration between %1$d and %2$d second.","Duration between %1$d and %2$d seconds.",Rc.MAX,"web-stories"),Rc.MIN,Rc.MAX)},Mc=m.default.div.withConfig({displayName:"pageAdvancement__InputsWrapper",componentId:"sc-9snl1y-0"})(["margin-top:8px;"]),Uc=(0,m.default)(Nc.default).withConfig({displayName:"pageAdvancement__StyledSwitch",componentId:"sc-9snl1y-1"})(["width:186px;"]);const Fc=function PageAdvancementSettings({updateSettings:e,autoAdvance:t,defaultPageDuration:a}){const[o,l]=(0,g.useState)(t),i=(0,g.useCallback)((()=>{(0,E.trackEvent)("change_auto_advance",{value:!t}),l(!t),e({autoAdvance:!t})}),[t,e]);(0,g.useEffect)((()=>{l(t)}),[t]);const s=(0,g.useCallback)(((t,a)=>{e({defaultPageDuration:a}),(0,E.trackEvent)("change_default_page_duration",{value:a})}),[e]);return r.createElement(Es,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Qi,{as:"h3"},Bc.SECTION_HEADING),r.createElement(rs,{size:Ya.TextSize.Small},Bc.CONTEXT)),r.createElement(Mc,null,r.createElement(hs,null,r.createElement(Uc,{groupLabel:Bc.SWITCH_LABEL,name:"page-advancement-switch",value:o,onLabel:Bc.LABEL_AUTO,offLabel:Bc.LABEL_MANUAL,onChange:i,darkTheme:!1})),o&&r.createElement(r.Fragment,null,r.createElement(hs,null,r.createElement(Pc.default,{unit:` ${(0,n.__)("seconds","web-stories")}`,suffix:Bc.INPUT_SUFFIX,value:a,onChange:s,"aria-label":Bc.INPUT_SUFFIX,min:Rc.MIN,max:Rc.MAX})),r.createElement(ns,{size:Ya.TextSize.Small},Bc.INPUT_HELPER))))},zc=m.default.div.withConfig({displayName:"editorSettings__BodyViewOptionsHeader",componentId:"sc-1yxjpva-0"})([""]);const Gc=function EditorSettings(){const{fetchSettings:e,updateSettings:t,googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:l,adSenseSlotId:i,adManagerSlotId:s,mgidWidgetId:c,adNetwork:d,uploadMedia:u,newlyCreatedMediaIds:p,isMediaLoading:m,videoCache:f,dataRemoval:b,archive:h,archivePageId:_,searchPages:S,getPageById:w,customFonts:v,addCustomFont:T,deleteCustomFont:C,fetchCustomFonts:I,publisherLogos:k,addPublisherLogo:L,fetchPublisherLogos:A,removePublisherLogo:x,setPublisherLogoAsDefault:O,shoppingProvider:D,shopifyHost:N,shopifyAccessToken:P,autoAdvance:R,defaultPageDuration:B,googleAnalyticsHandler:M}=ji((({actions:{fontsApi:{addCustomFont:e,deleteCustomFont:t,fetchCustomFonts:a},settingsApi:{fetchSettings:o,updateSettings:r},pagesApi:{searchPages:n,getPageById:l},mediaApi:{uploadMedia:i},publisherLogosApi:{fetchPublisherLogos:s,addPublisherLogo:c,removePublisherLogo:d,setPublisherLogoAsDefault:u}},state:{settings:{googleAnalyticsId:p,usingLegacyAnalytics:m,adSensePublisherId:f,adSenseSlotId:b,adManagerSlotId:g,mgidWidgetId:h,adNetwork:_,videoCache:y,dataRemoval:E,archive:S,archivePageId:w,shoppingProvider:v,shopifyHost:T,shopifyAccessToken:C,autoAdvance:I,defaultPageDuration:k,googleAnalyticsHandler:L},media:{isLoading:A,newlyCreatedMediaIds:x},publisherLogos:{publisherLogos:O},customFonts:D}})=>({fetchSettings:o,updateSettings:r,googleAnalyticsId:p,usingLegacyAnalytics:m,adSensePublisherId:f,adSenseSlotId:b,adManagerSlotId:g,mgidWidgetId:h,adNetwork:_,uploadMedia:i,isMediaLoading:A,newlyCreatedMediaIds:x,videoCache:y,dataRemoval:E,archive:S,archivePageId:w,searchPages:n,getPageById:l,customFonts:D,addCustomFont:e,deleteCustomFont:t,fetchCustomFonts:a,fetchPublisherLogos:s,addPublisherLogo:c,removePublisherLogo:d,setPublisherLogoAsDefault:u,publisherLogos:O,shoppingProvider:v,shopifyHost:T,shopifyAccessToken:C,autoAdvance:I,defaultPageDuration:k,googleAnalyticsHandler:L}))),{capabilities:{canUploadFiles:U,canManageSettings:F}={},plugins:{siteKit:z={},woocommerce:G={}},maxUpload:H,maxUploadFormatted:j,allowedImageMimeTypes:V,archiveURL:q,defaultArchiveURL:W,vendors:$}=y(),{disabled:K,toggleWebStoriesTrackingOptIn:Y,optedIn:J}=$i(),{disabled:Z,toggleWebStoriesMediaOptimization:Q,mediaOptimization:ee}=function(){const{showSnackbar:e}=(0,sn.useSnackbar)(),{currentUser:t,toggleWebStoriesMediaOptimization:a}=ji((({state:{currentUser:e},actions:{usersApi:{toggleWebStoriesMediaOptimization:t}}})=>({currentUser:e,toggleWebStoriesMediaOptimization:t}))),o=Boolean(t.data.meta?.webStoriesMediaOptimization),r=(0,g.useCallback)((()=>{a(),(0,E.trackEvent)("video_optimization_optin",{status:o?"off":"on"}),e({"aria-label":Ci.SETTINGS.UPDATED,message:Ci.SETTINGS.UPDATED,dismissible:!0})}),[o,e,a]);return{mediaOptimization:o,disabled:t.isUpdating,toggleWebStoriesMediaOptimization:r}}(),[te,ae]=(0,g.useState)("");(0,g.useEffect)((()=>{F&&(e(),A(),I())}),[e,A,F,I]),(0,g.useEffect)((()=>{p.length>0&&L(p)}),[p,L]),Xi();const oe=(0,g.useCallback)((e=>t({googleAnalyticsId:e})),[t]),re=(0,g.useCallback)((()=>t({usingLegacyAnalytics:!1})),[t]),ne=(0,g.useCallback)((async e=>{let t=!0,a=!0,o=!1;const r=[];if(e.forEach((e=>{t=t&&e.size<=H;const o=V.includes(e.type);a=a&&o,o||r.push((0,Ki.default)({src:URL.createObjectURL(e)}))})),!t){const t=1===e.length?(0,X.default)(/* translators: %s: max upload size for media */ /* translators: %s: max upload size for media */
(0,n.__)("Sorry, this file is too big. Make sure your logo is under %s.","web-stories"),j):(0,X.default)(/* translators: %s: max upload size for media */ /* translators: %s: max upload size for media */
(0,n.__)("Sorry, one or more of these files are too big. Make sure your logos are all under %s.","web-stories"),j);return ae(t)}if(!a){const t=1===e.length?(0,n.__)("Sorry, this file type is not supported. Only jpg, png, and static gifs are supported for publisher logos.","web-stories"):(0,n.__)("Sorry, one or more of these files are of an unsupported file type. Only jpg, png, and static gifs are supported for publisher logos.","web-stories");return ae(t)}const l=await Promise.all(r).catch((()=>{o=!0}));if(o){const t=1===e.length?(0,n.__)("Sorry, there was an error processing your upload. Please try again.","web-stories"):(0,n.__)("Sorry, there was an error processing one or more of your uploads. Please try again.","web-stories");return ae(t)}if(!l.every((({height:e,width:t})=>e>=96&&t>=96))){const t=1===e.length?(0,X.default)(/* translators: 1 = minimum width, 2 = minimum height */ /* translators: 1 = minimum width, 2 = minimum height */
(0,n.__)("Sorry, this file is too small. Make sure your logo is larger than %s.","web-stories"),(0,X.default)("%1$dx%2$dpx",96,96)):(0,X.default)(/* translators: %s: image dimensions in pixels. */ /* translators: %s: image dimensions in pixels. */
(0,n.__)("Sorry, one or more files are too small. Make sure your logos are all larger than %s.","web-stories"),(0,X.default)("%1$dx%2$dpx",96,96));return ae(t)}return ae(""),u(e)}),[H,j,u,V]),le=(0,g.useCallback)((e=>{x(e.id)}),[x]),ie=(0,g.useCallback)((e=>O(e.id)),[O]),se=(0,g.useCallback)((e=>t({googleAnalyticsHandler:e})),[t]);return r.createElement(Ua.Provider,null,r.createElement(Yi,{"data-testid":"editor-settings"},r.createElement(nn,{heading:(0,n.__)("Settings","web-stories")}),r.createElement(ga,null,r.createElement(zc,{id:"body-view-options-header"})),r.createElement(Ua.Scrollable,null,r.createElement(Ji,null,F&&r.createElement(r.Fragment,null,r.createElement(ac,{googleAnalyticsId:a,handleUpdateAnalyticsId:oe,usingLegacyAnalytics:o,handleMigrateLegacyAnalytics:re,siteKitStatus:z,googleAnalyticsHandler:M,handleUpdateGoogleAnalyticsHandler:se}),r.createElement(zs,{onAddLogos:ne,onRemoveLogo:le,onUpdateDefaultLogo:ie,publisherLogos:k,canUploadFiles:U,isLoading:m,uploadError:te})),r.createElement(Sc,{customFonts:v,addCustomFont:T,deleteCustomFont:C}),r.createElement(TelemetrySettings,{disabled:K,onCheckboxSelected:Y,selected:J}),U&&r.createElement(MediaOptimizationSettings,{disabled:Z,onCheckboxSelected:Q,selected:ee}),F&&r.createElement(r.Fragment,null,r.createElement(VideoCacheSettings,{isEnabled:f,updateSettings:t}),r.createElement(DataRemovalSettings,{isEnabled:b,updateSettings:t}),r.createElement(ArchiveSettings,{archive:h,archiveURL:q,defaultArchiveURL:W,updateSettings:t,searchPages:S,archivePageId:_,getPageById:w}),r.createElement(Rs,{updateSettings:t,adNetwork:d,publisherId:l,adSenseSlotId:i,adManagerSlotId:s,mgidWidgetId:c,siteKitStatus:z}),r.createElement(Dc,{updateSettings:t,shoppingProvider:D,shopifyHost:N,shopifyAccessToken:P,vendors:$,woocommerce:G}),r.createElement(Fc,{updateSettings:t,autoAdvance:R,defaultPageDuration:B}))))))};function Hc(){const[e,t]=(0,g.useState)({}),[a,o]=(0,g.useState)(!1),{api:{currentUser:r}}=y();(0,g.useEffect)((()=>{var a;Object.keys(e).length||(a=r,ii({path:a}).then(ri.snakeToCamelCaseObjectKeys)).then(t)}),[r,e]);return{api:{toggleWebStoriesTrackingOptIn:(0,g.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ii({path:e,data:{meta:{web_stories_tracking_optin:!t.meta.webStoriesTrackingOptin}},method:"POST"}).then(ri.snakeToCamelCaseObjectKeys)}(r,e))}finally{o(!1)}}),[r,e]),toggleWebStoriesMediaOptimization:(0,g.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ii({path:e,data:{meta:{web_stories_media_optimization:!t.meta.webStoriesMediaOptimization}},method:"POST"}).then(ri.snakeToCamelCaseObjectKeys)}(r,e))}finally{o(!1)}}),[r,e])},currentUser:{data:e,isUpdating:a}}}const jc={LOADING_MEDIA:"loading_media",ADD_MEDIA_SUCCESS:"add_media_success",ADD_MEDIA_FAILURE:"add_media_failure"},Vc={error:{},isLoading:!1,newlyCreatedMediaIds:[]};const qc=function(e,t){switch(t.type){case jc.LOADING_MEDIA:return{...e,isLoading:!0,newlyCreatedMediaIds:[]};case jc.ADD_MEDIA_FAILURE:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1};case jc.ADD_MEDIA_SUCCESS:return{...e,error:{},isLoading:!1,newlyCreatedMediaIds:t.payload.newlyCreatedMediaIds||e.newlyCreatedMediaIds};default:return e}};function Wc(){const[e,t]=(0,g.useReducer)(qc,Vc),{api:{media:a}}=y();return{media:e,api:{uploadMedia:(0,g.useCallback)((async e=>{t({type:jc.LOADING_MEDIA});try{const o=await function(e,t){return Promise.all(Object.values(t).map((t=>{const a=new window.FormData;return a.append("file",t,t.name||t.type.replace("/",".")),ii({path:e,body:a,method:"POST"}).then(ri.snakeToCamelCaseObjectKeys)})))}(a,e);t({type:jc.ADD_MEDIA_SUCCESS,payload:{media:o,newlyCreatedMediaIds:o.map((({id:e})=>e))}})}catch(a){t({type:jc.ADD_MEDIA_FAILURE,payload:{message:Ii.UPLOAD_PUBLISHER_LOGO[e.length>1?"MESSAGE_PLURAL":"MESSAGE"]}})}}),[a])}}}const $c={UPDATE_SETTINGS_SUCCESS:"update_settings_success",UPDATE_SETTINGS_FAILURE:"update_settings_failure",SETTING_SAVED:"setting_saved",FETCH_SETTINGS_SUCCESS:"fetch_settings_success",FETCH_SETTINGS_FAILURE:"fetch_settings_failure"},Kc={error:{},googleAnalyticsId:"",usingLegacyAnalytics:!1,adSensePublisherId:"",adSenseSlotId:"",adManagerSlotId:"",mgidWidgetId:"",adNetwork:Ai,archive:Ni.DEFAULT,archivePageId:0,videoCache:!1,dataRemoval:!1,settingSaved:!1,shoppingProvider:Pi,shopifyHost:"",shopifyAccessToken:"",autoAdvance:!0,defaultPageDuration:7,googleAnalyticsHandler:Mi};const Xc=function(e,t){switch(t.type){case $c.SETTING_SAVED:return{...e,settingSaved:t.payload};case $c.UPDATE_SETTINGS_FAILURE:case $c.FETCH_SETTINGS_FAILURE:return{...e,error:{...t.payload,id:Date.now()}};case $c.FETCH_SETTINGS_SUCCESS:case $c.UPDATE_SETTINGS_SUCCESS:return{...e,error:{},googleAnalyticsId:t.payload.googleAnalyticsId,usingLegacyAnalytics:t.payload.usingLegacyAnalytics,adSensePublisherId:t.payload.adSensePublisherId,adSenseSlotId:t.payload.adSenseSlotId,adManagerSlotId:t.payload.adManagerSlotId,mgidWidgetId:t.payload.mgidWidgetId,adNetwork:t.payload.adNetwork,videoCache:t.payload.videoCache,dataRemoval:t.payload.dataRemoval,archive:t.payload.archive,archivePageId:t.payload.archivePageId,shoppingProvider:t.payload.shoppingProvider,shopifyHost:t.payload.shopifyHost,shopifyAccessToken:t.payload.shopifyAccessToken,autoAdvance:t.payload.autoAdvance,defaultPageDuration:t.payload.defaultPageDuration,googleAnalyticsHandler:t.payload.googleAnalyticsHandler};default:return e}},Yc=e=>({googleAnalyticsId:e.web_stories_ga_tracking_id,usingLegacyAnalytics:e.web_stories_using_legacy_analytics,adSensePublisherId:e.web_stories_adsense_publisher_id,adSenseSlotId:e.web_stories_adsense_slot_id,adManagerSlotId:e.web_stories_ad_manager_slot_id,mgidWidgetId:e.web_stories_mgid_widget_id,adNetwork:e.web_stories_ad_network,videoCache:e.web_stories_video_cache,dataRemoval:e.web_stories_data_removal,archive:e.web_stories_archive,archivePageId:e.web_stories_archive_page_id,shoppingProvider:e.web_stories_shopping_provider,shopifyHost:e.web_stories_shopify_host,shopifyAccessToken:e.web_stories_shopify_access_token,autoAdvance:Boolean(e.web_stories_auto_advance),defaultPageDuration:e.web_stories_default_page_duration,googleAnalyticsHandler:e.web_stories_ga_tracking_handler});function Jc(){const[e,t]=(0,g.useReducer)(Xc,Kc),{api:{settings:a}}=y();return{settings:e,api:{fetchSettings:(0,g.useCallback)((async()=>{try{const o=await(e=a,ii({path:e}).then(Yc));t({type:$c.FETCH_SETTINGS_SUCCESS,payload:o})}catch(e){t({type:$c.FETCH_SETTINGS_FAILURE,payload:{message:Ii.LOAD_SETTINGS.MESSAGE}})}var e}),[a]),updateSettings:(0,g.useCallback)((async e=>{t({type:$c.SETTING_SAVED});try{const o=await function(e,t){const{googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:r,adSenseSlotId:n,adManagerSlotId:l,mgidWidgetId:i,adNetwork:s,videoCache:c,dataRemoval:d,archive:u,archivePageId:p,shoppingProvider:m,shopifyHost:f,shopifyAccessToken:b,autoAdvance:g,defaultPageDuration:h,googleAnalyticsHandler:_}=t,y={};void 0!==a&&(y.web_stories_ga_tracking_id=a),void 0!==o&&(y.web_stories_using_legacy_analytics=o),void 0!==r&&(y.web_stories_adsense_publisher_id=r),void 0!==n&&(y.web_stories_adsense_slot_id=n),void 0!==l&&(y.web_stories_ad_manager_slot_id=l),void 0!==i&&(y.web_stories_mgid_widget_id=i),void 0!==s&&(y.web_stories_ad_network=s),void 0!==c&&(y.web_stories_video_cache=Boolean(c)),void 0!==d&&(y.web_stories_data_removal=Boolean(d)),void 0!==u&&(y.web_stories_archive=u),void 0!==p&&(y.web_stories_archive_page_id=p),void 0!==m&&(y.web_stories_shopping_provider=m),void 0!==f&&(y.web_stories_shopify_host=f),void 0!==b&&(y.web_stories_shopify_access_token=b),void 0!==g&&(y.web_stories_auto_advance=Boolean(g)),void 0!==h&&(y.web_stories_default_page_duration=h),void 0!==_&&(y.web_stories_ga_tracking_handler=_);const E=(0,li.default)(e,y);return ii({path:E,method:"POST"}).then(Yc)}(a,e);t({type:$c.UPDATE_SETTINGS_SUCCESS,payload:o}),t({type:$c.SETTING_SAVED,payload:!0})}catch(e){t({type:$c.UPDATE_SETTINGS_FAILURE,payload:{message:Ii.UPDATE_EDITOR_SETTINGS.MESSAGE}})}}),[a])}}}const Zc=document.createElement("div");function Qc(e){return Zc.innerHTML=e,Zc.textContent||""}document.createElement("div");function ed(){const{api:{pages:e}}=y(),t=(0,g.useCallback)((async t=>{try{const{title:a,link:o}=await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_fields:di});return ii({path:a})}(e,t);return{title:Qc(a.rendered),link:o}}catch(e){return null}}),[e]);return{api:{searchPages:(0,g.useCallback)((async t=>{try{const a=await function(e,t){const a=(0,li.default)(e,{per_page:100,search:t,_fields:ci});return ii({path:a})}(e,t);return a.map((({id:e,title:t})=>({value:e,label:Qc(t.rendered)})))}catch(e){return[]}}),[e]),getPageById:t}}}const td={LOADING:"loading",UPDATE_FAILURE:"update_failure",UPDATE_SUCCESS:"update_success",FETCH_FAILURE:"fetch_failure",FETCH_SUCCESS:"fetch_success",REMOVE_FAILURE:"remove_failure",REMOVE_SUCCESS:"remove_success",ADD_FAILURE:"add_failure",ADD_SUCCESS:"add_success"},ad={error:{},isLoading:!1,publisherLogos:[],settingSaved:!1};const od=function(e,t){switch(t.type){case td.LOADING:return{...e,isLoading:!0,settingSaved:!1};case td.ADD_FAILURE:case td.UPDATE_FAILURE:case td.REMOVE_FAILURE:case td.FETCH_FAILURE:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1,settingSaved:!1};case td.FETCH_SUCCESS:return{...e,error:{},isLoading:!1,publisherLogos:[...t.payload.publisherLogos]};case td.ADD_SUCCESS:{const a=[...e.publisherLogos,t.payload.publisherLogo];return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case td.UPDATE_SUCCESS:{const a=[...e.publisherLogos].map((e=>(e.active=e.id===t.payload.publisherLogo.id,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case td.REMOVE_SUCCESS:{const a=e.publisherLogos.some((({id:e,active:a})=>e===t.payload.id&&a)),o=[...e.publisherLogos].filter((({id:e})=>e!==t.payload.id)).map(((e,t)=>(e.active=a?0===t:e.active,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:o}}default:return e}};function rd(){const[e,t]=(0,g.useReducer)(od,ad),{api:{publisherLogos:a}}=y(),o=(0,g.useCallback)((async()=>{t({type:td.LOADING});try{const o=await(e=a,ii({path:e}));Array.isArray(o)?t({type:td.FETCH_SUCCESS,payload:{publisherLogos:o}}):t({type:td.FETCH_FAILURE,payload:{message:Ii.LOAD_PUBLISHER_LOGOS.MESSAGE}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.LOAD_PUBLISHER_LOGOS.MESSAGE}})}var e}),[a]),r=(0,g.useCallback)((async e=>{t({type:td.LOADING});try{await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_method:"DELETE"});return ii({path:a,method:"POST"})}(a,e),t({type:td.REMOVE_SUCCESS,payload:{id:e}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.REMOVE_PUBLISHER_LOGO.MESSAGE}})}}),[a]),n=(0,g.useCallback)((async e=>{t({type:td.LOADING});try{const n=await(o=a,r=e,ii({path:o,data:{id:r},method:"POST"})),l=Array.isArray(n)?n:[n];for(const e of l)t({type:td.ADD_SUCCESS,payload:{publisherLogo:e}})}catch(e){t({type:td.ADD_FAILURE,payload:{message:Ii.UPLOAD_PUBLISHER_LOGO.MESSAGE}})}var o,r}),[a]);return{publisherLogos:e,api:{fetchPublisherLogos:o,addPublisherLogo:n,removePublisherLogo:r,setPublisherLogoAsDefault:(0,g.useCallback)((async e=>{t({type:td.LOADING});try{const n=await(o=a,r=e,ii({path:`${o}${r}/`,data:{active:!0},method:"POST"}));t({type:td.UPDATE_SUCCESS,payload:{publisherLogo:n}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.UPDATE_PUBLISHER_LOGO.MESSAGE}})}var o,r}),[a])}}}function nd(){const{api:{fonts:e}}=y(),[t,a]=(0,g.useState)(null),o=(0,g.useCallback)((async()=>{try{const t=(await function(e){const t=(0,li.default)(e,{per_page:100,service:"custom"});return ii({path:t})}(e)).map((({id:e,family:t,url:a})=>({id:e,family:t,url:a})));return a(t),t}catch{return null}}),[e]),r=(0,g.useCallback)((async o=>{const r=await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_method:"DELETE"});return ii({path:a,method:"POST"})}(e,o),n=t.filter((e=>e.id!==o));return a(n),r}),[t,e]),n=(0,g.useCallback)((async o=>{const r=await function(e,t){return ii({path:e,data:t,method:"POST"})}(e,o),{id:n,family:l,url:i}=r,s={id:n,family:l,url:i};return a([s,...t]),s}),[t,e]);return{customFonts:t,api:{addCustomFont:n,deleteCustomFont:r,fetchCustomFonts:o}}}const ld=function EditorSettingsProvider({children:e}){const{customFonts:t,api:a}=nd(),{currentUser:o,api:n}=Hc(),{media:l,api:i}=Wc(),{settings:s,api:c}=Jc(),{api:d}=ed(),{publisherLogos:u,api:p}=rd(),m={state:{media:l,settings:s,currentUser:o,customFonts:t,publisherLogos:u},actions:{fontsApi:a,mediaApi:i,settingsApi:c,usersApi:n,pagesApi:d,publisherLogosApi:p}};return r.createElement(Hi.Provider,{value:m},e)};var id=a(18969);function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},sd.apply(this,arguments)}const cd=(0,m.default)(no.Headline).withConfig({displayName:"banner__Title",componentId:"sc-z6zfp9-0"})(["grid-area:title;padding-left:8px;"]),dd=m.default.div.withConfig({displayName:"banner__Content",componentId:"sc-z6zfp9-1"})(["grid-area:content;margin-bottom:4px;max-width:600px;min-width:50%;"]),ud=(0,m.default)(Bt.Button).withConfig({displayName:"banner__CloseButton",componentId:"sc-z6zfp9-2"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;"]),pd=m.default.div.withConfig({displayName:"banner__CloseButtonPlaceholder",componentId:"sc-z6zfp9-3"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;width:32px;height:32px;"]),md=m.default.div.withConfig({displayName:"banner__Container",componentId:"sc-z6zfp9-4"})(["display:grid;width:100%;min-height:60px;align-items:baseline;padding:6px 8px;background-color:",";border-radius:",";max-height:184px;grid-template-columns:1fr 32px;grid-template-rows:3;grid-column-gap:0;grid-template-areas:'. closeButton' 'title title' 'content content';text-align:center;& + &{margin-top:18px;}","{padding-left:0;margin-top:-10px;}","{margin:8px auto 18px;max-width:600px;}"],(({theme:e})=>e.colors.gray[5]),(({theme:e})=>e.borders.radius.medium),cd,dd),fd=(0,g.forwardRef)((({children:e,closeButtonLabel:t,title:a,onClose:o,...n},l)=>r.createElement(md,sd({ref:l},n),r.createElement(cd,{as:"h2",size:Ya.TextSize.XSmall},a),o?r.createElement(ud,{type:Mt.ButtonType.Tertiary,variant:Mt.ButtonVariant.Square,size:Mt.ButtonSize.Small,"aria-label":t,onClick:o},r.createElement(id.default,{"aria-hidden":!0})):r.createElement(pd,null),r.createElement(dd,null,e))));function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},bd.apply(this,arguments)}const gd=m.default.label.attrs({htmlFor:"telemetry-banner-opt-in"}).withConfig({displayName:"telemetryBanner__Label",componentId:"sc-inh4j2-0"})(["display:flex;cursor:pointer;"]),hd=(0,m.default)(Sa.Text.Span).withConfig({displayName:"telemetryBanner__LabelText",componentId:"sc-inh4j2-1"})(["margin-bottom:16px;margin-left:8px;color:",";"],(({theme:e})=>e.colors.fg.secondary)),_d=(0,m.default)(Sa.Text.Span).withConfig({displayName:"telemetryBanner__VisitSettingsText",componentId:"sc-inh4j2-2"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),yd=(0,m.default)(ea.Link).withConfig({displayName:"telemetryBanner__NavLink",componentId:"sc-inh4j2-3"})(["display:inline-block;margin:0;"]),Ed=(0,g.forwardRef)((({visible:e=!0,disabled:t=!1,onChange:a=(()=>{}),onClose:o=(()=>{}),checked:l=!1},i)=>{const s=(0,g.useRef)(),c=(0,g.useRef)(!1),d=l?(0,n.__)("Your selection has been updated. Thank you for helping to improve the editor!","web-stories"):(0,n.__)("Help improve the editor!","web-stories");return(0,g.useEffect)((()=>{c.current&&s.current.focus()})),e?r.createElement(fd,{closeButtonLabel:(0,n.__)("Dismiss telemetry banner","web-stories"),onClose:o,title:d,ref:i},r.createElement(gd,null,r.createElement(Hs.default,{id:"telemetry-banner-opt-in",checked:l,disabled:t,onChange:()=>{a(),c.current=!0},onBlur:()=>{c.current=!1},ref:s}),r.createElement(hd,{"aria-checked":l,size:Ya.TextSize.Small},r.createElement(dr.default,{mapping:{a:r.createElement(yd,{size:Ya.TextSize.Small,href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")))),r.createElement(_d,{size:Ya.TextSize.XSmall},r.createElement(dr.default,{mapping:{a:r.createElement(yd,{size:Ya.TextSize.XSmall,href:to(ki),"aria-label":(0,n.__)("Settings","web-stories")})}},(0,n.__)("You can update your selection later by visiting <a>Settings</a>.","web-stories")))):null}));function TelemetryBannerContainer(e){const{bannerVisible:t,closeBanner:a,optedIn:o,disabled:n,toggleWebStoriesTrackingOptIn:l}=$i(),i=(0,g.useRef)(),s=(0,g.useRef)(t);return(0,g.useLayoutEffect)((()=>{t&&!1===s.current&&i.current?s.current=!0:!t&&s.current&&(s.current=!1)}),[t]),r.createElement(Ed,bd({ref:i,visible:t,checked:o,disabled:n,onChange:l,onClose:a},e))}function TelemetryBanner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,g.useRef)(null),[,o]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,g.createPortal)(r.createElement(TelemetryBannerContainer,null),a.current):null}Ed.displayName="TelemetryOptInBanner";const Sd=(0,m.default)(fd).withConfig({displayName:"updateBanner__StyledBanner",componentId:"sc-1lpd8jt-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),wd=(0,m.default)(ea.Link).withConfig({displayName:"updateBanner__StyledLink",componentId:"sc-1lpd8jt-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function NoLink({children:e}){return e}const vd="web_stories_update_banner_closed";function UpdateBannerContainer(){const{bannerVisible:e}=$i(),{plugins:{"web-stories":t={}}}=y(),{needsUpdate:a,updateLink:o}=t,l=(0,g.useRef)(),[i,s]=(0,g.useState)(!1);(0,g.useEffect)((()=>{s(function(){const e=Vi.getItemByKey(vd);return!e||(new Date).getTime()>e&&(Vi.setItemByKey(vd,null),!0)}()&&a)}),[a]);const c=(0,g.useCallback)((()=>{const e=(new Date).getTime()+1728e5;Vi.setItemByKey(vd,e),s(!1)}),[]);if(!i)return null;if(e)return null;const d=o?wd:NoLink;return r.createElement(Sd,{closeButtonLabel:(0,n.__)("Dismiss update notification","web-stories"),onClose:c,title:(0,n.__)("Update available.","web-stories"),ref:l},r.createElement(Sa.Text.Paragraph,null,r.createElement(dr.default,{mapping:{a:r.createElement(d,{href:o})}},(0,n.__)("A new version of the plugin is available. <a>Please update now</a>.","web-stories"))))}function UpdateBanner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,g.useRef)(null),[,o]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY,ki].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,g.createPortal)(r.createElement(UpdateBannerContainer,null),a.current):null}const Td=(0,m.default)(fd).withConfig({displayName:"ga4Banner__StyledBanner",componentId:"sc-jq5r9t-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),Cd=(0,m.default)(ea.Link).withConfig({displayName:"ga4Banner__StyledLink",componentId:"sc-jq5r9t-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function GoogleAnalytics4BannerContainer(){const{plugins:{siteKit:e={}}}=y(),t=ji((({state:{settings:{googleAnalyticsId:e}}})=>e?.toLowerCase().startsWith("ua-"))),{currentPath:a}=eo((({state:{currentPath:e}})=>({currentPath:e}))),o=(0,g.useRef)();return e.analyticsActive?null:t?a===ki?null:r.createElement(Td,{title:(0,n.__)("Update your Google Analytics configuration.","web-stories"),ref:o},r.createElement(Sa.Text.Paragraph,null,r.createElement(dr.default,{mapping:{a:r.createElement(ea.Link,{href:(0,n.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:e=>(0,E.trackClick)(e,"click_ua_deprecation_docs")}),a2:r.createElement(ea.Link,{href:(0,n.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:e=>(0,E.trackClick)(e,"click_ga4_docs")})}},(0,n.__)("As <a>previously announced</a>, Universal Analytics will stop processing new visits starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4), our analytics product of record.","web-stories"))),r.createElement(Sa.Text.Paragraph,null,r.createElement(dr.default,{mapping:{a:r.createElement(Cd,{href:to(ki)})}},(0,n.__)("<a>Update your settings now</a>.","web-stories")))):null}function GoogleAnalytics4Banner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,g.useRef)(null),[,o]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY,ki].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,g.createPortal)(r.createElement(GoogleAnalytics4BannerContainer,null),a.current):null}const Id=function(){return Gi(),r.createElement(ld,null,r.createElement(ai,{additionalRoutes:[{path:ki,component:r.createElement(Gc,null)}]}),r.createElement(TelemetryBanner,null),r.createElement(UpdateBanner,null),r.createElement(GoogleAnalytics4Banner,null))};window.webStories=window.webStories||{},window.webStories.initializeStoryDashboard=(e,t)=>{const a=document.getElementById(e);(0,oi.setAppElement)(a),(0,ft.updateSettings)(t.locale),(0,E.initializeTracking)("Dashboard",!1);const l={...t,apiCallbacks:(0,ni.default)(o,t),leftRailSecondaryNavigation:Li,documentTitleSuffix:(0,n.__)("Web Stories − WordPress","web-stories"),styleConstants:{topOffset:32,leftOffset:36},containerId:"wpbody"};(0,g.render)(r.createElement(g.StrictMode,null,r.createElement(cr,{config:l},r.createElement(zi,null),r.createElement(Id,null))),a)}}},r={};function __webpack_require__(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return o[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=o,e=[],__webpack_require__.O=(t,a,o,r)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,o,r]=e[c],l=!0,i=0;i<a.length;i++)(!1&r||n>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[i])))?a.splice(i--,1):(l=!1,r<n&&(n=r));if(l){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[])),__webpack_require__.u=e=>649===e?"649.js":({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2454:"chunk-web-stories-template-6",2558:"chunk-web-stories-template-53-metaData",2776:"chunk-web-stories-template-9-metaData",2794:"chunk-opentype",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",4991:"chunk-web-stories-templates",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21"}[e]||e)+".js?v="+{8:"b22c99cfcddef1a99439",69:"68e049fa5bf067508d5c",274:"c49718d12864a384730b",354:"62eba7739cf76d215623",410:"68cdfbdc1d6c0d5a3d00",533:"b82b7a05c9018c078d79",824:"96478e70cf2b8eb3f98a",827:"e11baedf41c7a0a9efa1",884:"ced5feee20d98d66ea25",907:"9a74a0c5ed05f0507fb2",1049:"5f9ebb173c7673d576cd",1066:"e52e5748cc46f6e44f05",1231:"dc8b90b8079d043182f9",1340:"1a8a1bc41cf24c91ade6",1380:"48055da13d540d513094",1403:"1e1289c1c3725a31b120",1738:"52f435b9cb4a20118ba2",1789:"a35242348ed91e76c3f3",1813:"796e60c9090c73536876",1847:"591361d41e047bcef19c",1858:"144f84fa3755d0a3d1a7",1970:"aee7febbdb3641d414ff",2068:"9190080af8cc808a9ed2",2167:"50b3454894d55dbbd173",2191:"17e77e46d95e5bf32684",2235:"8807bb9e439cb422ab98",2246:"b4924d352336668d56e4",2319:"0fb793cf73f8360573eb",2338:"fb3c151a9aaec2c43f9a",2374:"df790c1a10c3469cc91f",2454:"6a7dc756019eb08d8e80",2558:"b5fa2a5d7a57b172f7bb",2776:"ee72cbabe29974fa8406",2794:"578143576247e5fbd51d",2830:"f05c2615deee05b51bf2",2880:"c07b457b338abe54a703",2894:"1ad01f4210a3ec025573",3041:"e58d9b73b848a4a70af3",3194:"f87066eceed4fb4ef680",3245:"286db9a1d922618db5cc",3289:"dbc6e2f9b0c6b5400692",3304:"56c58ec8b3742d5b4db1",3441:"4661c49dd02ca1298663",3529:"568d4da6d53b8f636264",3710:"cd804550e0d30eb563bd",3772:"25848762d52bfdb69b63",3777:"faf06faa0ebffbc3e489",3864:"0b950ac8c6cc0d1e7bf3",3969:"9cdb461c495c2417dac2",4051:"1719021f30335543dcd2",4142:"ddb040cdab0a4b5a18c1",4178:"3fb0dfb96ae4e5c82633",4386:"fc34fb4b4fe6200787ee",4422:"9986320a05ec2d96e03b",4585:"0fb28952752f95ca730d",4874:"4b26ec412ea351d008ec",4991:"6a86ff41e3eb5e784e77",5016:"0db5d4088ab6015df841",5040:"3b075991f65f1866082f",5157:"9ad9ee30319da54b0cec",5312:"7cf76f68f21e3f525c85",5372:"e975299493821863991b",5397:"f2be97e1bda4c551f38e",5432:"84d97a4fe6d500685016",5535:"aab57271993cd9fbe0ec",5543:"2c35f08ad142855408de",5553:"f876f3dacae1d82c0f02",5570:"46a2484b930187a88e3b",5573:"d0b0c5d2c26c3fdf3b84",5748:"de84b45775b67aea7b12",5835:"66d966f68ab33c8dc9cc",6053:"e98e5938734936bc33ec",6188:"b6113d55e53c8eab9c2f",6204:"a4bdc7f5348037d3a6bd",6271:"ee1e43dca8c58828926d",6305:"28c45188c9d7c8ca105c",6311:"b147470734423da1414b",6353:"186417cb81cd46cc5898",6406:"a323d5bc44e34a106e84",6428:"151c1bbb5b4ab65186d5",6500:"e0b8969d8f1d6be4cdb7",6517:"d7bb7d1b567cced02951",6539:"9e401d0fe6cbc4655dae",6592:"b1d6207344369d7604e7",6641:"39b1b6f75e1b43699e6f",6766:"2e1fb22073205fafd7c9",6841:"113f4a7677bc176cd11a",6852:"525b669561be27e32319",7131:"6ca176524842d3edf0e6",7314:"aab1b550bb1955d441ed",7343:"91b8d0ce188e25dd034a",7346:"2724ada893ea4fb98733",7399:"7801a312459478d1bceb",7441:"2b31ed1f94c1889e8a7a",7502:"1f509bc96f0104f25f6e",7528:"a7e4e8673ccd91d6a86e",7586:"c4ca71c960b9fa58264f",7588:"0f3afacaad0140c3df95",7685:"4b28a6872011e564d4c5",7798:"2c9410b2820ec19b835c",7799:"0d535854d4bdddaf51fd",7863:"05127a0e7bf1f4014da9",7952:"3ec2df72ace86d01f8a9",8022:"551abb4b5e86cd646109",8189:"7b058e00e8e6d7f9c550",8203:"ef02eddbcfb145cc4b1b",8257:"505a372369207c5af300",8344:"44d978f444a855cdfb1d",8422:"74ba40ea488385d89850",8551:"8f5ded750543be8a85fc",8768:"d36e65c2d39691b8ed80",8856:"e038dfacbf9206b9ed4c",9074:"d608d65329c98e40f992",9233:"464a70e22e2366a9a1bc",9288:"a09a71708bd6f5d7e730",9302:"0100c5e624869169a12d",9375:"1f950168392f499a166a",9393:"276e1d2d9bab1bbc7367",9557:"3499889c117b7ef02698",9591:"747776f9f4700c581b24",9603:"40266566515b08ab065f",9607:"496d2f2db17475a4bfbf",9700:"02a917f2a23d1604003d",9738:"41980a99825f24cb7810",9811:"3de5f6f607a0e305fbaf"}[e],__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="web-stories-wp:",__webpack_require__.l=(e,o,r,n)=>{if(t[e])t[e].push(o);else{var l,i;if(void 0!==r)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+r){l=d;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+r),l.src=e),t[e]=[o];var u=(a,o)=>{l.onerror=l.onload=null,clearTimeout(p);var r=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(o))),a)return a(o)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),i&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="",(()=>{var e={8156:0};__webpack_require__.f.j=(t,a)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise(((a,r)=>o=e[t]=[a,r]));a.push(o[2]=r);var n=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(n,(a=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",l.name="ChunkLoadError",l.type=r,l.request=n,o[1](l)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[n,l,i]=a,s=0;if(n.some((t=>0!==e[t]))){for(o in l)__webpack_require__.o(l,o)&&(__webpack_require__.m[o]=l[o]);if(i)var c=i(__webpack_require__)}for(t&&t(a);s<n.length;s++)r=n[s],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(c)},a=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),__webpack_require__.nc=void 0;var n=__webpack_require__.O(void 0,[3244,7480,3669],(()=>__webpack_require__(53461)));n=__webpack_require__.O(n)})();